const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-BebFxdFZ.js","assets/webworkerAll-eGrpVA7I.js","assets/colorToUniform-B2Rs-8JD.js","assets/WebGPURenderer-BpLjSB8l.js","assets/SharedSystems-Bt94dujP.js","assets/WebGLRenderer-B9E3FF5d.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Oc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Oh={exports:{}},Fo={},Nh={exports:{}},Se={};var Zg;function ow(){if(Zg)return Se;Zg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=m&&R[m]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function S(R,N,J){this.props=R,this.context=N,this.refs=x,this.updater=J||y}S.prototype.isReactComponent={},S.prototype.setState=function(R,N){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,N,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function C(){}C.prototype=S.prototype;function b(R,N,J){this.props=R,this.context=N,this.refs=x,this.updater=J||y}var P=b.prototype=new C;P.constructor=b,v(P,S.prototype),P.isPureReactComponent=!0;var E=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function $(R,N,J){var ne,re={},fe=null,Te=null;if(N!=null)for(ne in N.ref!==void 0&&(Te=N.ref),N.key!==void 0&&(fe=""+N.key),N)A.call(N,ne)&&!k.hasOwnProperty(ne)&&(re[ne]=N[ne]);var Ee=arguments.length-2;if(Ee===1)re.children=J;else if(1<Ee){for(var Ie=Array(Ee),Me=0;Me<Ee;Me++)Ie[Me]=arguments[Me+2];re.children=Ie}if(R&&R.defaultProps)for(ne in Ee=R.defaultProps,Ee)re[ne]===void 0&&(re[ne]=Ee[ne]);return{$$typeof:i,type:R,key:fe,ref:Te,props:re,_owner:M.current}}function D(R,N){return{$$typeof:i,type:R.type,key:N,ref:R.ref,props:R.props,_owner:R._owner}}function O(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function G(R){var N={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(J){return N[J]})}var te=/\/+/g;function Z(R,N){return typeof R=="object"&&R!==null&&R.key!=null?G(""+R.key):N.toString(36)}function ie(R,N,J,ne,re){var fe=typeof R;(fe==="undefined"||fe==="boolean")&&(R=null);var Te=!1;if(R===null)Te=!0;else switch(fe){case"string":case"number":Te=!0;break;case"object":switch(R.$$typeof){case i:case e:Te=!0}}if(Te)return Te=R,re=re(Te),R=ne===""?"."+Z(Te,0):ne,E(re)?(J="",R!=null&&(J=R.replace(te,"$&/")+"/"),ie(re,N,J,"",function(Me){return Me})):re!=null&&(O(re)&&(re=D(re,J+(!re.key||Te&&Te.key===re.key?"":(""+re.key).replace(te,"$&/")+"/")+R)),N.push(re)),1;if(Te=0,ne=ne===""?".":ne+":",E(R))for(var Ee=0;Ee<R.length;Ee++){fe=R[Ee];var Ie=ne+Z(fe,Ee);Te+=ie(fe,N,J,Ie,re)}else if(Ie=g(R),typeof Ie=="function")for(R=Ie.call(R),Ee=0;!(fe=R.next()).done;)fe=fe.value,Ie=ne+Z(fe,Ee++),Te+=ie(fe,N,J,Ie,re);else if(fe==="object")throw N=String(R),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return Te}function he(R,N,J){if(R==null)return R;var ne=[],re=0;return ie(R,ne,"","",function(fe){return N.call(J,fe,re++)}),ne}function V(R){if(R._status===-1){var N=R._result;N=N(),N.then(function(J){(R._status===0||R._status===-1)&&(R._status=1,R._result=J)},function(J){(R._status===0||R._status===-1)&&(R._status=2,R._result=J)}),R._status===-1&&(R._status=0,R._result=N)}if(R._status===1)return R._result.default;throw R._result}var Q={current:null},X={transition:null},U={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:X,ReactCurrentOwner:M};function W(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:he,forEach:function(R,N,J){he(R,function(){N.apply(this,arguments)},J)},count:function(R){var N=0;return he(R,function(){N++}),N},toArray:function(R){return he(R,function(N){return N})||[]},only:function(R){if(!O(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Se.Component=S,Se.Fragment=t,Se.Profiler=r,Se.PureComponent=b,Se.StrictMode=n,Se.Suspense=h,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Se.act=W,Se.cloneElement=function(R,N,J){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ne=v({},R.props),re=R.key,fe=R.ref,Te=R._owner;if(N!=null){if(N.ref!==void 0&&(fe=N.ref,Te=M.current),N.key!==void 0&&(re=""+N.key),R.type&&R.type.defaultProps)var Ee=R.type.defaultProps;for(Ie in N)A.call(N,Ie)&&!k.hasOwnProperty(Ie)&&(ne[Ie]=N[Ie]===void 0&&Ee!==void 0?Ee[Ie]:N[Ie])}var Ie=arguments.length-2;if(Ie===1)ne.children=J;else if(1<Ie){Ee=Array(Ie);for(var Me=0;Me<Ie;Me++)Ee[Me]=arguments[Me+2];ne.children=Ee}return{$$typeof:i,type:R.type,key:re,ref:fe,props:ne,_owner:Te}},Se.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:s,_context:R},R.Consumer=R},Se.createElement=$,Se.createFactory=function(R){var N=$.bind(null,R);return N.type=R,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(R){return{$$typeof:c,render:R}},Se.isValidElement=O,Se.lazy=function(R){return{$$typeof:f,_payload:{_status:-1,_result:R},_init:V}},Se.memo=function(R,N){return{$$typeof:d,type:R,compare:N===void 0?null:N}},Se.startTransition=function(R){var N=X.transition;X.transition={};try{R()}finally{X.transition=N}},Se.unstable_act=W,Se.useCallback=function(R,N){return Q.current.useCallback(R,N)},Se.useContext=function(R){return Q.current.useContext(R)},Se.useDebugValue=function(){},Se.useDeferredValue=function(R){return Q.current.useDeferredValue(R)},Se.useEffect=function(R,N){return Q.current.useEffect(R,N)},Se.useId=function(){return Q.current.useId()},Se.useImperativeHandle=function(R,N,J){return Q.current.useImperativeHandle(R,N,J)},Se.useInsertionEffect=function(R,N){return Q.current.useInsertionEffect(R,N)},Se.useLayoutEffect=function(R,N){return Q.current.useLayoutEffect(R,N)},Se.useMemo=function(R,N){return Q.current.useMemo(R,N)},Se.useReducer=function(R,N,J){return Q.current.useReducer(R,N,J)},Se.useRef=function(R){return Q.current.useRef(R)},Se.useState=function(R){return Q.current.useState(R)},Se.useSyncExternalStore=function(R,N,J){return Q.current.useSyncExternalStore(R,N,J)},Se.useTransition=function(){return Q.current.useTransition()},Se.version="18.3.1",Se}var Jg;function Aa(){return Jg||(Jg=1,Nh.exports=ow()),Nh.exports}var e0;function aw(){if(e0)return Fo;e0=1;var i=Aa(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var f,m={},g=null,y=null;d!==void 0&&(g=""+d),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(y=h.ref);for(f in h)n.call(h,f)&&!s.hasOwnProperty(f)&&(m[f]=h[f]);if(c&&c.defaultProps)for(f in h=c.defaultProps,h)m[f]===void 0&&(m[f]=h[f]);return{$$typeof:e,type:c,key:g,ref:y,props:m,_owner:r.current}}return Fo.Fragment=t,Fo.jsx=l,Fo.jsxs=l,Fo}var t0;function lw(){return t0||(t0=1,Oh.exports=aw()),Oh.exports}var B=lw(),Wl={},Hh={exports:{}},Ut={},zh={exports:{}},Wh={};var n0;function cw(){return n0||(n0=1,(function(i){function e(X,U){var W=X.length;X.push(U);e:for(;0<W;){var R=W-1>>>1,N=X[R];if(0<r(N,U))X[R]=U,X[W]=N,W=R;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var U=X[0],W=X.pop();if(W!==U){X[0]=W;e:for(var R=0,N=X.length,J=N>>>1;R<J;){var ne=2*(R+1)-1,re=X[ne],fe=ne+1,Te=X[fe];if(0>r(re,W))fe<N&&0>r(Te,re)?(X[R]=Te,X[fe]=W,R=fe):(X[R]=re,X[ne]=W,R=ne);else if(fe<N&&0>r(Te,W))X[R]=Te,X[fe]=W,R=fe;else break e}}return U}function r(X,U){var W=X.sortIndex-U.sortIndex;return W!==0?W:X.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();i.unstable_now=function(){return l.now()-c}}var h=[],d=[],f=1,m=null,g=3,y=!1,v=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(X){for(var U=t(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=X)n(d),U.sortIndex=U.expirationTime,e(h,U);else break;U=t(d)}}function E(X){if(x=!1,P(X),!v)if(t(h)!==null)v=!0,V(A);else{var U=t(d);U!==null&&Q(E,U.startTime-X)}}function A(X,U){v=!1,x&&(x=!1,C($),$=-1),y=!0;var W=g;try{for(P(U),m=t(h);m!==null&&(!(m.expirationTime>U)||X&&!G());){var R=m.callback;if(typeof R=="function"){m.callback=null,g=m.priorityLevel;var N=R(m.expirationTime<=U);U=i.unstable_now(),typeof N=="function"?m.callback=N:m===t(h)&&n(h),P(U)}else n(h);m=t(h)}if(m!==null)var J=!0;else{var ne=t(d);ne!==null&&Q(E,ne.startTime-U),J=!1}return J}finally{m=null,g=W,y=!1}}var M=!1,k=null,$=-1,D=5,O=-1;function G(){return!(i.unstable_now()-O<D)}function te(){if(k!==null){var X=i.unstable_now();O=X;var U=!0;try{U=k(!0,X)}finally{U?Z():(M=!1,k=null)}}else M=!1}var Z;if(typeof b=="function")Z=function(){b(te)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,he=ie.port2;ie.port1.onmessage=te,Z=function(){he.postMessage(null)}}else Z=function(){S(te,0)};function V(X){k=X,M||(M=!0,Z())}function Q(X,U){$=S(function(){X(i.unstable_now())},U)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){v||y||(v=!0,V(A))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return t(h)},i.unstable_next=function(X){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var W=g;g=U;try{return X()}finally{g=W}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,U){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var W=g;g=X;try{return U()}finally{g=W}},i.unstable_scheduleCallback=function(X,U,W){var R=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?R+W:R):W=R,X){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=W+N,X={id:f++,callback:U,priorityLevel:X,startTime:W,expirationTime:N,sortIndex:-1},W>R?(X.sortIndex=W,e(d,X),t(h)===null&&X===t(d)&&(x?(C($),$=-1):x=!0,Q(E,W-R))):(X.sortIndex=N,e(h,X),v||y||(v=!0,V(A))),X},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(X){var U=g;return function(){var W=g;g=U;try{return X.apply(this,arguments)}finally{g=W}}}})(Wh)),Wh}var r0;function uw(){return r0||(r0=1,zh.exports=cw()),zh.exports}var i0;function hw(){if(i0)return Ut;i0=1;var i=Aa(),e=uw();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(o,a){l(o,a),l(o+"Capture",a)}function l(o,a){for(r[o]=a,o=0;o<a.length;o++)n.add(a[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(o){return h.call(m,o)?!0:h.call(f,o)?!1:d.test(o)?m[o]=!0:(f[o]=!0,!1)}function y(o,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function v(o,a,u,p){if(a===null||typeof a>"u"||y(o,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(o,a,u,p,_,w,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=o,this.type=a,this.sanitizeURL=w,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];S[a]=new x(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function b(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(C,b);S[a]=new x(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(C,b);S[a]=new x(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(C,b);S[a]=new x(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function P(o,a,u,p){var _=S.hasOwnProperty(a)?S[a]:null;(_!==null?_.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(v(a,u,_,p)&&(u=null),p||_===null?g(a)&&(u===null?o.removeAttribute(a):o.setAttribute(a,""+u)):_.mustUseProperty?o[_.propertyName]=u===null?_.type===3?!1:"":u:(a=_.attributeName,p=_.attributeNamespace,u===null?o.removeAttribute(a):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,p?o.setAttributeNS(p,a,u):o.setAttribute(a,u))))}var E=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),G=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),X=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=X&&o[X]||o["@@iterator"],typeof o=="function"?o:null)}var W=Object.assign,R;function N(o){if(R===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);R=a&&a[1]||""}return`
`+R+o}var J=!1;function ne(o,a){if(!o||J)return"";J=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(j){var p=j}Reflect.construct(o,[],a)}else{try{a.call()}catch(j){p=j}o.call(a.prototype)}else{try{throw Error()}catch(j){p=j}o()}}catch(j){if(j&&p&&typeof j.stack=="string"){for(var _=j.stack.split(`
`),w=p.stack.split(`
`),T=_.length-1,I=w.length-1;1<=T&&0<=I&&_[T]!==w[I];)I--;for(;1<=T&&0<=I;T--,I--)if(_[T]!==w[I]){if(T!==1||I!==1)do if(T--,I--,0>I||_[T]!==w[I]){var L=`
`+_[T].replace(" at new "," at ");return o.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",o.displayName)),L}while(1<=T&&0<=I);break}}}finally{J=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?N(o):""}function re(o){switch(o.tag){case 5:return N(o.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return o=ne(o.type,!1),o;case 11:return o=ne(o.type.render,!1),o;case 1:return o=ne(o.type,!0),o;default:return""}}function fe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case M:return"Portal";case D:return"Profiler";case $:return"StrictMode";case Z:return"Suspense";case ie:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case G:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case te:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case he:return a=o.displayName||null,a!==null?a:fe(o.type)||"Memo";case V:a=o._payload,o=o._init;try{return fe(o(a))}catch{}}return null}function Te(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(a);case 8:return a===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ee(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ie(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Me(o){var a=Ie(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),p=""+o[a];if(!o.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,w=u.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return _.call(this)},set:function(T){p=""+T,w.call(this,T)}}),Object.defineProperty(o,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(T){p=""+T},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function br(o){o._valueTracker||(o._valueTracker=Me(o))}function Un(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return o&&(p=Ie(o)?o.checked?"true":"false":o.value),o=p,o!==u?(a.setValue(o),!0):!1}function fn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function kn(o,a){var u=a.checked;return W({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function Vn(o,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Ee(a.value!=null?a.value:u),o._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ra(o,a){a=a.checked,a!=null&&P(o,"checked",a,!1)}function Ni(o,a){Ra(o,a);var u=Ee(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?Da(o,a.type,u):a.hasOwnProperty("defaultValue")&&Da(o,a.type,Ee(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function Ia(o,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,u||a===o.value||(o.value=a),o.defaultValue=a}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function Da(o,a,u){(a!=="number"||fn(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var Ks=Array.isArray;function Hi(o,a,u,p){if(o=o.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<o.length;u++)_=a.hasOwnProperty("$"+o[u].value),o[u].selected!==_&&(o[u].selected=_),_&&p&&(o[u].defaultSelected=!0)}else{for(u=""+Ee(u),a=null,_=0;_<o.length;_++){if(o[_].value===u){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}a!==null||o[_].disabled||(a=o[_])}a!==null&&(a.selected=!0)}}function Yc(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function lp(o,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Ks(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}o._wrapperState={initialValue:Ee(u)}}function cp(o,a){var u=Ee(a.value),p=Ee(a.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),a.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),p!=null&&(o.defaultValue=""+p)}function up(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function hp(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xc(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?hp(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var $a,dp=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,_){MSApp.execUnsafeLocalFunction(function(){return o(a,u,p,_)})}:o})(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=$a.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Zs(o,a){if(a){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=a;return}}o.textContent=a}var Js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uv=["Webkit","ms","Moz","O"];Object.keys(Js).forEach(function(o){uv.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),Js[a]=Js[o]})});function fp(o,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Js.hasOwnProperty(o)&&Js[o]?(""+a).trim():a+"px"}function pp(o,a){o=o.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,_=fp(u,a[u],p);u==="float"&&(u="cssFloat"),p?o.setProperty(u,_):o[u]=_}}var hv=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qc(o,a){if(a){if(hv[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Kc(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zc=null;function Jc(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var eu=null,zi=null,Wi=null;function mp(o){if(o=wo(o)){if(typeof eu!="function")throw Error(t(280));var a=o.stateNode;a&&(a=rl(a),eu(o.stateNode,o.type,a))}}function gp(o){zi?Wi?Wi.push(o):Wi=[o]:zi=o}function yp(){if(zi){var o=zi,a=Wi;if(Wi=zi=null,mp(o),a)for(o=0;o<a.length;o++)mp(a[o])}}function _p(o,a){return o(a)}function xp(){}var tu=!1;function vp(o,a,u){if(tu)return o(a,u);tu=!0;try{return _p(o,a,u)}finally{tu=!1,(zi!==null||Wi!==null)&&(xp(),yp())}}function eo(o,a){var u=o.stateNode;if(u===null)return null;var p=rl(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var nu=!1;if(c)try{var to={};Object.defineProperty(to,"passive",{get:function(){nu=!0}}),window.addEventListener("test",to,to),window.removeEventListener("test",to,to)}catch{nu=!1}function dv(o,a,u,p,_,w,T,I,L){var j=Array.prototype.slice.call(arguments,3);try{a.apply(u,j)}catch(Y){this.onError(Y)}}var no=!1,La=null,Ba=!1,ru=null,fv={onError:function(o){no=!0,La=o}};function pv(o,a,u,p,_,w,T,I,L){no=!1,La=null,dv.apply(fv,arguments)}function mv(o,a,u,p,_,w,T,I,L){if(pv.apply(this,arguments),no){if(no){var j=La;no=!1,La=null}else throw Error(t(198));Ba||(Ba=!0,ru=j)}}function si(o){var a=o,u=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(u=a.return),o=a.return;while(o)}return a.tag===3?u:null}function Sp(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function wp(o){if(si(o)!==o)throw Error(t(188))}function gv(o){var a=o.alternate;if(!a){if(a=si(o),a===null)throw Error(t(188));return a!==o?null:o}for(var u=o,p=a;;){var _=u.return;if(_===null)break;var w=_.alternate;if(w===null){if(p=_.return,p!==null){u=p;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===u)return wp(_),o;if(w===p)return wp(_),a;w=w.sibling}throw Error(t(188))}if(u.return!==p.return)u=_,p=w;else{for(var T=!1,I=_.child;I;){if(I===u){T=!0,u=_,p=w;break}if(I===p){T=!0,p=_,u=w;break}I=I.sibling}if(!T){for(I=w.child;I;){if(I===u){T=!0,u=w,p=_;break}if(I===p){T=!0,p=w,u=_;break}I=I.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:a}function Cp(o){return o=gv(o),o!==null?bp(o):null}function bp(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=bp(o);if(a!==null)return a;o=o.sibling}return null}var Tp=e.unstable_scheduleCallback,Pp=e.unstable_cancelCallback,yv=e.unstable_shouldYield,_v=e.unstable_requestPaint,at=e.unstable_now,xv=e.unstable_getCurrentPriorityLevel,iu=e.unstable_ImmediatePriority,Ep=e.unstable_UserBlockingPriority,Fa=e.unstable_NormalPriority,vv=e.unstable_LowPriority,Ap=e.unstable_IdlePriority,Oa=null,qn=null;function Sv(o){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Oa,o,void 0,(o.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:bv,wv=Math.log,Cv=Math.LN2;function bv(o){return o>>>=0,o===0?32:31-(wv(o)/Cv|0)|0}var Na=64,Ha=4194304;function ro(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function za(o,a){var u=o.pendingLanes;if(u===0)return 0;var p=0,_=o.suspendedLanes,w=o.pingedLanes,T=u&268435455;if(T!==0){var I=T&~_;I!==0?p=ro(I):(w&=T,w!==0&&(p=ro(w)))}else T=u&~_,T!==0?p=ro(T):w!==0&&(p=ro(w));if(p===0)return 0;if(a!==0&&a!==p&&(a&_)===0&&(_=p&-p,w=a&-a,_>=w||_===16&&(w&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=p;0<a;)u=31-Mn(a),_=1<<u,p|=o[u],a&=~_;return p}function Tv(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pv(o,a){for(var u=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,w=o.pendingLanes;0<w;){var T=31-Mn(w),I=1<<T,L=_[T];L===-1?((I&u)===0||(I&p)!==0)&&(_[T]=Tv(I,a)):L<=a&&(o.expiredLanes|=I),w&=~I}}function su(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function kp(){var o=Na;return Na<<=1,(Na&4194240)===0&&(Na=64),o}function ou(o){for(var a=[],u=0;31>u;u++)a.push(o);return a}function io(o,a,u){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Mn(a),o[a]=u}function Ev(o,a){var u=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<u;){var _=31-Mn(u),w=1<<_;a[_]=0,p[_]=-1,o[_]=-1,u&=~w}}function au(o,a){var u=o.entangledLanes|=a;for(o=o.entanglements;u;){var p=31-Mn(u),_=1<<p;_&a|o[p]&a&&(o[p]|=a),u&=~_}}var $e=0;function Mp(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Rp,lu,Ip,Dp,$p,cu=!1,Wa=[],Tr=null,Pr=null,Er=null,so=new Map,oo=new Map,Ar=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lp(o,a){switch(o){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":so.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(a.pointerId)}}function ao(o,a,u,p,_,w){return o===null||o.nativeEvent!==w?(o={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:w,targetContainers:[_]},a!==null&&(a=wo(a),a!==null&&lu(a)),o):(o.eventSystemFlags|=p,a=o.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),o)}function kv(o,a,u,p,_){switch(a){case"focusin":return Tr=ao(Tr,o,a,u,p,_),!0;case"dragenter":return Pr=ao(Pr,o,a,u,p,_),!0;case"mouseover":return Er=ao(Er,o,a,u,p,_),!0;case"pointerover":var w=_.pointerId;return so.set(w,ao(so.get(w)||null,o,a,u,p,_)),!0;case"gotpointercapture":return w=_.pointerId,oo.set(w,ao(oo.get(w)||null,o,a,u,p,_)),!0}return!1}function Bp(o){var a=oi(o.target);if(a!==null){var u=si(a);if(u!==null){if(a=u.tag,a===13){if(a=Sp(u),a!==null){o.blockedOn=a,$p(o.priority,function(){Ip(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ja(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var u=hu(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var p=new u.constructor(u.type,u);Zc=p,u.target.dispatchEvent(p),Zc=null}else return a=wo(u),a!==null&&lu(a),o.blockedOn=u,!1;a.shift()}return!0}function Fp(o,a,u){ja(o)&&u.delete(a)}function Mv(){cu=!1,Tr!==null&&ja(Tr)&&(Tr=null),Pr!==null&&ja(Pr)&&(Pr=null),Er!==null&&ja(Er)&&(Er=null),so.forEach(Fp),oo.forEach(Fp)}function lo(o,a){o.blockedOn===a&&(o.blockedOn=null,cu||(cu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mv)))}function co(o){function a(_){return lo(_,o)}if(0<Wa.length){lo(Wa[0],o);for(var u=1;u<Wa.length;u++){var p=Wa[u];p.blockedOn===o&&(p.blockedOn=null)}}for(Tr!==null&&lo(Tr,o),Pr!==null&&lo(Pr,o),Er!==null&&lo(Er,o),so.forEach(a),oo.forEach(a),u=0;u<Ar.length;u++)p=Ar[u],p.blockedOn===o&&(p.blockedOn=null);for(;0<Ar.length&&(u=Ar[0],u.blockedOn===null);)Bp(u),u.blockedOn===null&&Ar.shift()}var ji=E.ReactCurrentBatchConfig,Ga=!0;function Rv(o,a,u,p){var _=$e,w=ji.transition;ji.transition=null;try{$e=1,uu(o,a,u,p)}finally{$e=_,ji.transition=w}}function Iv(o,a,u,p){var _=$e,w=ji.transition;ji.transition=null;try{$e=4,uu(o,a,u,p)}finally{$e=_,ji.transition=w}}function uu(o,a,u,p){if(Ga){var _=hu(o,a,u,p);if(_===null)Au(o,a,p,Ua,u),Lp(o,p);else if(kv(_,o,a,u,p))p.stopPropagation();else if(Lp(o,p),a&4&&-1<Av.indexOf(o)){for(;_!==null;){var w=wo(_);if(w!==null&&Rp(w),w=hu(o,a,u,p),w===null&&Au(o,a,p,Ua,u),w===_)break;_=w}_!==null&&p.stopPropagation()}else Au(o,a,p,null,u)}}var Ua=null;function hu(o,a,u,p){if(Ua=null,o=Jc(p),o=oi(o),o!==null)if(a=si(o),a===null)o=null;else if(u=a.tag,u===13){if(o=Sp(a),o!==null)return o;o=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return Ua=o,null}function Op(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xv()){case iu:return 1;case Ep:return 4;case Fa:case vv:return 16;case Ap:return 536870912;default:return 16}default:return 16}}var kr=null,du=null,Va=null;function Np(){if(Va)return Va;var o,a=du,u=a.length,p,_="value"in kr?kr.value:kr.textContent,w=_.length;for(o=0;o<u&&a[o]===_[o];o++);var T=u-o;for(p=1;p<=T&&a[u-p]===_[w-p];p++);return Va=_.slice(o,1<p?1-p:void 0)}function qa(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function Ya(){return!0}function Hp(){return!1}function en(o){function a(u,p,_,w,T){this._reactName=u,this._targetInst=_,this.type=p,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(u=o[I],this[I]=u?u(w):w[I]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ya:Hp,this.isPropagationStopped=Hp,this}return W(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ya)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ya)},persist:function(){},isPersistent:Ya}),a}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=en(Gi),uo=W({},Gi,{view:0,detail:0}),Dv=en(uo),pu,mu,ho,Xa=W({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ho&&(ho&&o.type==="mousemove"?(pu=o.screenX-ho.screenX,mu=o.screenY-ho.screenY):mu=pu=0,ho=o),pu)},movementY:function(o){return"movementY"in o?o.movementY:mu}}),zp=en(Xa),$v=W({},Xa,{dataTransfer:0}),Lv=en($v),Bv=W({},uo,{relatedTarget:0}),gu=en(Bv),Fv=W({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ov=en(Fv),Nv=W({},Gi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Hv=en(Nv),zv=W({},Gi,{data:0}),Wp=en(zv),Wv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uv(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=Gv[o])?!!a[o]:!1}function yu(){return Uv}var Vv=W({},uo,{key:function(o){if(o.key){var a=Wv[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=qa(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jv[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(o){return o.type==="keypress"?qa(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?qa(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),qv=en(Vv),Yv=W({},Xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=en(Yv),Xv=W({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),Qv=en(Xv),Kv=W({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zv=en(Kv),Jv=W({},Xa,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),eS=en(Jv),tS=[9,13,27,32],_u=c&&"CompositionEvent"in window,fo=null;c&&"documentMode"in document&&(fo=document.documentMode);var nS=c&&"TextEvent"in window&&!fo,Gp=c&&(!_u||fo&&8<fo&&11>=fo),Up=" ",Vp=!1;function qp(o,a){switch(o){case"keyup":return tS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ui=!1;function rS(o,a){switch(o){case"compositionend":return Yp(a);case"keypress":return a.which!==32?null:(Vp=!0,Up);case"textInput":return o=a.data,o===Up&&Vp?null:o;default:return null}}function iS(o,a){if(Ui)return o==="compositionend"||!_u&&qp(o,a)?(o=Np(),Va=du=kr=null,Ui=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gp&&a.locale!=="ko"?null:a.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!sS[o.type]:a==="textarea"}function Qp(o,a,u,p){gp(p),a=el(a,"onChange"),0<a.length&&(u=new fu("onChange","change",null,u,p),o.push({event:u,listeners:a}))}var po=null,mo=null;function oS(o){pm(o,0)}function Qa(o){var a=Qi(o);if(Un(a))return o}function aS(o,a){if(o==="change")return a}var Kp=!1;if(c){var xu;if(c){var vu="oninput"in document;if(!vu){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),vu=typeof Zp.oninput=="function"}xu=vu}else xu=!1;Kp=xu&&(!document.documentMode||9<document.documentMode)}function Jp(){po&&(po.detachEvent("onpropertychange",em),mo=po=null)}function em(o){if(o.propertyName==="value"&&Qa(mo)){var a=[];Qp(a,mo,o,Jc(o)),vp(oS,a)}}function lS(o,a,u){o==="focusin"?(Jp(),po=a,mo=u,po.attachEvent("onpropertychange",em)):o==="focusout"&&Jp()}function cS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qa(mo)}function uS(o,a){if(o==="click")return Qa(a)}function hS(o,a){if(o==="input"||o==="change")return Qa(a)}function dS(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Rn=typeof Object.is=="function"?Object.is:dS;function go(o,a){if(Rn(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var u=Object.keys(o),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var _=u[p];if(!h.call(a,_)||!Rn(o[_],a[_]))return!1}return!0}function tm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function nm(o,a){var u=tm(o);o=0;for(var p;u;){if(u.nodeType===3){if(p=o+u.textContent.length,o<=a&&p>=a)return{node:u,offset:a-o};o=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=tm(u)}}function rm(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?rm(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function im(){for(var o=window,a=fn();a instanceof o.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)o=a.contentWindow;else break;a=fn(o.document)}return a}function Su(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function fS(o){var a=im(),u=o.focusedElem,p=o.selectionRange;if(a!==u&&u&&u.ownerDocument&&rm(u.ownerDocument.documentElement,u)){if(p!==null&&Su(u)){if(a=p.start,o=p.end,o===void 0&&(o=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(o,u.value.length);else if(o=(a=u.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var _=u.textContent.length,w=Math.min(p.start,_);p=p.end===void 0?w:Math.min(p.end,_),!o.extend&&w>p&&(_=p,p=w,w=_),_=nm(u,w);var T=nm(u,p);_&&T&&(o.rangeCount!==1||o.anchorNode!==_.node||o.anchorOffset!==_.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),o.removeAllRanges(),w>p?(o.addRange(a),o.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),o.addRange(a)))}}for(a=[],o=u;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)o=a[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var pS=c&&"documentMode"in document&&11>=document.documentMode,Vi=null,wu=null,yo=null,Cu=!1;function sm(o,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Cu||Vi==null||Vi!==fn(p)||(p=Vi,"selectionStart"in p&&Su(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),yo&&go(yo,p)||(yo=p,p=el(wu,"onSelect"),0<p.length&&(a=new fu("onSelect","select",null,a,u),o.push({event:a,listeners:p}),a.target=Vi)))}function Ka(o,a){var u={};return u[o.toLowerCase()]=a.toLowerCase(),u["Webkit"+o]="webkit"+a,u["Moz"+o]="moz"+a,u}var qi={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},bu={},om={};c&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function Za(o){if(bu[o])return bu[o];if(!qi[o])return o;var a=qi[o],u;for(u in a)if(a.hasOwnProperty(u)&&u in om)return bu[o]=a[u];return o}var am=Za("animationend"),lm=Za("animationiteration"),cm=Za("animationstart"),um=Za("transitionend"),hm=new Map,dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(o,a){hm.set(o,a),s(a,[o])}for(var Tu=0;Tu<dm.length;Tu++){var Pu=dm[Tu],mS=Pu.toLowerCase(),gS=Pu[0].toUpperCase()+Pu.slice(1);Mr(mS,"on"+gS)}Mr(am,"onAnimationEnd"),Mr(lm,"onAnimationIteration"),Mr(cm,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(um,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function fm(o,a,u){var p=o.type||"unknown-event";o.currentTarget=u,mv(p,a,void 0,o),o.currentTarget=null}function pm(o,a){a=(a&4)!==0;for(var u=0;u<o.length;u++){var p=o[u],_=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var T=p.length-1;0<=T;T--){var I=p[T],L=I.instance,j=I.currentTarget;if(I=I.listener,L!==w&&_.isPropagationStopped())break e;fm(_,I,j),w=L}else for(T=0;T<p.length;T++){if(I=p[T],L=I.instance,j=I.currentTarget,I=I.listener,L!==w&&_.isPropagationStopped())break e;fm(_,I,j),w=L}}}if(Ba)throw o=ru,Ba=!1,ru=null,o}function ze(o,a){var u=a[$u];u===void 0&&(u=a[$u]=new Set);var p=o+"__bubble";u.has(p)||(mm(a,o,2,!1),u.add(p))}function Eu(o,a,u){var p=0;a&&(p|=4),mm(u,o,p,a)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function xo(o){if(!o[Ja]){o[Ja]=!0,n.forEach(function(u){u!=="selectionchange"&&(yS.has(u)||Eu(u,!1,o),Eu(u,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[Ja]||(a[Ja]=!0,Eu("selectionchange",!1,a))}}function mm(o,a,u,p){switch(Op(a)){case 1:var _=Rv;break;case 4:_=Iv;break;default:_=uu}u=_.bind(null,a,u,o),_=void 0,!nu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(a,u,{capture:!0,passive:_}):o.addEventListener(a,u,!0):_!==void 0?o.addEventListener(a,u,{passive:_}):o.addEventListener(a,u,!1)}function Au(o,a,u,p,_){var w=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var I=p.stateNode.containerInfo;if(I===_||I.nodeType===8&&I.parentNode===_)break;if(T===4)for(T=p.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===_||L.nodeType===8&&L.parentNode===_))return;T=T.return}for(;I!==null;){if(T=oi(I),T===null)return;if(L=T.tag,L===5||L===6){p=w=T;continue e}I=I.parentNode}}p=p.return}vp(function(){var j=w,Y=Jc(u),K=[];e:{var q=hm.get(o);if(q!==void 0){var se=fu,ae=o;switch(o){case"keypress":if(qa(u)===0)break e;case"keydown":case"keyup":se=qv;break;case"focusin":ae="focus",se=gu;break;case"focusout":ae="blur",se=gu;break;case"beforeblur":case"afterblur":se=gu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Lv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Qv;break;case am:case lm:case cm:se=Ov;break;case um:se=Zv;break;case"scroll":se=Dv;break;case"wheel":se=eS;break;case"copy":case"cut":case"paste":se=Hv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=jp}var le=(a&4)!==0,lt=!le&&o==="scroll",H=le?q!==null?q+"Capture":null:q;le=[];for(var F=j,z;F!==null;){z=F;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,H!==null&&(ee=eo(F,H),ee!=null&&le.push(vo(F,ee,z)))),lt)break;F=F.return}0<le.length&&(q=new se(q,ae,null,u,Y),K.push({event:q,listeners:le}))}}if((a&7)===0){e:{if(q=o==="mouseover"||o==="pointerover",se=o==="mouseout"||o==="pointerout",q&&u!==Zc&&(ae=u.relatedTarget||u.fromElement)&&(oi(ae)||ae[sr]))break e;if((se||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,se?(ae=u.relatedTarget||u.toElement,se=j,ae=ae?oi(ae):null,ae!==null&&(lt=si(ae),ae!==lt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=j),se!==ae)){if(le=zp,ee="onMouseLeave",H="onMouseEnter",F="mouse",(o==="pointerout"||o==="pointerover")&&(le=jp,ee="onPointerLeave",H="onPointerEnter",F="pointer"),lt=se==null?q:Qi(se),z=ae==null?q:Qi(ae),q=new le(ee,F+"leave",se,u,Y),q.target=lt,q.relatedTarget=z,ee=null,oi(Y)===j&&(le=new le(H,F+"enter",ae,u,Y),le.target=z,le.relatedTarget=lt,ee=le),lt=ee,se&&ae)t:{for(le=se,H=ae,F=0,z=le;z;z=Yi(z))F++;for(z=0,ee=H;ee;ee=Yi(ee))z++;for(;0<F-z;)le=Yi(le),F--;for(;0<z-F;)H=Yi(H),z--;for(;F--;){if(le===H||H!==null&&le===H.alternate)break t;le=Yi(le),H=Yi(H)}le=null}else le=null;se!==null&&gm(K,q,se,le,!1),ae!==null&&lt!==null&&gm(K,lt,ae,le,!0)}}e:{if(q=j?Qi(j):window,se=q.nodeName&&q.nodeName.toLowerCase(),se==="select"||se==="input"&&q.type==="file")var ue=aS;else if(Xp(q))if(Kp)ue=hS;else{ue=cS;var me=lS}else(se=q.nodeName)&&se.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ue=uS);if(ue&&(ue=ue(o,j))){Qp(K,ue,u,Y);break e}me&&me(o,q,j),o==="focusout"&&(me=q._wrapperState)&&me.controlled&&q.type==="number"&&Da(q,"number",q.value)}switch(me=j?Qi(j):window,o){case"focusin":(Xp(me)||me.contentEditable==="true")&&(Vi=me,wu=j,yo=null);break;case"focusout":yo=wu=Vi=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,sm(K,u,Y);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":sm(K,u,Y)}var ge;if(_u)e:{switch(o){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ui?qp(o,u)&&(_e="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(_e="onCompositionStart");_e&&(Gp&&u.locale!=="ko"&&(Ui||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ui&&(ge=Np()):(kr=Y,du="value"in kr?kr.value:kr.textContent,Ui=!0)),me=el(j,_e),0<me.length&&(_e=new Wp(_e,o,null,u,Y),K.push({event:_e,listeners:me}),ge?_e.data=ge:(ge=Yp(u),ge!==null&&(_e.data=ge)))),(ge=nS?rS(o,u):iS(o,u))&&(j=el(j,"onBeforeInput"),0<j.length&&(Y=new Wp("onBeforeInput","beforeinput",null,u,Y),K.push({event:Y,listeners:j}),Y.data=ge))}pm(K,a)})}function vo(o,a,u){return{instance:o,listener:a,currentTarget:u}}function el(o,a){for(var u=a+"Capture",p=[];o!==null;){var _=o,w=_.stateNode;_.tag===5&&w!==null&&(_=w,w=eo(o,u),w!=null&&p.unshift(vo(o,w,_)),w=eo(o,a),w!=null&&p.push(vo(o,w,_))),o=o.return}return p}function Yi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function gm(o,a,u,p,_){for(var w=a._reactName,T=[];u!==null&&u!==p;){var I=u,L=I.alternate,j=I.stateNode;if(L!==null&&L===p)break;I.tag===5&&j!==null&&(I=j,_?(L=eo(u,w),L!=null&&T.unshift(vo(u,L,I))):_||(L=eo(u,w),L!=null&&T.push(vo(u,L,I)))),u=u.return}T.length!==0&&o.push({event:a,listeners:T})}var _S=/\r\n?/g,xS=/\u0000|\uFFFD/g;function ym(o){return(typeof o=="string"?o:""+o).replace(_S,`
`).replace(xS,"")}function tl(o,a,u){if(a=ym(a),ym(o)!==a&&u)throw Error(t(425))}function nl(){}var ku=null,Mu=null;function Ru(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Iu=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,_m=typeof Promise=="function"?Promise:void 0,SS=typeof queueMicrotask=="function"?queueMicrotask:typeof _m<"u"?function(o){return _m.resolve(null).then(o).catch(wS)}:Iu;function wS(o){setTimeout(function(){throw o})}function Du(o,a){var u=a,p=0;do{var _=u.nextSibling;if(o.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(p===0){o.removeChild(_),co(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=_}while(u);co(a)}function Rr(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function xm(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return o;a--}else u==="/$"&&a++}o=o.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Xi,So="__reactProps$"+Xi,sr="__reactContainer$"+Xi,$u="__reactEvents$"+Xi,CS="__reactListeners$"+Xi,bS="__reactHandles$"+Xi;function oi(o){var a=o[Yn];if(a)return a;for(var u=o.parentNode;u;){if(a=u[sr]||u[Yn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(o=xm(o);o!==null;){if(u=o[Yn])return u;o=xm(o)}return a}o=u,u=o.parentNode}return null}function wo(o){return o=o[Yn]||o[sr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Qi(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function rl(o){return o[So]||null}var Lu=[],Ki=-1;function Ir(o){return{current:o}}function We(o){0>Ki||(o.current=Lu[Ki],Lu[Ki]=null,Ki--)}function Ne(o,a){Ki++,Lu[Ki]=o.current,o.current=a}var Dr={},Et=Ir(Dr),Ht=Ir(!1),ai=Dr;function Zi(o,a){var u=o.type.contextTypes;if(!u)return Dr;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var _={},w;for(w in u)_[w]=a[w];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=_),_}function zt(o){return o=o.childContextTypes,o!=null}function il(){We(Ht),We(Et)}function vm(o,a,u){if(Et.current!==Dr)throw Error(t(168));Ne(Et,a),Ne(Ht,u)}function Sm(o,a,u){var p=o.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var _ in p)if(!(_ in a))throw Error(t(108,Te(o)||"Unknown",_));return W({},u,p)}function sl(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Dr,ai=Et.current,Ne(Et,o),Ne(Ht,Ht.current),!0}function wm(o,a,u){var p=o.stateNode;if(!p)throw Error(t(169));u?(o=Sm(o,a,ai),p.__reactInternalMemoizedMergedChildContext=o,We(Ht),We(Et),Ne(Et,o)):We(Ht),Ne(Ht,u)}var or=null,ol=!1,Bu=!1;function Cm(o){or===null?or=[o]:or.push(o)}function TS(o){ol=!0,Cm(o)}function $r(){if(!Bu&&or!==null){Bu=!0;var o=0,a=$e;try{var u=or;for($e=1;o<u.length;o++){var p=u[o];do p=p(!0);while(p!==null)}or=null,ol=!1}catch(_){throw or!==null&&(or=or.slice(o+1)),Tp(iu,$r),_}finally{$e=a,Bu=!1}}return null}var Ji=[],es=0,al=null,ll=0,pn=[],mn=0,li=null,ar=1,lr="";function ci(o,a){Ji[es++]=ll,Ji[es++]=al,al=o,ll=a}function bm(o,a,u){pn[mn++]=ar,pn[mn++]=lr,pn[mn++]=li,li=o;var p=ar;o=lr;var _=32-Mn(p)-1;p&=~(1<<_),u+=1;var w=32-Mn(a)+_;if(30<w){var T=_-_%5;w=(p&(1<<T)-1).toString(32),p>>=T,_-=T,ar=1<<32-Mn(a)+_|u<<_|p,lr=w+o}else ar=1<<w|u<<_|p,lr=o}function Fu(o){o.return!==null&&(ci(o,1),bm(o,1,0))}function Ou(o){for(;o===al;)al=Ji[--es],Ji[es]=null,ll=Ji[--es],Ji[es]=null;for(;o===li;)li=pn[--mn],pn[mn]=null,lr=pn[--mn],pn[mn]=null,ar=pn[--mn],pn[mn]=null}var tn=null,nn=null,Ue=!1,In=null;function Tm(o,a){var u=xn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=o,a=o.deletions,a===null?(o.deletions=[u],o.flags|=16):a.push(u)}function Pm(o,a){switch(o.tag){case 5:var u=o.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,tn=o,nn=Rr(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,tn=o,nn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=li!==null?{id:ar,overflow:lr}:null,o.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=xn(18,null,null,0),u.stateNode=a,u.return=o,o.child=u,tn=o,nn=null,!0):!1;default:return!1}}function Nu(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Hu(o){if(Ue){var a=nn;if(a){var u=a;if(!Pm(o,a)){if(Nu(o))throw Error(t(418));a=Rr(u.nextSibling);var p=tn;a&&Pm(o,a)?Tm(p,u):(o.flags=o.flags&-4097|2,Ue=!1,tn=o)}}else{if(Nu(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ue=!1,tn=o}}}function Em(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;tn=o}function cl(o){if(o!==tn)return!1;if(!Ue)return Em(o),Ue=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!Ru(o.type,o.memoizedProps)),a&&(a=nn)){if(Nu(o))throw Am(),Error(t(418));for(;a;)Tm(o,a),a=Rr(a.nextSibling)}if(Em(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(a===0){nn=Rr(o.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}o=o.nextSibling}nn=null}}else nn=tn?Rr(o.stateNode.nextSibling):null;return!0}function Am(){for(var o=nn;o;)o=Rr(o.nextSibling)}function ts(){nn=tn=null,Ue=!1}function zu(o){In===null?In=[o]:In.push(o)}var PS=E.ReactCurrentBatchConfig;function Co(o,a,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,o));var _=p,w=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(T){var I=_.refs;T===null?delete I[w]:I[w]=T},a._stringRef=w,a)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function ul(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function km(o){var a=o._init;return a(o._payload)}function Mm(o){function a(H,F){if(o){var z=H.deletions;z===null?(H.deletions=[F],H.flags|=16):z.push(F)}}function u(H,F){if(!o)return null;for(;F!==null;)a(H,F),F=F.sibling;return null}function p(H,F){for(H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function _(H,F){return H=Wr(H,F),H.index=0,H.sibling=null,H}function w(H,F,z){return H.index=z,o?(z=H.alternate,z!==null?(z=z.index,z<F?(H.flags|=2,F):z):(H.flags|=2,F)):(H.flags|=1048576,F)}function T(H){return o&&H.alternate===null&&(H.flags|=2),H}function I(H,F,z,ee){return F===null||F.tag!==6?(F=Ih(z,H.mode,ee),F.return=H,F):(F=_(F,z),F.return=H,F)}function L(H,F,z,ee){var ue=z.type;return ue===k?Y(H,F,z.props.children,ee,z.key):F!==null&&(F.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===V&&km(ue)===F.type)?(ee=_(F,z.props),ee.ref=Co(H,F,z),ee.return=H,ee):(ee=$l(z.type,z.key,z.props,null,H.mode,ee),ee.ref=Co(H,F,z),ee.return=H,ee)}function j(H,F,z,ee){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=Dh(z,H.mode,ee),F.return=H,F):(F=_(F,z.children||[]),F.return=H,F)}function Y(H,F,z,ee,ue){return F===null||F.tag!==7?(F=yi(z,H.mode,ee,ue),F.return=H,F):(F=_(F,z),F.return=H,F)}function K(H,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Ih(""+F,H.mode,z),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return z=$l(F.type,F.key,F.props,null,H.mode,z),z.ref=Co(H,null,F),z.return=H,z;case M:return F=Dh(F,H.mode,z),F.return=H,F;case V:var ee=F._init;return K(H,ee(F._payload),z)}if(Ks(F)||U(F))return F=yi(F,H.mode,z,null),F.return=H,F;ul(H,F)}return null}function q(H,F,z,ee){var ue=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ue!==null?null:I(H,F,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===ue?L(H,F,z,ee):null;case M:return z.key===ue?j(H,F,z,ee):null;case V:return ue=z._init,q(H,F,ue(z._payload),ee)}if(Ks(z)||U(z))return ue!==null?null:Y(H,F,z,ee,null);ul(H,z)}return null}function se(H,F,z,ee,ue){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return H=H.get(z)||null,I(F,H,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return H=H.get(ee.key===null?z:ee.key)||null,L(F,H,ee,ue);case M:return H=H.get(ee.key===null?z:ee.key)||null,j(F,H,ee,ue);case V:var me=ee._init;return se(H,F,z,me(ee._payload),ue)}if(Ks(ee)||U(ee))return H=H.get(z)||null,Y(F,H,ee,ue,null);ul(F,ee)}return null}function ae(H,F,z,ee){for(var ue=null,me=null,ge=F,_e=F=0,_t=null;ge!==null&&_e<z.length;_e++){ge.index>_e?(_t=ge,ge=null):_t=ge.sibling;var Re=q(H,ge,z[_e],ee);if(Re===null){ge===null&&(ge=_t);break}o&&ge&&Re.alternate===null&&a(H,ge),F=w(Re,F,_e),me===null?ue=Re:me.sibling=Re,me=Re,ge=_t}if(_e===z.length)return u(H,ge),Ue&&ci(H,_e),ue;if(ge===null){for(;_e<z.length;_e++)ge=K(H,z[_e],ee),ge!==null&&(F=w(ge,F,_e),me===null?ue=ge:me.sibling=ge,me=ge);return Ue&&ci(H,_e),ue}for(ge=p(H,ge);_e<z.length;_e++)_t=se(ge,H,_e,z[_e],ee),_t!==null&&(o&&_t.alternate!==null&&ge.delete(_t.key===null?_e:_t.key),F=w(_t,F,_e),me===null?ue=_t:me.sibling=_t,me=_t);return o&&ge.forEach(function(jr){return a(H,jr)}),Ue&&ci(H,_e),ue}function le(H,F,z,ee){var ue=U(z);if(typeof ue!="function")throw Error(t(150));if(z=ue.call(z),z==null)throw Error(t(151));for(var me=ue=null,ge=F,_e=F=0,_t=null,Re=z.next();ge!==null&&!Re.done;_e++,Re=z.next()){ge.index>_e?(_t=ge,ge=null):_t=ge.sibling;var jr=q(H,ge,Re.value,ee);if(jr===null){ge===null&&(ge=_t);break}o&&ge&&jr.alternate===null&&a(H,ge),F=w(jr,F,_e),me===null?ue=jr:me.sibling=jr,me=jr,ge=_t}if(Re.done)return u(H,ge),Ue&&ci(H,_e),ue;if(ge===null){for(;!Re.done;_e++,Re=z.next())Re=K(H,Re.value,ee),Re!==null&&(F=w(Re,F,_e),me===null?ue=Re:me.sibling=Re,me=Re);return Ue&&ci(H,_e),ue}for(ge=p(H,ge);!Re.done;_e++,Re=z.next())Re=se(ge,H,_e,Re.value,ee),Re!==null&&(o&&Re.alternate!==null&&ge.delete(Re.key===null?_e:Re.key),F=w(Re,F,_e),me===null?ue=Re:me.sibling=Re,me=Re);return o&&ge.forEach(function(sw){return a(H,sw)}),Ue&&ci(H,_e),ue}function lt(H,F,z,ee){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:e:{for(var ue=z.key,me=F;me!==null;){if(me.key===ue){if(ue=z.type,ue===k){if(me.tag===7){u(H,me.sibling),F=_(me,z.props.children),F.return=H,H=F;break e}}else if(me.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===V&&km(ue)===me.type){u(H,me.sibling),F=_(me,z.props),F.ref=Co(H,me,z),F.return=H,H=F;break e}u(H,me);break}else a(H,me);me=me.sibling}z.type===k?(F=yi(z.props.children,H.mode,ee,z.key),F.return=H,H=F):(ee=$l(z.type,z.key,z.props,null,H.mode,ee),ee.ref=Co(H,F,z),ee.return=H,H=ee)}return T(H);case M:e:{for(me=z.key;F!==null;){if(F.key===me)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){u(H,F.sibling),F=_(F,z.children||[]),F.return=H,H=F;break e}else{u(H,F);break}else a(H,F);F=F.sibling}F=Dh(z,H.mode,ee),F.return=H,H=F}return T(H);case V:return me=z._init,lt(H,F,me(z._payload),ee)}if(Ks(z))return ae(H,F,z,ee);if(U(z))return le(H,F,z,ee);ul(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(u(H,F.sibling),F=_(F,z),F.return=H,H=F):(u(H,F),F=Ih(z,H.mode,ee),F.return=H,H=F),T(H)):u(H,F)}return lt}var ns=Mm(!0),Rm=Mm(!1),hl=Ir(null),dl=null,rs=null,Wu=null;function ju(){Wu=rs=dl=null}function Gu(o){var a=hl.current;We(hl),o._currentValue=a}function Uu(o,a,u){for(;o!==null;){var p=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),o===u)break;o=o.return}}function is(o,a){dl=o,Wu=rs=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(Wt=!0),o.firstContext=null)}function gn(o){var a=o._currentValue;if(Wu!==o)if(o={context:o,memoizedValue:a,next:null},rs===null){if(dl===null)throw Error(t(308));rs=o,dl.dependencies={lanes:0,firstContext:o}}else rs=rs.next=o;return a}var ui=null;function Vu(o){ui===null?ui=[o]:ui.push(o)}function Im(o,a,u,p){var _=a.interleaved;return _===null?(u.next=u,Vu(a)):(u.next=_.next,_.next=u),a.interleaved=u,cr(o,p)}function cr(o,a){o.lanes|=a;var u=o.alternate;for(u!==null&&(u.lanes|=a),u=o,o=o.return;o!==null;)o.childLanes|=a,u=o.alternate,u!==null&&(u.childLanes|=a),u=o,o=o.return;return u.tag===3?u.stateNode:null}var Lr=!1;function qu(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ur(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function Br(o,a,u){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(ke&2)!==0){var _=p.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),p.pending=a,cr(o,u)}return _=p.interleaved,_===null?(a.next=a,Vu(p)):(a.next=_.next,_.next=a),p.interleaved=a,cr(o,u)}function fl(o,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=o.pendingLanes,u|=p,a.lanes=u,au(o,u)}}function $m(o,a){var u=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var _=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?_=w=T:w=w.next=T,u=u.next}while(u!==null);w===null?_=w=a:w=w.next=a}else _=w=a;u={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:p.shared,effects:p.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=a:o.next=a,u.lastBaseUpdate=a}function pl(o,a,u,p){var _=o.updateQueue;Lr=!1;var w=_.firstBaseUpdate,T=_.lastBaseUpdate,I=_.shared.pending;if(I!==null){_.shared.pending=null;var L=I,j=L.next;L.next=null,T===null?w=j:T.next=j,T=L;var Y=o.alternate;Y!==null&&(Y=Y.updateQueue,I=Y.lastBaseUpdate,I!==T&&(I===null?Y.firstBaseUpdate=j:I.next=j,Y.lastBaseUpdate=L))}if(w!==null){var K=_.baseState;T=0,Y=j=L=null,I=w;do{var q=I.lane,se=I.eventTime;if((p&q)===q){Y!==null&&(Y=Y.next={eventTime:se,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ae=o,le=I;switch(q=a,se=u,le.tag){case 1:if(ae=le.payload,typeof ae=="function"){K=ae.call(se,K,q);break e}K=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=le.payload,q=typeof ae=="function"?ae.call(se,K,q):ae,q==null)break e;K=W({},K,q);break e;case 2:Lr=!0}}I.callback!==null&&I.lane!==0&&(o.flags|=64,q=_.effects,q===null?_.effects=[I]:q.push(I))}else se={eventTime:se,lane:q,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Y===null?(j=Y=se,L=K):Y=Y.next=se,T|=q;if(I=I.next,I===null){if(I=_.shared.pending,I===null)break;q=I,I=q.next,q.next=null,_.lastBaseUpdate=q,_.shared.pending=null}}while(!0);if(Y===null&&(L=K),_.baseState=L,_.firstBaseUpdate=j,_.lastBaseUpdate=Y,a=_.shared.interleaved,a!==null){_=a;do T|=_.lane,_=_.next;while(_!==a)}else w===null&&(_.shared.lanes=0);fi|=T,o.lanes=T,o.memoizedState=K}}function Lm(o,a,u){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var p=o[a],_=p.callback;if(_!==null){if(p.callback=null,p=u,typeof _!="function")throw Error(t(191,_));_.call(p)}}}var bo={},Xn=Ir(bo),To=Ir(bo),Po=Ir(bo);function hi(o){if(o===bo)throw Error(t(174));return o}function Yu(o,a){switch(Ne(Po,a),Ne(To,o),Ne(Xn,bo),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Xc(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=Xc(a,o)}We(Xn),Ne(Xn,a)}function ss(){We(Xn),We(To),We(Po)}function Bm(o){hi(Po.current);var a=hi(Xn.current),u=Xc(a,o.type);a!==u&&(Ne(To,o),Ne(Xn,u))}function Xu(o){To.current===o&&(We(Xn),We(To))}var Ye=Ir(0);function ml(o){for(var a=o;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Qu=[];function Ku(){for(var o=0;o<Qu.length;o++)Qu[o]._workInProgressVersionPrimary=null;Qu.length=0}var gl=E.ReactCurrentDispatcher,Zu=E.ReactCurrentBatchConfig,di=0,Xe=null,pt=null,gt=null,yl=!1,Eo=!1,Ao=0,ES=0;function At(){throw Error(t(321))}function Ju(o,a){if(a===null)return!1;for(var u=0;u<a.length&&u<o.length;u++)if(!Rn(o[u],a[u]))return!1;return!0}function eh(o,a,u,p,_,w){if(di=w,Xe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,gl.current=o===null||o.memoizedState===null?RS:IS,o=u(p,_),Eo){w=0;do{if(Eo=!1,Ao=0,25<=w)throw Error(t(301));w+=1,gt=pt=null,a.updateQueue=null,gl.current=DS,o=u(p,_)}while(Eo)}if(gl.current=vl,a=pt!==null&&pt.next!==null,di=0,gt=pt=Xe=null,yl=!1,a)throw Error(t(300));return o}function th(){var o=Ao!==0;return Ao=0,o}function Qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=o:gt=gt.next=o,gt}function yn(){if(pt===null){var o=Xe.alternate;o=o!==null?o.memoizedState:null}else o=pt.next;var a=gt===null?Xe.memoizedState:gt.next;if(a!==null)gt=a,pt=o;else{if(o===null)throw Error(t(310));pt=o,o={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},gt===null?Xe.memoizedState=gt=o:gt=gt.next=o}return gt}function ko(o,a){return typeof a=="function"?a(o):a}function nh(o){var a=yn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var p=pt,_=p.baseQueue,w=u.pending;if(w!==null){if(_!==null){var T=_.next;_.next=w.next,w.next=T}p.baseQueue=_=w,u.pending=null}if(_!==null){w=_.next,p=p.baseState;var I=T=null,L=null,j=w;do{var Y=j.lane;if((di&Y)===Y)L!==null&&(L=L.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),p=j.hasEagerState?j.eagerState:o(p,j.action);else{var K={lane:Y,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};L===null?(I=L=K,T=p):L=L.next=K,Xe.lanes|=Y,fi|=Y}j=j.next}while(j!==null&&j!==w);L===null?T=p:L.next=I,Rn(p,a.memoizedState)||(Wt=!0),a.memoizedState=p,a.baseState=T,a.baseQueue=L,u.lastRenderedState=p}if(o=u.interleaved,o!==null){_=o;do w=_.lane,Xe.lanes|=w,fi|=w,_=_.next;while(_!==o)}else _===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function rh(o){var a=yn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var p=u.dispatch,_=u.pending,w=a.memoizedState;if(_!==null){u.pending=null;var T=_=_.next;do w=o(w,T.action),T=T.next;while(T!==_);Rn(w,a.memoizedState)||(Wt=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,p]}function Fm(){}function Om(o,a){var u=Xe,p=yn(),_=a(),w=!Rn(p.memoizedState,_);if(w&&(p.memoizedState=_,Wt=!0),p=p.queue,ih(zm.bind(null,u,p,o),[o]),p.getSnapshot!==a||w||gt!==null&&gt.memoizedState.tag&1){if(u.flags|=2048,Mo(9,Hm.bind(null,u,p,_,a),void 0,null),yt===null)throw Error(t(349));(di&30)!==0||Nm(u,a,_)}return _}function Nm(o,a,u){o.flags|=16384,o={getSnapshot:a,value:u},a=Xe.updateQueue,a===null?(a={lastEffect:null,stores:null},Xe.updateQueue=a,a.stores=[o]):(u=a.stores,u===null?a.stores=[o]:u.push(o))}function Hm(o,a,u,p){a.value=u,a.getSnapshot=p,Wm(a)&&jm(o)}function zm(o,a,u){return u(function(){Wm(a)&&jm(o)})}function Wm(o){var a=o.getSnapshot;o=o.value;try{var u=a();return!Rn(o,u)}catch{return!0}}function jm(o){var a=cr(o,1);a!==null&&Bn(a,o,1,-1)}function Gm(o){var a=Qn();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:o},a.queue=o,o=o.dispatch=MS.bind(null,Xe,o),[a.memoizedState,o]}function Mo(o,a,u,p){return o={tag:o,create:a,destroy:u,deps:p,next:null},a=Xe.updateQueue,a===null?(a={lastEffect:null,stores:null},Xe.updateQueue=a,a.lastEffect=o.next=o):(u=a.lastEffect,u===null?a.lastEffect=o.next=o:(p=u.next,u.next=o,o.next=p,a.lastEffect=o)),o}function Um(){return yn().memoizedState}function _l(o,a,u,p){var _=Qn();Xe.flags|=o,_.memoizedState=Mo(1|a,u,void 0,p===void 0?null:p)}function xl(o,a,u,p){var _=yn();p=p===void 0?null:p;var w=void 0;if(pt!==null){var T=pt.memoizedState;if(w=T.destroy,p!==null&&Ju(p,T.deps)){_.memoizedState=Mo(a,u,w,p);return}}Xe.flags|=o,_.memoizedState=Mo(1|a,u,w,p)}function Vm(o,a){return _l(8390656,8,o,a)}function ih(o,a){return xl(2048,8,o,a)}function qm(o,a){return xl(4,2,o,a)}function Ym(o,a){return xl(4,4,o,a)}function Xm(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function Qm(o,a,u){return u=u!=null?u.concat([o]):null,xl(4,4,Xm.bind(null,a,o),u)}function sh(){}function Km(o,a){var u=yn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Ju(a,p[1])?p[0]:(u.memoizedState=[o,a],o)}function Zm(o,a){var u=yn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Ju(a,p[1])?p[0]:(o=o(),u.memoizedState=[o,a],o)}function Jm(o,a,u){return(di&21)===0?(o.baseState&&(o.baseState=!1,Wt=!0),o.memoizedState=u):(Rn(u,a)||(u=kp(),Xe.lanes|=u,fi|=u,o.baseState=!0),a)}function AS(o,a){var u=$e;$e=u!==0&&4>u?u:4,o(!0);var p=Zu.transition;Zu.transition={};try{o(!1),a()}finally{$e=u,Zu.transition=p}}function eg(){return yn().memoizedState}function kS(o,a,u){var p=Hr(o);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},tg(o))ng(a,u);else if(u=Im(o,a,u,p),u!==null){var _=Bt();Bn(u,o,p,_),rg(u,a,p)}}function MS(o,a,u){var p=Hr(o),_={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(tg(o))ng(a,_);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var T=a.lastRenderedState,I=w(T,u);if(_.hasEagerState=!0,_.eagerState=I,Rn(I,T)){var L=a.interleaved;L===null?(_.next=_,Vu(a)):(_.next=L.next,L.next=_),a.interleaved=_;return}}catch{}finally{}u=Im(o,a,_,p),u!==null&&(_=Bt(),Bn(u,o,p,_),rg(u,a,p))}}function tg(o){var a=o.alternate;return o===Xe||a!==null&&a===Xe}function ng(o,a){Eo=yl=!0;var u=o.pending;u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a}function rg(o,a,u){if((u&4194240)!==0){var p=a.lanes;p&=o.pendingLanes,u|=p,a.lanes=u,au(o,u)}}var vl={readContext:gn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},RS={readContext:gn,useCallback:function(o,a){return Qn().memoizedState=[o,a===void 0?null:a],o},useContext:gn,useEffect:Vm,useImperativeHandle:function(o,a,u){return u=u!=null?u.concat([o]):null,_l(4194308,4,Xm.bind(null,a,o),u)},useLayoutEffect:function(o,a){return _l(4194308,4,o,a)},useInsertionEffect:function(o,a){return _l(4,2,o,a)},useMemo:function(o,a){var u=Qn();return a=a===void 0?null:a,o=o(),u.memoizedState=[o,a],o},useReducer:function(o,a,u){var p=Qn();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},p.queue=o,o=o.dispatch=kS.bind(null,Xe,o),[p.memoizedState,o]},useRef:function(o){var a=Qn();return o={current:o},a.memoizedState=o},useState:Gm,useDebugValue:sh,useDeferredValue:function(o){return Qn().memoizedState=o},useTransition:function(){var o=Gm(!1),a=o[0];return o=AS.bind(null,o[1]),Qn().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,u){var p=Xe,_=Qn();if(Ue){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),yt===null)throw Error(t(349));(di&30)!==0||Nm(p,a,u)}_.memoizedState=u;var w={value:u,getSnapshot:a};return _.queue=w,Vm(zm.bind(null,p,w,o),[o]),p.flags|=2048,Mo(9,Hm.bind(null,p,w,u,a),void 0,null),u},useId:function(){var o=Qn(),a=yt.identifierPrefix;if(Ue){var u=lr,p=ar;u=(p&~(1<<32-Mn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Ao++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=ES++,a=":"+a+"r"+u.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},IS={readContext:gn,useCallback:Km,useContext:gn,useEffect:ih,useImperativeHandle:Qm,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Zm,useReducer:nh,useRef:Um,useState:function(){return nh(ko)},useDebugValue:sh,useDeferredValue:function(o){var a=yn();return Jm(a,pt.memoizedState,o)},useTransition:function(){var o=nh(ko)[0],a=yn().memoizedState;return[o,a]},useMutableSource:Fm,useSyncExternalStore:Om,useId:eg,unstable_isNewReconciler:!1},DS={readContext:gn,useCallback:Km,useContext:gn,useEffect:ih,useImperativeHandle:Qm,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Zm,useReducer:rh,useRef:Um,useState:function(){return rh(ko)},useDebugValue:sh,useDeferredValue:function(o){var a=yn();return pt===null?a.memoizedState=o:Jm(a,pt.memoizedState,o)},useTransition:function(){var o=rh(ko)[0],a=yn().memoizedState;return[o,a]},useMutableSource:Fm,useSyncExternalStore:Om,useId:eg,unstable_isNewReconciler:!1};function Dn(o,a){if(o&&o.defaultProps){a=W({},a),o=o.defaultProps;for(var u in o)a[u]===void 0&&(a[u]=o[u]);return a}return a}function oh(o,a,u,p){a=o.memoizedState,u=u(p,a),u=u==null?a:W({},a,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var Sl={isMounted:function(o){return(o=o._reactInternals)?si(o)===o:!1},enqueueSetState:function(o,a,u){o=o._reactInternals;var p=Bt(),_=Hr(o),w=ur(p,_);w.payload=a,u!=null&&(w.callback=u),a=Br(o,w,_),a!==null&&(Bn(a,o,_,p),fl(a,o,_))},enqueueReplaceState:function(o,a,u){o=o._reactInternals;var p=Bt(),_=Hr(o),w=ur(p,_);w.tag=1,w.payload=a,u!=null&&(w.callback=u),a=Br(o,w,_),a!==null&&(Bn(a,o,_,p),fl(a,o,_))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var u=Bt(),p=Hr(o),_=ur(u,p);_.tag=2,a!=null&&(_.callback=a),a=Br(o,_,p),a!==null&&(Bn(a,o,p,u),fl(a,o,p))}};function ig(o,a,u,p,_,w,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,T):a.prototype&&a.prototype.isPureReactComponent?!go(u,p)||!go(_,w):!0}function sg(o,a,u){var p=!1,_=Dr,w=a.contextType;return typeof w=="object"&&w!==null?w=gn(w):(_=zt(a)?ai:Et.current,p=a.contextTypes,w=(p=p!=null)?Zi(o,_):Dr),a=new a(u,w),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Sl,o.stateNode=a,a._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_,o.__reactInternalMemoizedMaskedChildContext=w),a}function og(o,a,u,p){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==o&&Sl.enqueueReplaceState(a,a.state,null)}function ah(o,a,u,p){var _=o.stateNode;_.props=u,_.state=o.memoizedState,_.refs={},qu(o);var w=a.contextType;typeof w=="object"&&w!==null?_.context=gn(w):(w=zt(a)?ai:Et.current,_.context=Zi(o,w)),_.state=o.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(oh(o,a,w,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(a=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),a!==_.state&&Sl.enqueueReplaceState(_,_.state,null),pl(o,u,_,p),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308)}function os(o,a){try{var u="",p=a;do u+=re(p),p=p.return;while(p);var _=u}catch(w){_=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:a,stack:_,digest:null}}function lh(o,a,u){return{value:o,source:null,stack:u??null,digest:a??null}}function ch(o,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var $S=typeof WeakMap=="function"?WeakMap:Map;function ag(o,a,u){u=ur(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Al||(Al=!0,bh=p),ch(o,a)},u}function lg(o,a,u){u=ur(-1,u),u.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var _=a.value;u.payload=function(){return p(_)},u.callback=function(){ch(o,a)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){ch(o,a),typeof p!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function cg(o,a,u){var p=o.pingCache;if(p===null){p=o.pingCache=new $S;var _=new Set;p.set(a,_)}else _=p.get(a),_===void 0&&(_=new Set,p.set(a,_));_.has(u)||(_.add(u),o=YS.bind(null,o,a,u),a.then(o,o))}function ug(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function hg(o,a,u,p,_){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ur(-1,1),a.tag=2,Br(u,a,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=_,o)}var LS=E.ReactCurrentOwner,Wt=!1;function Lt(o,a,u,p){a.child=o===null?Rm(a,null,u,p):ns(a,o.child,u,p)}function dg(o,a,u,p,_){u=u.render;var w=a.ref;return is(a,_),p=eh(o,a,u,p,w,_),u=th(),o!==null&&!Wt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~_,hr(o,a,_)):(Ue&&u&&Fu(a),a.flags|=1,Lt(o,a,p,_),a.child)}function fg(o,a,u,p,_){if(o===null){var w=u.type;return typeof w=="function"&&!Rh(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=w,pg(o,a,w,p,_)):(o=$l(u.type,null,p,a,a.mode,_),o.ref=a.ref,o.return=a,a.child=o)}if(w=o.child,(o.lanes&_)===0){var T=w.memoizedProps;if(u=u.compare,u=u!==null?u:go,u(T,p)&&o.ref===a.ref)return hr(o,a,_)}return a.flags|=1,o=Wr(w,p),o.ref=a.ref,o.return=a,a.child=o}function pg(o,a,u,p,_){if(o!==null){var w=o.memoizedProps;if(go(w,p)&&o.ref===a.ref)if(Wt=!1,a.pendingProps=p=w,(o.lanes&_)!==0)(o.flags&131072)!==0&&(Wt=!0);else return a.lanes=o.lanes,hr(o,a,_)}return uh(o,a,u,p,_)}function mg(o,a,u){var p=a.pendingProps,_=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ls,rn),rn|=u;else{if((u&1073741824)===0)return o=w!==null?w.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,Ne(ls,rn),rn|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:u,Ne(ls,rn),rn|=p}else w!==null?(p=w.baseLanes|u,a.memoizedState=null):p=u,Ne(ls,rn),rn|=p;return Lt(o,a,_,u),a.child}function gg(o,a){var u=a.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function uh(o,a,u,p,_){var w=zt(u)?ai:Et.current;return w=Zi(a,w),is(a,_),u=eh(o,a,u,p,w,_),p=th(),o!==null&&!Wt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~_,hr(o,a,_)):(Ue&&p&&Fu(a),a.flags|=1,Lt(o,a,u,_),a.child)}function yg(o,a,u,p,_){if(zt(u)){var w=!0;sl(a)}else w=!1;if(is(a,_),a.stateNode===null)Cl(o,a),sg(a,u,p),ah(a,u,p,_),p=!0;else if(o===null){var T=a.stateNode,I=a.memoizedProps;T.props=I;var L=T.context,j=u.contextType;typeof j=="object"&&j!==null?j=gn(j):(j=zt(u)?ai:Et.current,j=Zi(a,j));var Y=u.getDerivedStateFromProps,K=typeof Y=="function"||typeof T.getSnapshotBeforeUpdate=="function";K||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==p||L!==j)&&og(a,T,p,j),Lr=!1;var q=a.memoizedState;T.state=q,pl(a,p,T,_),L=a.memoizedState,I!==p||q!==L||Ht.current||Lr?(typeof Y=="function"&&(oh(a,u,Y,p),L=a.memoizedState),(I=Lr||ig(a,u,I,p,q,L,j))?(K||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=L),T.props=p,T.state=L,T.context=j,p=I):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{T=a.stateNode,Dm(o,a),I=a.memoizedProps,j=a.type===a.elementType?I:Dn(a.type,I),T.props=j,K=a.pendingProps,q=T.context,L=u.contextType,typeof L=="object"&&L!==null?L=gn(L):(L=zt(u)?ai:Et.current,L=Zi(a,L));var se=u.getDerivedStateFromProps;(Y=typeof se=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I!==K||q!==L)&&og(a,T,p,L),Lr=!1,q=a.memoizedState,T.state=q,pl(a,p,T,_);var ae=a.memoizedState;I!==K||q!==ae||Ht.current||Lr?(typeof se=="function"&&(oh(a,u,se,p),ae=a.memoizedState),(j=Lr||ig(a,u,j,p,q,ae,L)||!1)?(Y||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,ae,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,ae,L)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||I===o.memoizedProps&&q===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&q===o.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ae),T.props=p,T.state=ae,T.context=L,p=j):(typeof T.componentDidUpdate!="function"||I===o.memoizedProps&&q===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||I===o.memoizedProps&&q===o.memoizedState||(a.flags|=1024),p=!1)}return hh(o,a,u,p,w,_)}function hh(o,a,u,p,_,w){gg(o,a);var T=(a.flags&128)!==0;if(!p&&!T)return _&&wm(a,u,!1),hr(o,a,w);p=a.stateNode,LS.current=a;var I=T&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,o!==null&&T?(a.child=ns(a,o.child,null,w),a.child=ns(a,null,I,w)):Lt(o,a,I,w),a.memoizedState=p.state,_&&wm(a,u,!0),a.child}function _g(o){var a=o.stateNode;a.pendingContext?vm(o,a.pendingContext,a.pendingContext!==a.context):a.context&&vm(o,a.context,!1),Yu(o,a.containerInfo)}function xg(o,a,u,p,_){return ts(),zu(_),a.flags|=256,Lt(o,a,u,p),a.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function fh(o){return{baseLanes:o,cachePool:null,transitions:null}}function vg(o,a,u){var p=a.pendingProps,_=Ye.current,w=!1,T=(a.flags&128)!==0,I;if((I=T)||(I=o!==null&&o.memoizedState===null?!1:(_&2)!==0),I?(w=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(_|=1),Ne(Ye,_&1),o===null)return Hu(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=p.children,o=p.fallback,w?(p=a.mode,w=a.child,T={mode:"hidden",children:T},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=T):w=Ll(T,p,0,null),o=yi(o,p,u,null),w.return=a,o.return=a,w.sibling=o,a.child=w,a.child.memoizedState=fh(u),a.memoizedState=dh,o):ph(a,T));if(_=o.memoizedState,_!==null&&(I=_.dehydrated,I!==null))return BS(o,a,T,p,I,_,u);if(w){w=p.fallback,T=a.mode,_=o.child,I=_.sibling;var L={mode:"hidden",children:p.children};return(T&1)===0&&a.child!==_?(p=a.child,p.childLanes=0,p.pendingProps=L,a.deletions=null):(p=Wr(_,L),p.subtreeFlags=_.subtreeFlags&14680064),I!==null?w=Wr(I,w):(w=yi(w,T,u,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,T=o.child.memoizedState,T=T===null?fh(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},w.memoizedState=T,w.childLanes=o.childLanes&~u,a.memoizedState=dh,p}return w=o.child,o=w.sibling,p=Wr(w,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,o!==null&&(u=a.deletions,u===null?(a.deletions=[o],a.flags|=16):u.push(o)),a.child=p,a.memoizedState=null,p}function ph(o,a){return a=Ll({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function wl(o,a,u,p){return p!==null&&zu(p),ns(a,o.child,null,u),o=ph(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function BS(o,a,u,p,_,w,T){if(u)return a.flags&256?(a.flags&=-257,p=lh(Error(t(422))),wl(o,a,T,p)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(w=p.fallback,_=a.mode,p=Ll({mode:"visible",children:p.children},_,0,null),w=yi(w,_,T,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,(a.mode&1)!==0&&ns(a,o.child,null,T),a.child.memoizedState=fh(T),a.memoizedState=dh,w);if((a.mode&1)===0)return wl(o,a,T,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var I=p.dgst;return p=I,w=Error(t(419)),p=lh(w,p,void 0),wl(o,a,T,p)}if(I=(T&o.childLanes)!==0,Wt||I){if(p=yt,p!==null){switch(T&-T){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(p.suspendedLanes|T))!==0?0:_,_!==0&&_!==w.retryLane&&(w.retryLane=_,cr(o,_),Bn(p,o,_,-1))}return Mh(),p=lh(Error(t(421))),wl(o,a,T,p)}return _.data==="$?"?(a.flags|=128,a.child=o.child,a=XS.bind(null,o),_._reactRetry=a,null):(o=w.treeContext,nn=Rr(_.nextSibling),tn=a,Ue=!0,In=null,o!==null&&(pn[mn++]=ar,pn[mn++]=lr,pn[mn++]=li,ar=o.id,lr=o.overflow,li=a),a=ph(a,p.children),a.flags|=4096,a)}function Sg(o,a,u){o.lanes|=a;var p=o.alternate;p!==null&&(p.lanes|=a),Uu(o.return,a,u)}function mh(o,a,u,p,_){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:_}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=u,w.tailMode=_)}function wg(o,a,u){var p=a.pendingProps,_=p.revealOrder,w=p.tail;if(Lt(o,a,p.children,u),p=Ye.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Sg(o,u,a);else if(o.tag===19)Sg(o,u,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(Ne(Ye,p),(a.mode&1)===0)a.memoizedState=null;else switch(_){case"forwards":for(u=a.child,_=null;u!==null;)o=u.alternate,o!==null&&ml(o)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),mh(a,!1,_,u,w);break;case"backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(o=_.alternate,o!==null&&ml(o)===null){a.child=_;break}o=_.sibling,_.sibling=u,u=_,_=o}mh(a,!0,u,null,w);break;case"together":mh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Cl(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function hr(o,a,u){if(o!==null&&(a.dependencies=o.dependencies),fi|=a.lanes,(u&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,u=Wr(o,o.pendingProps),a.child=u,u.return=a;o.sibling!==null;)o=o.sibling,u=u.sibling=Wr(o,o.pendingProps),u.return=a;u.sibling=null}return a.child}function FS(o,a,u){switch(a.tag){case 3:_g(a),ts();break;case 5:Bm(a);break;case 1:zt(a.type)&&sl(a);break;case 4:Yu(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,_=a.memoizedProps.value;Ne(hl,p._currentValue),p._currentValue=_;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Ne(Ye,Ye.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?vg(o,a,u):(Ne(Ye,Ye.current&1),o=hr(o,a,u),o!==null?o.sibling:null);Ne(Ye,Ye.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(o.flags&128)!==0){if(p)return wg(o,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ne(Ye,Ye.current),p)break;return null;case 22:case 23:return a.lanes=0,mg(o,a,u)}return hr(o,a,u)}var Cg,gh,bg,Tg;Cg=function(o,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},gh=function(){},bg=function(o,a,u,p){var _=o.memoizedProps;if(_!==p){o=a.stateNode,hi(Xn.current);var w=null;switch(u){case"input":_=kn(o,_),p=kn(o,p),w=[];break;case"select":_=W({},_,{value:void 0}),p=W({},p,{value:void 0}),w=[];break;case"textarea":_=Yc(o,_),p=Yc(o,p),w=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=nl)}Qc(u,p);var T;u=null;for(j in _)if(!p.hasOwnProperty(j)&&_.hasOwnProperty(j)&&_[j]!=null)if(j==="style"){var I=_[j];for(T in I)I.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?w||(w=[]):(w=w||[]).push(j,null));for(j in p){var L=p[j];if(I=_?.[j],p.hasOwnProperty(j)&&L!==I&&(L!=null||I!=null))if(j==="style")if(I){for(T in I)!I.hasOwnProperty(T)||L&&L.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in L)L.hasOwnProperty(T)&&I[T]!==L[T]&&(u||(u={}),u[T]=L[T])}else u||(w||(w=[]),w.push(j,u)),u=L;else j==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,I=I?I.__html:void 0,L!=null&&I!==L&&(w=w||[]).push(j,L)):j==="children"?typeof L!="string"&&typeof L!="number"||(w=w||[]).push(j,""+L):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(r.hasOwnProperty(j)?(L!=null&&j==="onScroll"&&ze("scroll",o),w||I===L||(w=[])):(w=w||[]).push(j,L))}u&&(w=w||[]).push("style",u);var j=w;(a.updateQueue=j)&&(a.flags|=4)}},Tg=function(o,a,u,p){u!==p&&(a.flags|=4)};function Ro(o,a){if(!Ue)switch(o.tailMode){case"hidden":a=o.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function kt(o){var a=o.alternate!==null&&o.alternate.child===o.child,u=0,p=0;if(a)for(var _=o.child;_!==null;)u|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)u|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=u,a}function OS(o,a,u){var p=a.pendingProps;switch(Ou(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return zt(a.type)&&il(),kt(a),null;case 3:return p=a.stateNode,ss(),We(Ht),We(Et),Ku(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(cl(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,In!==null&&(Eh(In),In=null))),gh(o,a),kt(a),null;case 5:Xu(a);var _=hi(Po.current);if(u=a.type,o!==null&&a.stateNode!=null)bg(o,a,u,p,_),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return kt(a),null}if(o=hi(Xn.current),cl(a)){p=a.stateNode,u=a.type;var w=a.memoizedProps;switch(p[Yn]=a,p[So]=w,o=(a.mode&1)!==0,u){case"dialog":ze("cancel",p),ze("close",p);break;case"iframe":case"object":case"embed":ze("load",p);break;case"video":case"audio":for(_=0;_<_o.length;_++)ze(_o[_],p);break;case"source":ze("error",p);break;case"img":case"image":case"link":ze("error",p),ze("load",p);break;case"details":ze("toggle",p);break;case"input":Vn(p,w),ze("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},ze("invalid",p);break;case"textarea":lp(p,w),ze("invalid",p)}Qc(u,w),_=null;for(var T in w)if(w.hasOwnProperty(T)){var I=w[T];T==="children"?typeof I=="string"?p.textContent!==I&&(w.suppressHydrationWarning!==!0&&tl(p.textContent,I,o),_=["children",I]):typeof I=="number"&&p.textContent!==""+I&&(w.suppressHydrationWarning!==!0&&tl(p.textContent,I,o),_=["children",""+I]):r.hasOwnProperty(T)&&I!=null&&T==="onScroll"&&ze("scroll",p)}switch(u){case"input":br(p),Ia(p,w,!0);break;case"textarea":br(p),up(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=nl)}p=_,a.updateQueue=p,p!==null&&(a.flags|=4)}else{T=_.nodeType===9?_:_.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=hp(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=T.createElement(u,{is:p.is}):(o=T.createElement(u),u==="select"&&(T=o,p.multiple?T.multiple=!0:p.size&&(T.size=p.size))):o=T.createElementNS(o,u),o[Yn]=a,o[So]=p,Cg(o,a,!1,!1),a.stateNode=o;e:{switch(T=Kc(u,p),u){case"dialog":ze("cancel",o),ze("close",o),_=p;break;case"iframe":case"object":case"embed":ze("load",o),_=p;break;case"video":case"audio":for(_=0;_<_o.length;_++)ze(_o[_],o);_=p;break;case"source":ze("error",o),_=p;break;case"img":case"image":case"link":ze("error",o),ze("load",o),_=p;break;case"details":ze("toggle",o),_=p;break;case"input":Vn(o,p),_=kn(o,p),ze("invalid",o);break;case"option":_=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},_=W({},p,{value:void 0}),ze("invalid",o);break;case"textarea":lp(o,p),_=Yc(o,p),ze("invalid",o);break;default:_=p}Qc(u,_),I=_;for(w in I)if(I.hasOwnProperty(w)){var L=I[w];w==="style"?pp(o,L):w==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&dp(o,L)):w==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Zs(o,L):typeof L=="number"&&Zs(o,""+L):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(r.hasOwnProperty(w)?L!=null&&w==="onScroll"&&ze("scroll",o):L!=null&&P(o,w,L,T))}switch(u){case"input":br(o),Ia(o,p,!1);break;case"textarea":br(o),up(o);break;case"option":p.value!=null&&o.setAttribute("value",""+Ee(p.value));break;case"select":o.multiple=!!p.multiple,w=p.value,w!=null?Hi(o,!!p.multiple,w,!1):p.defaultValue!=null&&Hi(o,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(o.onclick=nl)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return kt(a),null;case 6:if(o&&a.stateNode!=null)Tg(o,a,o.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=hi(Po.current),hi(Xn.current),cl(a)){if(p=a.stateNode,u=a.memoizedProps,p[Yn]=a,(w=p.nodeValue!==u)&&(o=tn,o!==null))switch(o.tag){case 3:tl(p.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&tl(p.nodeValue,u,(o.mode&1)!==0)}w&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Yn]=a,a.stateNode=p}return kt(a),null;case 13:if(We(Ye),p=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ue&&nn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Am(),ts(),a.flags|=98560,w=!1;else if(w=cl(a),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Yn]=a}else ts(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),w=!1}else In!==null&&(Eh(In),In=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(Ye.current&1)!==0?mt===0&&(mt=3):Mh())),a.updateQueue!==null&&(a.flags|=4),kt(a),null);case 4:return ss(),gh(o,a),o===null&&xo(a.stateNode.containerInfo),kt(a),null;case 10:return Gu(a.type._context),kt(a),null;case 17:return zt(a.type)&&il(),kt(a),null;case 19:if(We(Ye),w=a.memoizedState,w===null)return kt(a),null;if(p=(a.flags&128)!==0,T=w.rendering,T===null)if(p)Ro(w,!1);else{if(mt!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(T=ml(o),T!==null){for(a.flags|=128,Ro(w,!1),p=T.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)w=u,o=p,w.flags&=14680066,T=w.alternate,T===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=T.childLanes,w.lanes=T.lanes,w.child=T.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=T.memoizedProps,w.memoizedState=T.memoizedState,w.updateQueue=T.updateQueue,w.type=T.type,o=T.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return Ne(Ye,Ye.current&1|2),a.child}o=o.sibling}w.tail!==null&&at()>cs&&(a.flags|=128,p=!0,Ro(w,!1),a.lanes=4194304)}else{if(!p)if(o=ml(T),o!==null){if(a.flags|=128,p=!0,u=o.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Ro(w,!0),w.tail===null&&w.tailMode==="hidden"&&!T.alternate&&!Ue)return kt(a),null}else 2*at()-w.renderingStartTime>cs&&u!==1073741824&&(a.flags|=128,p=!0,Ro(w,!1),a.lanes=4194304);w.isBackwards?(T.sibling=a.child,a.child=T):(u=w.last,u!==null?u.sibling=T:a.child=T,w.last=T)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=at(),a.sibling=null,u=Ye.current,Ne(Ye,p?u&1|2:u&1),a):(kt(a),null);case 22:case 23:return kh(),p=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(rn&1073741824)!==0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function NS(o,a){switch(Ou(a),a.tag){case 1:return zt(a.type)&&il(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return ss(),We(Ht),We(Et),Ku(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return Xu(a),null;case 13:if(We(Ye),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ts()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return We(Ye),null;case 4:return ss(),null;case 10:return Gu(a.type._context),null;case 22:case 23:return kh(),null;case 24:return null;default:return null}}var bl=!1,Mt=!1,HS=typeof WeakSet=="function"?WeakSet:Set,oe=null;function as(o,a){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){tt(o,a,p)}else u.current=null}function yh(o,a,u){try{u()}catch(p){tt(o,a,p)}}var Pg=!1;function zS(o,a){if(ku=Ga,o=im(),Su(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var _=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var T=0,I=-1,L=-1,j=0,Y=0,K=o,q=null;t:for(;;){for(var se;K!==u||_!==0&&K.nodeType!==3||(I=T+_),K!==w||p!==0&&K.nodeType!==3||(L=T+p),K.nodeType===3&&(T+=K.nodeValue.length),(se=K.firstChild)!==null;)q=K,K=se;for(;;){if(K===o)break t;if(q===u&&++j===_&&(I=T),q===w&&++Y===p&&(L=T),(se=K.nextSibling)!==null)break;K=q,q=K.parentNode}K=se}u=I===-1||L===-1?null:{start:I,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mu={focusedElem:o,selectionRange:u},Ga=!1,oe=a;oe!==null;)if(a=oe,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,oe=o;else for(;oe!==null;){a=oe;try{var ae=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var le=ae.memoizedProps,lt=ae.memoizedState,H=a.stateNode,F=H.getSnapshotBeforeUpdate(a.elementType===a.type?le:Dn(a.type,le),lt);H.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){tt(a,a.return,ee)}if(o=a.sibling,o!==null){o.return=a.return,oe=o;break}oe=a.return}return ae=Pg,Pg=!1,ae}function Io(o,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&o)===o){var w=_.destroy;_.destroy=void 0,w!==void 0&&yh(a,u,w)}_=_.next}while(_!==p)}}function Tl(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&o)===o){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function _h(o){var a=o.ref;if(a!==null){var u=o.stateNode;switch(o.tag){case 5:o=u;break;default:o=u}typeof a=="function"?a(o):a.current=o}}function Eg(o){var a=o.alternate;a!==null&&(o.alternate=null,Eg(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Yn],delete a[So],delete a[$u],delete a[CS],delete a[bS])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ag(o){return o.tag===5||o.tag===3||o.tag===4}function kg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ag(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function xh(o,a,u){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(o,a):u.insertBefore(o,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(o,u)):(a=u,a.appendChild(o)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=nl));else if(p!==4&&(o=o.child,o!==null))for(xh(o,a,u),o=o.sibling;o!==null;)xh(o,a,u),o=o.sibling}function vh(o,a,u){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?u.insertBefore(o,a):u.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(vh(o,a,u),o=o.sibling;o!==null;)vh(o,a,u),o=o.sibling}var St=null,$n=!1;function Fr(o,a,u){for(u=u.child;u!==null;)Mg(o,a,u),u=u.sibling}function Mg(o,a,u){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Oa,u)}catch{}switch(u.tag){case 5:Mt||as(u,a);case 6:var p=St,_=$n;St=null,Fr(o,a,u),St=p,$n=_,St!==null&&($n?(o=St,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):St.removeChild(u.stateNode));break;case 18:St!==null&&($n?(o=St,u=u.stateNode,o.nodeType===8?Du(o.parentNode,u):o.nodeType===1&&Du(o,u),co(o)):Du(St,u.stateNode));break;case 4:p=St,_=$n,St=u.stateNode.containerInfo,$n=!0,Fr(o,a,u),St=p,$n=_;break;case 0:case 11:case 14:case 15:if(!Mt&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var w=_,T=w.destroy;w=w.tag,T!==void 0&&((w&2)!==0||(w&4)!==0)&&yh(u,a,T),_=_.next}while(_!==p)}Fr(o,a,u);break;case 1:if(!Mt&&(as(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(I){tt(u,a,I)}Fr(o,a,u);break;case 21:Fr(o,a,u);break;case 22:u.mode&1?(Mt=(p=Mt)||u.memoizedState!==null,Fr(o,a,u),Mt=p):Fr(o,a,u);break;default:Fr(o,a,u)}}function Rg(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new HS),a.forEach(function(p){var _=QS.bind(null,o,p);u.has(p)||(u.add(p),p.then(_,_))})}}function Ln(o,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var _=u[p];try{var w=o,T=a,I=T;e:for(;I!==null;){switch(I.tag){case 5:St=I.stateNode,$n=!1;break e;case 3:St=I.stateNode.containerInfo,$n=!0;break e;case 4:St=I.stateNode.containerInfo,$n=!0;break e}I=I.return}if(St===null)throw Error(t(160));Mg(w,T,_),St=null,$n=!1;var L=_.alternate;L!==null&&(L.return=null),_.return=null}catch(j){tt(_,a,j)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ig(a,o),a=a.sibling}function Ig(o,a){var u=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ln(a,o),Kn(o),p&4){try{Io(3,o,o.return),Tl(3,o)}catch(le){tt(o,o.return,le)}try{Io(5,o,o.return)}catch(le){tt(o,o.return,le)}}break;case 1:Ln(a,o),Kn(o),p&512&&u!==null&&as(u,u.return);break;case 5:if(Ln(a,o),Kn(o),p&512&&u!==null&&as(u,u.return),o.flags&32){var _=o.stateNode;try{Zs(_,"")}catch(le){tt(o,o.return,le)}}if(p&4&&(_=o.stateNode,_!=null)){var w=o.memoizedProps,T=u!==null?u.memoizedProps:w,I=o.type,L=o.updateQueue;if(o.updateQueue=null,L!==null)try{I==="input"&&w.type==="radio"&&w.name!=null&&Ra(_,w),Kc(I,T);var j=Kc(I,w);for(T=0;T<L.length;T+=2){var Y=L[T],K=L[T+1];Y==="style"?pp(_,K):Y==="dangerouslySetInnerHTML"?dp(_,K):Y==="children"?Zs(_,K):P(_,Y,K,j)}switch(I){case"input":Ni(_,w);break;case"textarea":cp(_,w);break;case"select":var q=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!w.multiple;var se=w.value;se!=null?Hi(_,!!w.multiple,se,!1):q!==!!w.multiple&&(w.defaultValue!=null?Hi(_,!!w.multiple,w.defaultValue,!0):Hi(_,!!w.multiple,w.multiple?[]:"",!1))}_[So]=w}catch(le){tt(o,o.return,le)}}break;case 6:if(Ln(a,o),Kn(o),p&4){if(o.stateNode===null)throw Error(t(162));_=o.stateNode,w=o.memoizedProps;try{_.nodeValue=w}catch(le){tt(o,o.return,le)}}break;case 3:if(Ln(a,o),Kn(o),p&4&&u!==null&&u.memoizedState.isDehydrated)try{co(a.containerInfo)}catch(le){tt(o,o.return,le)}break;case 4:Ln(a,o),Kn(o);break;case 13:Ln(a,o),Kn(o),_=o.child,_.flags&8192&&(w=_.memoizedState!==null,_.stateNode.isHidden=w,!w||_.alternate!==null&&_.alternate.memoizedState!==null||(Ch=at())),p&4&&Rg(o);break;case 22:if(Y=u!==null&&u.memoizedState!==null,o.mode&1?(Mt=(j=Mt)||Y,Ln(a,o),Mt=j):Ln(a,o),Kn(o),p&8192){if(j=o.memoizedState!==null,(o.stateNode.isHidden=j)&&!Y&&(o.mode&1)!==0)for(oe=o,Y=o.child;Y!==null;){for(K=oe=Y;oe!==null;){switch(q=oe,se=q.child,q.tag){case 0:case 11:case 14:case 15:Io(4,q,q.return);break;case 1:as(q,q.return);var ae=q.stateNode;if(typeof ae.componentWillUnmount=="function"){p=q,u=q.return;try{a=p,ae.props=a.memoizedProps,ae.state=a.memoizedState,ae.componentWillUnmount()}catch(le){tt(p,u,le)}}break;case 5:as(q,q.return);break;case 22:if(q.memoizedState!==null){Lg(K);continue}}se!==null?(se.return=q,oe=se):Lg(K)}Y=Y.sibling}e:for(Y=null,K=o;;){if(K.tag===5){if(Y===null){Y=K;try{_=K.stateNode,j?(w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(I=K.stateNode,L=K.memoizedProps.style,T=L!=null&&L.hasOwnProperty("display")?L.display:null,I.style.display=fp("display",T))}catch(le){tt(o,o.return,le)}}}else if(K.tag===6){if(Y===null)try{K.stateNode.nodeValue=j?"":K.memoizedProps}catch(le){tt(o,o.return,le)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===o)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===o)break e;for(;K.sibling===null;){if(K.return===null||K.return===o)break e;Y===K&&(Y=null),K=K.return}Y===K&&(Y=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Ln(a,o),Kn(o),p&4&&Rg(o);break;case 21:break;default:Ln(a,o),Kn(o)}}function Kn(o){var a=o.flags;if(a&2){try{e:{for(var u=o.return;u!==null;){if(Ag(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(Zs(_,""),p.flags&=-33);var w=kg(o);vh(o,w,_);break;case 3:case 4:var T=p.stateNode.containerInfo,I=kg(o);xh(o,I,T);break;default:throw Error(t(161))}}catch(L){tt(o,o.return,L)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function WS(o,a,u){oe=o,Dg(o)}function Dg(o,a,u){for(var p=(o.mode&1)!==0;oe!==null;){var _=oe,w=_.child;if(_.tag===22&&p){var T=_.memoizedState!==null||bl;if(!T){var I=_.alternate,L=I!==null&&I.memoizedState!==null||Mt;I=bl;var j=Mt;if(bl=T,(Mt=L)&&!j)for(oe=_;oe!==null;)T=oe,L=T.child,T.tag===22&&T.memoizedState!==null?Bg(_):L!==null?(L.return=T,oe=L):Bg(_);for(;w!==null;)oe=w,Dg(w),w=w.sibling;oe=_,bl=I,Mt=j}$g(o)}else(_.subtreeFlags&8772)!==0&&w!==null?(w.return=_,oe=w):$g(o)}}function $g(o){for(;oe!==null;){var a=oe;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Mt||Tl(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Mt)if(u===null)p.componentDidMount();else{var _=a.elementType===a.type?u.memoizedProps:Dn(a.type,u.memoizedProps);p.componentDidUpdate(_,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&Lm(a,w,p);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Lm(a,T,u)}break;case 5:var I=a.stateNode;if(u===null&&a.flags&4){u=I;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var j=a.alternate;if(j!==null){var Y=j.memoizedState;if(Y!==null){var K=Y.dehydrated;K!==null&&co(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||a.flags&512&&_h(a)}catch(q){tt(a,a.return,q)}}if(a===o){oe=null;break}if(u=a.sibling,u!==null){u.return=a.return,oe=u;break}oe=a.return}}function Lg(o){for(;oe!==null;){var a=oe;if(a===o){oe=null;break}var u=a.sibling;if(u!==null){u.return=a.return,oe=u;break}oe=a.return}}function Bg(o){for(;oe!==null;){var a=oe;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Tl(4,a)}catch(L){tt(a,u,L)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var _=a.return;try{p.componentDidMount()}catch(L){tt(a,_,L)}}var w=a.return;try{_h(a)}catch(L){tt(a,w,L)}break;case 5:var T=a.return;try{_h(a)}catch(L){tt(a,T,L)}}}catch(L){tt(a,a.return,L)}if(a===o){oe=null;break}var I=a.sibling;if(I!==null){I.return=a.return,oe=I;break}oe=a.return}}var jS=Math.ceil,Pl=E.ReactCurrentDispatcher,Sh=E.ReactCurrentOwner,_n=E.ReactCurrentBatchConfig,ke=0,yt=null,ut=null,wt=0,rn=0,ls=Ir(0),mt=0,Do=null,fi=0,El=0,wh=0,$o=null,jt=null,Ch=0,cs=1/0,dr=null,Al=!1,bh=null,Or=null,kl=!1,Nr=null,Ml=0,Lo=0,Th=null,Rl=-1,Il=0;function Bt(){return(ke&6)!==0?at():Rl!==-1?Rl:Rl=at()}function Hr(o){return(o.mode&1)===0?1:(ke&2)!==0&&wt!==0?wt&-wt:PS.transition!==null?(Il===0&&(Il=kp()),Il):(o=$e,o!==0||(o=window.event,o=o===void 0?16:Op(o.type)),o)}function Bn(o,a,u,p){if(50<Lo)throw Lo=0,Th=null,Error(t(185));io(o,u,p),((ke&2)===0||o!==yt)&&(o===yt&&((ke&2)===0&&(El|=u),mt===4&&zr(o,wt)),Gt(o,p),u===1&&ke===0&&(a.mode&1)===0&&(cs=at()+500,ol&&$r()))}function Gt(o,a){var u=o.callbackNode;Pv(o,a);var p=za(o,o===yt?wt:0);if(p===0)u!==null&&Pp(u),o.callbackNode=null,o.callbackPriority=0;else if(a=p&-p,o.callbackPriority!==a){if(u!=null&&Pp(u),a===1)o.tag===0?TS(Og.bind(null,o)):Cm(Og.bind(null,o)),SS(function(){(ke&6)===0&&$r()}),u=null;else{switch(Mp(p)){case 1:u=iu;break;case 4:u=Ep;break;case 16:u=Fa;break;case 536870912:u=Ap;break;default:u=Fa}u=Vg(u,Fg.bind(null,o))}o.callbackPriority=a,o.callbackNode=u}}function Fg(o,a){if(Rl=-1,Il=0,(ke&6)!==0)throw Error(t(327));var u=o.callbackNode;if(us()&&o.callbackNode!==u)return null;var p=za(o,o===yt?wt:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||a)a=Dl(o,p);else{a=p;var _=ke;ke|=2;var w=Hg();(yt!==o||wt!==a)&&(dr=null,cs=at()+500,mi(o,a));do try{VS();break}catch(I){Ng(o,I)}while(!0);ju(),Pl.current=w,ke=_,ut!==null?a=0:(yt=null,wt=0,a=mt)}if(a!==0){if(a===2&&(_=su(o),_!==0&&(p=_,a=Ph(o,_))),a===1)throw u=Do,mi(o,0),zr(o,p),Gt(o,at()),u;if(a===6)zr(o,p);else{if(_=o.current.alternate,(p&30)===0&&!GS(_)&&(a=Dl(o,p),a===2&&(w=su(o),w!==0&&(p=w,a=Ph(o,w))),a===1))throw u=Do,mi(o,0),zr(o,p),Gt(o,at()),u;switch(o.finishedWork=_,o.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:gi(o,jt,dr);break;case 3:if(zr(o,p),(p&130023424)===p&&(a=Ch+500-at(),10<a)){if(za(o,0)!==0)break;if(_=o.suspendedLanes,(_&p)!==p){Bt(),o.pingedLanes|=o.suspendedLanes&_;break}o.timeoutHandle=Iu(gi.bind(null,o,jt,dr),a);break}gi(o,jt,dr);break;case 4:if(zr(o,p),(p&4194240)===p)break;for(a=o.eventTimes,_=-1;0<p;){var T=31-Mn(p);w=1<<T,T=a[T],T>_&&(_=T),p&=~w}if(p=_,p=at()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*jS(p/1960))-p,10<p){o.timeoutHandle=Iu(gi.bind(null,o,jt,dr),p);break}gi(o,jt,dr);break;case 5:gi(o,jt,dr);break;default:throw Error(t(329))}}}return Gt(o,at()),o.callbackNode===u?Fg.bind(null,o):null}function Ph(o,a){var u=$o;return o.current.memoizedState.isDehydrated&&(mi(o,a).flags|=256),o=Dl(o,a),o!==2&&(a=jt,jt=u,a!==null&&Eh(a)),o}function Eh(o){jt===null?jt=o:jt.push.apply(jt,o)}function GS(o){for(var a=o;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var _=u[p],w=_.getSnapshot;_=_.value;try{if(!Rn(w(),_))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zr(o,a){for(a&=~wh,a&=~El,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var u=31-Mn(a),p=1<<u;o[u]=-1,a&=~p}}function Og(o){if((ke&6)!==0)throw Error(t(327));us();var a=za(o,0);if((a&1)===0)return Gt(o,at()),null;var u=Dl(o,a);if(o.tag!==0&&u===2){var p=su(o);p!==0&&(a=p,u=Ph(o,p))}if(u===1)throw u=Do,mi(o,0),zr(o,a),Gt(o,at()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,gi(o,jt,dr),Gt(o,at()),null}function Ah(o,a){var u=ke;ke|=1;try{return o(a)}finally{ke=u,ke===0&&(cs=at()+500,ol&&$r())}}function pi(o){Nr!==null&&Nr.tag===0&&(ke&6)===0&&us();var a=ke;ke|=1;var u=_n.transition,p=$e;try{if(_n.transition=null,$e=1,o)return o()}finally{$e=p,_n.transition=u,ke=a,(ke&6)===0&&$r()}}function kh(){rn=ls.current,We(ls)}function mi(o,a){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,vS(u)),ut!==null)for(u=ut.return;u!==null;){var p=u;switch(Ou(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&il();break;case 3:ss(),We(Ht),We(Et),Ku();break;case 5:Xu(p);break;case 4:ss();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Gu(p.type._context);break;case 22:case 23:kh()}u=u.return}if(yt=o,ut=o=Wr(o.current,null),wt=rn=a,mt=0,Do=null,wh=El=fi=0,jt=$o=null,ui!==null){for(a=0;a<ui.length;a++)if(u=ui[a],p=u.interleaved,p!==null){u.interleaved=null;var _=p.next,w=u.pending;if(w!==null){var T=w.next;w.next=_,p.next=T}u.pending=p}ui=null}return o}function Ng(o,a){do{var u=ut;try{if(ju(),gl.current=vl,yl){for(var p=Xe.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}yl=!1}if(di=0,gt=pt=Xe=null,Eo=!1,Ao=0,Sh.current=null,u===null||u.return===null){mt=1,Do=a,ut=null;break}e:{var w=o,T=u.return,I=u,L=a;if(a=wt,I.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var j=L,Y=I,K=Y.tag;if((Y.mode&1)===0&&(K===0||K===11||K===15)){var q=Y.alternate;q?(Y.updateQueue=q.updateQueue,Y.memoizedState=q.memoizedState,Y.lanes=q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var se=ug(T);if(se!==null){se.flags&=-257,hg(se,T,I,w,a),se.mode&1&&cg(w,j,a),a=se,L=j;var ae=a.updateQueue;if(ae===null){var le=new Set;le.add(L),a.updateQueue=le}else ae.add(L);break e}else{if((a&1)===0){cg(w,j,a),Mh();break e}L=Error(t(426))}}else if(Ue&&I.mode&1){var lt=ug(T);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),hg(lt,T,I,w,a),zu(os(L,I));break e}}w=L=os(L,I),mt!==4&&(mt=2),$o===null?$o=[w]:$o.push(w),w=T;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var H=ag(w,L,a);$m(w,H);break e;case 1:I=L;var F=w.type,z=w.stateNode;if((w.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Or===null||!Or.has(z)))){w.flags|=65536,a&=-a,w.lanes|=a;var ee=lg(w,I,a);$m(w,ee);break e}}w=w.return}while(w!==null)}Wg(u)}catch(ue){a=ue,ut===u&&u!==null&&(ut=u=u.return);continue}break}while(!0)}function Hg(){var o=Pl.current;return Pl.current=vl,o===null?vl:o}function Mh(){(mt===0||mt===3||mt===2)&&(mt=4),yt===null||(fi&268435455)===0&&(El&268435455)===0||zr(yt,wt)}function Dl(o,a){var u=ke;ke|=2;var p=Hg();(yt!==o||wt!==a)&&(dr=null,mi(o,a));do try{US();break}catch(_){Ng(o,_)}while(!0);if(ju(),ke=u,Pl.current=p,ut!==null)throw Error(t(261));return yt=null,wt=0,mt}function US(){for(;ut!==null;)zg(ut)}function VS(){for(;ut!==null&&!yv();)zg(ut)}function zg(o){var a=Ug(o.alternate,o,rn);o.memoizedProps=o.pendingProps,a===null?Wg(o):ut=a,Sh.current=null}function Wg(o){var a=o;do{var u=a.alternate;if(o=a.return,(a.flags&32768)===0){if(u=OS(u,a,rn),u!==null){ut=u;return}}else{if(u=NS(u,a),u!==null){u.flags&=32767,ut=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{mt=6,ut=null;return}}if(a=a.sibling,a!==null){ut=a;return}ut=a=o}while(a!==null);mt===0&&(mt=5)}function gi(o,a,u){var p=$e,_=_n.transition;try{_n.transition=null,$e=1,qS(o,a,u,p)}finally{_n.transition=_,$e=p}return null}function qS(o,a,u,p){do us();while(Nr!==null);if((ke&6)!==0)throw Error(t(327));u=o.finishedWork;var _=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var w=u.lanes|u.childLanes;if(Ev(o,w),o===yt&&(ut=yt=null,wt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||kl||(kl=!0,Vg(Fa,function(){return us(),null})),w=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||w){w=_n.transition,_n.transition=null;var T=$e;$e=1;var I=ke;ke|=4,Sh.current=null,zS(o,u),Ig(u,o),fS(Mu),Ga=!!ku,Mu=ku=null,o.current=u,WS(u),_v(),ke=I,$e=T,_n.transition=w}else o.current=u;if(kl&&(kl=!1,Nr=o,Ml=_),w=o.pendingLanes,w===0&&(Or=null),Sv(u.stateNode),Gt(o,at()),a!==null)for(p=o.onRecoverableError,u=0;u<a.length;u++)_=a[u],p(_.value,{componentStack:_.stack,digest:_.digest});if(Al)throw Al=!1,o=bh,bh=null,o;return(Ml&1)!==0&&o.tag!==0&&us(),w=o.pendingLanes,(w&1)!==0?o===Th?Lo++:(Lo=0,Th=o):Lo=0,$r(),null}function us(){if(Nr!==null){var o=Mp(Ml),a=_n.transition,u=$e;try{if(_n.transition=null,$e=16>o?16:o,Nr===null)var p=!1;else{if(o=Nr,Nr=null,Ml=0,(ke&6)!==0)throw Error(t(331));var _=ke;for(ke|=4,oe=o.current;oe!==null;){var w=oe,T=w.child;if((oe.flags&16)!==0){var I=w.deletions;if(I!==null){for(var L=0;L<I.length;L++){var j=I[L];for(oe=j;oe!==null;){var Y=oe;switch(Y.tag){case 0:case 11:case 15:Io(8,Y,w)}var K=Y.child;if(K!==null)K.return=Y,oe=K;else for(;oe!==null;){Y=oe;var q=Y.sibling,se=Y.return;if(Eg(Y),Y===j){oe=null;break}if(q!==null){q.return=se,oe=q;break}oe=se}}}var ae=w.alternate;if(ae!==null){var le=ae.child;if(le!==null){ae.child=null;do{var lt=le.sibling;le.sibling=null,le=lt}while(le!==null)}}oe=w}}if((w.subtreeFlags&2064)!==0&&T!==null)T.return=w,oe=T;else e:for(;oe!==null;){if(w=oe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Io(9,w,w.return)}var H=w.sibling;if(H!==null){H.return=w.return,oe=H;break e}oe=w.return}}var F=o.current;for(oe=F;oe!==null;){T=oe;var z=T.child;if((T.subtreeFlags&2064)!==0&&z!==null)z.return=T,oe=z;else e:for(T=F;oe!==null;){if(I=oe,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:Tl(9,I)}}catch(ue){tt(I,I.return,ue)}if(I===T){oe=null;break e}var ee=I.sibling;if(ee!==null){ee.return=I.return,oe=ee;break e}oe=I.return}}if(ke=_,$r(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Oa,o)}catch{}p=!0}return p}finally{$e=u,_n.transition=a}}return!1}function jg(o,a,u){a=os(u,a),a=ag(o,a,1),o=Br(o,a,1),a=Bt(),o!==null&&(io(o,1,a),Gt(o,a))}function tt(o,a,u){if(o.tag===3)jg(o,o,u);else for(;a!==null;){if(a.tag===3){jg(a,o,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Or===null||!Or.has(p))){o=os(u,o),o=lg(a,o,1),a=Br(a,o,1),o=Bt(),a!==null&&(io(a,1,o),Gt(a,o));break}}a=a.return}}function YS(o,a,u){var p=o.pingCache;p!==null&&p.delete(a),a=Bt(),o.pingedLanes|=o.suspendedLanes&u,yt===o&&(wt&u)===u&&(mt===4||mt===3&&(wt&130023424)===wt&&500>at()-Ch?mi(o,0):wh|=u),Gt(o,a)}function Gg(o,a){a===0&&((o.mode&1)===0?a=1:(a=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var u=Bt();o=cr(o,a),o!==null&&(io(o,a,u),Gt(o,u))}function XS(o){var a=o.memoizedState,u=0;a!==null&&(u=a.retryLane),Gg(o,u)}function QS(o,a){var u=0;switch(o.tag){case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(u=_.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Gg(o,u)}var Ug;Ug=function(o,a,u){if(o!==null)if(o.memoizedProps!==a.pendingProps||Ht.current)Wt=!0;else{if((o.lanes&u)===0&&(a.flags&128)===0)return Wt=!1,FS(o,a,u);Wt=(o.flags&131072)!==0}else Wt=!1,Ue&&(a.flags&1048576)!==0&&bm(a,ll,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Cl(o,a),o=a.pendingProps;var _=Zi(a,Et.current);is(a,u),_=eh(null,a,p,o,_,u);var w=th();return a.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,zt(p)?(w=!0,sl(a)):w=!1,a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,qu(a),_.updater=Sl,a.stateNode=_,_._reactInternals=a,ah(a,p,o,u),a=hh(null,a,p,!0,w,u)):(a.tag=0,Ue&&w&&Fu(a),Lt(null,a,_,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Cl(o,a),o=a.pendingProps,_=p._init,p=_(p._payload),a.type=p,_=a.tag=ZS(p),o=Dn(p,o),_){case 0:a=uh(null,a,p,o,u);break e;case 1:a=yg(null,a,p,o,u);break e;case 11:a=dg(null,a,p,o,u);break e;case 14:a=fg(null,a,p,Dn(p.type,o),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:Dn(p,_),uh(o,a,p,_,u);case 1:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:Dn(p,_),yg(o,a,p,_,u);case 3:e:{if(_g(a),o===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,_=w.element,Dm(o,a),pl(a,p,null,u);var T=a.memoizedState;if(p=T.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){_=os(Error(t(423)),a),a=xg(o,a,p,u,_);break e}else if(p!==_){_=os(Error(t(424)),a),a=xg(o,a,p,u,_);break e}else for(nn=Rr(a.stateNode.containerInfo.firstChild),tn=a,Ue=!0,In=null,u=Rm(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ts(),p===_){a=hr(o,a,u);break e}Lt(o,a,p,u)}a=a.child}return a;case 5:return Bm(a),o===null&&Hu(a),p=a.type,_=a.pendingProps,w=o!==null?o.memoizedProps:null,T=_.children,Ru(p,_)?T=null:w!==null&&Ru(p,w)&&(a.flags|=32),gg(o,a),Lt(o,a,T,u),a.child;case 6:return o===null&&Hu(a),null;case 13:return vg(o,a,u);case 4:return Yu(a,a.stateNode.containerInfo),p=a.pendingProps,o===null?a.child=ns(a,null,p,u):Lt(o,a,p,u),a.child;case 11:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:Dn(p,_),dg(o,a,p,_,u);case 7:return Lt(o,a,a.pendingProps,u),a.child;case 8:return Lt(o,a,a.pendingProps.children,u),a.child;case 12:return Lt(o,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,_=a.pendingProps,w=a.memoizedProps,T=_.value,Ne(hl,p._currentValue),p._currentValue=T,w!==null)if(Rn(w.value,T)){if(w.children===_.children&&!Ht.current){a=hr(o,a,u);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var I=w.dependencies;if(I!==null){T=w.child;for(var L=I.firstContext;L!==null;){if(L.context===p){if(w.tag===1){L=ur(-1,u&-u),L.tag=2;var j=w.updateQueue;if(j!==null){j=j.shared;var Y=j.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),j.pending=L}}w.lanes|=u,L=w.alternate,L!==null&&(L.lanes|=u),Uu(w.return,u,a),I.lanes|=u;break}L=L.next}}else if(w.tag===10)T=w.type===a.type?null:w.child;else if(w.tag===18){if(T=w.return,T===null)throw Error(t(341));T.lanes|=u,I=T.alternate,I!==null&&(I.lanes|=u),Uu(T,u,a),T=w.sibling}else T=w.child;if(T!==null)T.return=w;else for(T=w;T!==null;){if(T===a){T=null;break}if(w=T.sibling,w!==null){w.return=T.return,T=w;break}T=T.return}w=T}Lt(o,a,_.children,u),a=a.child}return a;case 9:return _=a.type,p=a.pendingProps.children,is(a,u),_=gn(_),p=p(_),a.flags|=1,Lt(o,a,p,u),a.child;case 14:return p=a.type,_=Dn(p,a.pendingProps),_=Dn(p.type,_),fg(o,a,p,_,u);case 15:return pg(o,a,a.type,a.pendingProps,u);case 17:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:Dn(p,_),Cl(o,a),a.tag=1,zt(p)?(o=!0,sl(a)):o=!1,is(a,u),sg(a,p,_),ah(a,p,_,u),hh(null,a,p,!0,o,u);case 19:return wg(o,a,u);case 22:return mg(o,a,u)}throw Error(t(156,a.tag))};function Vg(o,a){return Tp(o,a)}function KS(o,a,u,p){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(o,a,u,p){return new KS(o,a,u,p)}function Rh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ZS(o){if(typeof o=="function")return Rh(o)?1:0;if(o!=null){if(o=o.$$typeof,o===te)return 11;if(o===he)return 14}return 2}function Wr(o,a){var u=o.alternate;return u===null?(u=xn(o.tag,a,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=a,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,a=o.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function $l(o,a,u,p,_,w){var T=2;if(p=o,typeof o=="function")Rh(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case k:return yi(u.children,_,w,a);case $:T=8,_|=8;break;case D:return o=xn(12,u,a,_|2),o.elementType=D,o.lanes=w,o;case Z:return o=xn(13,u,a,_),o.elementType=Z,o.lanes=w,o;case ie:return o=xn(19,u,a,_),o.elementType=ie,o.lanes=w,o;case Q:return Ll(u,_,w,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:T=10;break e;case G:T=9;break e;case te:T=11;break e;case he:T=14;break e;case V:T=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=xn(T,u,a,_),a.elementType=o,a.type=p,a.lanes=w,a}function yi(o,a,u,p){return o=xn(7,o,p,a),o.lanes=u,o}function Ll(o,a,u,p){return o=xn(22,o,p,a),o.elementType=Q,o.lanes=u,o.stateNode={isHidden:!1},o}function Ih(o,a,u){return o=xn(6,o,null,a),o.lanes=u,o}function Dh(o,a,u){return a=xn(4,o.children!==null?o.children:[],o.key,a),a.lanes=u,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function JS(o,a,u,p,_){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ou(0),this.expirationTimes=ou(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function $h(o,a,u,p,_,w,T,I,L){return o=new JS(o,a,u,I,L),a===1?(a=1,w===!0&&(a|=8)):a=0,w=xn(3,null,null,a),o.current=w,w.stateNode=o,w.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(w),o}function ew(o,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:p==null?null:""+p,children:o,containerInfo:a,implementation:u}}function qg(o){if(!o)return Dr;o=o._reactInternals;e:{if(si(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(zt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(zt(u))return Sm(o,u,a)}return a}function Yg(o,a,u,p,_,w,T,I,L){return o=$h(u,p,!0,o,_,w,T,I,L),o.context=qg(null),u=o.current,p=Bt(),_=Hr(u),w=ur(p,_),w.callback=a??null,Br(u,w,_),o.current.lanes=_,io(o,_,p),Gt(o,p),o}function Bl(o,a,u,p){var _=a.current,w=Bt(),T=Hr(_);return u=qg(u),a.context===null?a.context=u:a.pendingContext=u,a=ur(w,T),a.payload={element:o},p=p===void 0?null:p,p!==null&&(a.callback=p),o=Br(_,a,T),o!==null&&(Bn(o,_,T,w),fl(o,_,T)),T}function Fl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Xg(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<a?u:a}}function Lh(o,a){Xg(o,a),(o=o.alternate)&&Xg(o,a)}function tw(){return null}var Qg=typeof reportError=="function"?reportError:function(o){console.error(o)};function Bh(o){this._internalRoot=o}Ol.prototype.render=Bh.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));Bl(o,a,null,null)},Ol.prototype.unmount=Bh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;pi(function(){Bl(null,o,null,null)}),a[sr]=null}};function Ol(o){this._internalRoot=o}Ol.prototype.unstable_scheduleHydration=function(o){if(o){var a=Dp();o={blockedOn:null,target:o,priority:a};for(var u=0;u<Ar.length&&a!==0&&a<Ar[u].priority;u++);Ar.splice(u,0,o),u===0&&Bp(o)}};function Fh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Kg(){}function nw(o,a,u,p,_){if(_){if(typeof p=="function"){var w=p;p=function(){var j=Fl(T);w.call(j)}}var T=Yg(a,p,o,0,null,!1,!1,"",Kg);return o._reactRootContainer=T,o[sr]=T.current,xo(o.nodeType===8?o.parentNode:o),pi(),T}for(;_=o.lastChild;)o.removeChild(_);if(typeof p=="function"){var I=p;p=function(){var j=Fl(L);I.call(j)}}var L=$h(o,0,!1,null,null,!1,!1,"",Kg);return o._reactRootContainer=L,o[sr]=L.current,xo(o.nodeType===8?o.parentNode:o),pi(function(){Bl(a,L,u,p)}),L}function Hl(o,a,u,p,_){var w=u._reactRootContainer;if(w){var T=w;if(typeof _=="function"){var I=_;_=function(){var L=Fl(T);I.call(L)}}Bl(a,T,o,_)}else T=nw(u,a,o,_,p);return Fl(T)}Rp=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var u=ro(a.pendingLanes);u!==0&&(au(a,u|1),Gt(a,at()),(ke&6)===0&&(cs=at()+500,$r()))}break;case 13:pi(function(){var p=cr(o,1);if(p!==null){var _=Bt();Bn(p,o,1,_)}}),Lh(o,1)}},lu=function(o){if(o.tag===13){var a=cr(o,134217728);if(a!==null){var u=Bt();Bn(a,o,134217728,u)}Lh(o,134217728)}},Ip=function(o){if(o.tag===13){var a=Hr(o),u=cr(o,a);if(u!==null){var p=Bt();Bn(u,o,a,p)}Lh(o,a)}},Dp=function(){return $e},$p=function(o,a){var u=$e;try{return $e=o,a()}finally{$e=u}},eu=function(o,a,u){switch(a){case"input":if(Ni(o,u),a=u.name,u.type==="radio"&&a!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==o&&p.form===o.form){var _=rl(p);if(!_)throw Error(t(90));Un(p),Ni(p,_)}}}break;case"textarea":cp(o,u);break;case"select":a=u.value,a!=null&&Hi(o,!!u.multiple,a,!1)}},_p=Ah,xp=pi;var rw={usingClientEntryPoint:!1,Events:[wo,Qi,rl,gp,yp,Ah]},Bo={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iw={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Cp(o),o===null?null:o.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||tw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Oa=zl.inject(iw),qn=zl}catch{}}return Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw,Ut.createPortal=function(o,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(a))throw Error(t(200));return ew(o,a,null,u)},Ut.createRoot=function(o,a){if(!Fh(o))throw Error(t(299));var u=!1,p="",_=Qg;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=$h(o,1,!1,null,null,u,!1,p,_),o[sr]=a.current,xo(o.nodeType===8?o.parentNode:o),new Bh(a)},Ut.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Cp(a),o=o===null?null:o.stateNode,o},Ut.flushSync=function(o){return pi(o)},Ut.hydrate=function(o,a,u){if(!Nl(a))throw Error(t(200));return Hl(null,o,a,!0,u)},Ut.hydrateRoot=function(o,a,u){if(!Fh(o))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,_=!1,w="",T=Qg;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=Yg(a,null,o,1,u??null,_,!1,w,T),o[sr]=a.current,xo(o),p)for(o=0;o<p.length;o++)u=p[o],_=u._getVersion,_=_(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,_]:a.mutableSourceEagerHydrationData.push(u,_);return new Ol(a)},Ut.render=function(o,a,u){if(!Nl(a))throw Error(t(200));return Hl(null,o,a,!1,u)},Ut.unmountComponentAtNode=function(o){if(!Nl(o))throw Error(t(40));return o._reactRootContainer?(pi(function(){Hl(null,null,o,!1,function(){o._reactRootContainer=null,o[sr]=null})}),!0):!1},Ut.unstable_batchedUpdates=Ah,Ut.unstable_renderSubtreeIntoContainer=function(o,a,u,p){if(!Nl(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Hl(o,a,u,!1,p)},Ut.version="18.3.1-next-f1338f8080-20240426",Ut}var s0;function g_(){if(s0)return Hh.exports;s0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hh.exports=hw(),Hh.exports}var o0;function dw(){if(o0)return Wl;o0=1;var i=g_();return Wl.createRoot=i.createRoot,Wl.hydrateRoot=i.hydrateRoot,Wl}var fw=dw(),ye=Aa();const pw=Oc(ye),mw={},a0=i=>{let e;const t=new Set,n=(f,m)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const y=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,y))}},r=()=>e,h={setState:n,getState:r,getInitialState:()=>d,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(mw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=e=i(n,r,h);return h},gw=i=>i?a0(i):a0;var jh={exports:{}},Gh={},Uh={exports:{}},Vh={};var l0;function yw(){if(l0)return Vh;l0=1;var i=Aa();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,r=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function c(m,g){var y=g(),v=n({inst:{value:y,getSnapshot:g}}),x=v[0].inst,S=v[1];return s(function(){x.value=y,x.getSnapshot=g,h(x)&&S({inst:x})},[m,y,g]),r(function(){return h(x)&&S({inst:x}),m(function(){h(x)&&S({inst:x})})},[m]),l(y),y}function h(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!t(m,y)}catch{return!0}}function d(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Vh.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:f,Vh}var c0;function _w(){return c0||(c0=1,Uh.exports=yw()),Uh.exports}var u0;function xw(){if(u0)return Gh;u0=1;var i=Aa(),e=_w();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=i.useRef,l=i.useEffect,c=i.useMemo,h=i.useDebugValue;return Gh.useSyncExternalStoreWithSelector=function(d,f,m,g,y){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=c(function(){function C(M){if(!b){if(b=!0,P=M,M=g(M),y!==void 0&&x.hasValue){var k=x.value;if(y(k,M))return E=k}return E=M}if(k=E,n(P,M))return k;var $=g(M);return y!==void 0&&y(k,$)?(P=M,k):(P=M,E=$)}var b=!1,P,E,A=m===void 0?null:m;return[function(){return C(f())},A===null?void 0:function(){return C(A())}]},[f,m,g,y]);var S=r(d,v[0],v[1]);return l(function(){x.hasValue=!0,x.value=S},[S]),h(S),S},Gh}var h0;function vw(){return h0||(h0=1,jh.exports=xw()),jh.exports}var Sw=vw();const ww=Oc(Sw),y_={},{useDebugValue:Cw}=pw,{useSyncExternalStoreWithSelector:bw}=ww;let d0=!1;const Tw=i=>i;function Pw(i,e=Tw,t){(y_?"production":void 0)!=="production"&&t&&!d0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),d0=!0);const n=bw(i.subscribe,i.getState,i.getServerState||i.getInitialState,e,t);return Cw(n),n}const f0=i=>{(y_?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof i=="function"?gw(i):i,t=(n,r)=>Pw(e,n,r);return Object.assign(t,e),t},Ew=i=>i?f0(i):f0,qh={BASE_URL:"/battle-arena-v2/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},$d=new Map,jl=i=>{const e=$d.get(i);return e?Object.fromEntries(Object.entries(e.stores).map(([t,n])=>[t,n.getState()])):{}},Aw=(i,e,t)=>{if(i===void 0)return{type:"untracked",connection:e.connect(t)};const n=$d.get(t.name);if(n)return{type:"tracked",store:i,...n};const r={connection:e.connect(t),stores:{}};return $d.set(t.name,r),{type:"tracked",store:i,...r}},kw=(i,e={})=>(t,n,r)=>{const{enabled:s,anonymousActionType:l,store:c,...h}=e;let d;try{d=(s??(qh?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(qh?"production":void 0)!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),i(t,n,r);const{connection:f,...m}=Aw(c,d,h);let g=!0;r.setState=(x,S,C)=>{const b=t(x,S);if(!g)return b;const P=C===void 0?{type:l||"anonymous"}:typeof C=="string"?{type:C}:C;return c===void 0?(f?.send(P,n()),b):(f?.send({...P,type:`${c}/${P.type}`},{...jl(h.name),[c]:r.getState()}),b)};const y=(...x)=>{const S=g;g=!1,t(...x),g=S},v=i(r.setState,n,r);if(m.type==="untracked"?f?.init(v):(m.stores[m.store]=r,f?.init(Object.fromEntries(Object.entries(m.stores).map(([x,S])=>[x,x===m.store?v:S.getState()])))),r.dispatchFromDevtools&&typeof r.dispatch=="function"){let x=!1;const S=r.dispatch;r.dispatch=(...C)=>{(qh?"production":void 0)!=="production"&&C[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),S(...C)}}return f.subscribe(x=>{var S;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Yh(x.payload,C=>{if(C.type==="__setState"){if(c===void 0){y(C.state);return}Object.keys(C.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=C.state[c];if(b==null)return;JSON.stringify(r.getState())!==JSON.stringify(b)&&y(b);return}r.dispatchFromDevtools&&typeof r.dispatch=="function"&&r.dispatch(C)});case"DISPATCH":switch(x.payload.type){case"RESET":return y(v),c===void 0?f?.init(r.getState()):f?.init(jl(h.name));case"COMMIT":if(c===void 0){f?.init(r.getState());return}return f?.init(jl(h.name));case"ROLLBACK":return Yh(x.state,C=>{if(c===void 0){y(C),f?.init(r.getState());return}y(C[c]),f?.init(jl(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Yh(x.state,C=>{if(c===void 0){y(C);return}JSON.stringify(r.getState())!==JSON.stringify(C[c])&&y(C[c])});case"IMPORT_STATE":{const{nextLiftedState:C}=x.payload,b=(S=C.computedStates.slice(-1)[0])==null?void 0:S.state;if(!b)return;y(c===void 0?b:b[c]),f?.send(null,C);return}case"PAUSE_RECORDING":return g=!g}return}}),v},Mw=kw,Yh=(i,e)=>{let t;try{t=JSON.parse(i)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}t!==void 0&&e(t)},Rw="modulepreload",Iw=function(i){return"/battle-arena-v2/"+i},p0={},Rs=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let h=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=h(t.map(d=>{if(d=Iw(d),d in p0)return;p0[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Rw,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((y,v)=>{g.addEventListener("load",y),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return r.then(l=>{for(const c of l||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var pe=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(pe||{});const Ld=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},Gl=(i,e)=>Ld(i).priority??e,bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Ld).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...i){return i.map(Ld).forEach(e=>{e.type.forEach(t=>{const n=this._addHandlers,r=this._queue;n[t]?n[t]?.(e):(r[t]=r[t]||[],r[t]?.push(e))})}),this},handle(i,e,t){const n=this._addHandlers,r=this._removeHandlers;if(n[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);n[i]=e,r[i]=t;const s=this._queue;return s[i]&&(s[i]?.forEach(l=>e(l)),delete s[i]),this},handleByMap(i,e){return this.handle(i,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(i,e,t=-1){return this.handle(i,n=>{e.findIndex(s=>s.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((s,l)=>Gl(l.value,t)-Gl(s.value,t)))},n=>{const r=e.findIndex(s=>s.name===n.name);r!==-1&&e.splice(r,1)})},handleByList(i,e,t=-1){return this.handle(i,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((r,s)=>Gl(s,t)-Gl(r,t)))},n=>{const r=e.indexOf(n.ref);r!==-1&&e.splice(r,1)})},mixin(i,...e){for(const t of e)Object.defineProperties(i.prototype,Object.getOwnPropertyDescriptors(t))}},Dw={extension:{type:pe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Rs(()=>import("./browserAll-BebFxdFZ.js"),__vite__mapDeps([0,1,2]))}},$w={extension:{type:pe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Rs(()=>import("./webworkerAll-eGrpVA7I.js"),__vite__mapDeps([1,2]))}};class Ct{constructor(e,t,n){this._x=t||0,this._y=n||0,this._observer=e}clone(e){return new Ct(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var Xh={exports:{}},m0;function Lw(){return m0||(m0=1,(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(h,d,f){this.fn=h,this.context=d,this.once=f||!1}function s(h,d,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new r(f,m||h,g),v=t?t+d:d;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],y]:h._events[v].push(y):(h._events[v]=y,h._eventsCount++),h}function l(h,d){--h._eventsCount===0?h._events=new n:delete h._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)e.call(f,m)&&d.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},c.prototype.listeners=function(d){var f=t?t+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,y=m.length,v=new Array(y);g<y;g++)v[g]=m[g].fn;return v},c.prototype.listenerCount=function(d){var f=t?t+d:d,m=this._events[f];return m?m.fn?1:m.length:0},c.prototype.emit=function(d,f,m,g,y,v){var x=t?t+d:d;if(!this._events[x])return!1;var S=this._events[x],C=arguments.length,b,P;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,m),!0;case 4:return S.fn.call(S.context,f,m,g),!0;case 5:return S.fn.call(S.context,f,m,g,y),!0;case 6:return S.fn.call(S.context,f,m,g,y,v),!0}for(P=1,b=new Array(C-1);P<C;P++)b[P-1]=arguments[P];S.fn.apply(S.context,b)}else{var E=S.length,A;for(P=0;P<E;P++)switch(S[P].once&&this.removeListener(d,S[P].fn,void 0,!0),C){case 1:S[P].fn.call(S[P].context);break;case 2:S[P].fn.call(S[P].context,f);break;case 3:S[P].fn.call(S[P].context,f,m);break;case 4:S[P].fn.call(S[P].context,f,m,g);break;default:if(!b)for(A=1,b=new Array(C-1);A<C;A++)b[A-1]=arguments[A];S[P].fn.apply(S[P].context,b)}}return!0},c.prototype.on=function(d,f,m){return s(this,d,f,m,!1)},c.prototype.once=function(d,f,m){return s(this,d,f,m,!0)},c.prototype.removeListener=function(d,f,m,g){var y=t?t+d:d;if(!this._events[y])return this;if(!f)return l(this,y),this;var v=this._events[y];if(v.fn)v.fn===f&&(!g||v.once)&&(!m||v.context===m)&&l(this,y);else{for(var x=0,S=[],C=v.length;x<C;x++)(v[x].fn!==f||g&&!v[x].once||m&&v[x].context!==m)&&S.push(v[x]);S.length?this._events[y]=S.length===1?S[0]:S:l(this,y)}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=t?t+d:d,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,i.exports=c})(Xh)),Xh.exports}var Bw=Lw();const Wn=Oc(Bw),Fw=Math.PI*2,Ow=180/Math.PI,Nw=Math.PI/180;class Dt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Dt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Qh.x=0,Qh.y=0,Qh}}const Qh=new Dt;class be{constructor(e=1,t=0,n=0,r=1,s=0,l=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=s,this.ty=l}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,r,s,l){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=s,this.ty=l,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Dt;const n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Dt;const n=this.a,r=this.b,s=this.c,l=this.d,c=this.tx,h=this.ty,d=1/(n*l+s*-r),f=e.x,m=e.y;return t.x=l*d*f+-s*d*m+(h*s-c*l)*d,t.y=n*d*m+-r*d*f+(-h*n+c*r)*d,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.a,s=this.c,l=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=l*t-this.ty*n,this.ty=l*n+this.ty*t,this}append(e){const t=this.a,n=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,t){const n=e.a,r=e.b,s=e.c,l=e.d,c=e.tx,h=e.ty,d=t.a,f=t.b,m=t.c,g=t.d;return this.a=n*d+r*m,this.b=n*f+r*g,this.c=s*d+l*m,this.d=s*f+l*g,this.tx=c*d+h*m+t.tx,this.ty=c*f+h*g+t.ty,this}setTransform(e,t,n,r,s,l,c,h,d){return this.a=Math.cos(c+d)*s,this.b=Math.sin(c+d)*s,this.c=-Math.sin(c-h)*l,this.d=Math.cos(c-h)*l,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,r=this.c,s=this.d,l=e.pivot,c=-Math.atan2(-r,s),h=Math.atan2(n,t),d=Math.abs(c+h);return d<1e-5||Math.abs(Fw-d)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=h),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(l.x*t+l.y*r),e.position.y=this.ty+(l.x*n+l.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,r=this.d,s=this.tx,l=e*r-t*n;return this.a=r/l,this.b=-t/l,this.c=-n/l,this.d=e/l,this.tx=(n*this.ty-r*s)/l,this.ty=-(e*this.ty-t*s)/l,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new be;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return zw.identity()}static get shared(){return Hw.identity()}}const Hw=new be,zw=new be,wi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ci=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],bi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ti=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Bd=[],__=[],Ul=Math.sign;function Ww(){for(let i=0;i<16;i++){const e=[];Bd.push(e);for(let t=0;t<16;t++){const n=Ul(wi[i]*wi[t]+bi[i]*Ci[t]),r=Ul(Ci[i]*wi[t]+Ti[i]*Ci[t]),s=Ul(wi[i]*bi[t]+bi[i]*Ti[t]),l=Ul(Ci[i]*bi[t]+Ti[i]*Ti[t]);for(let c=0;c<16;c++)if(wi[c]===n&&Ci[c]===r&&bi[c]===s&&Ti[c]===l){e.push(c);break}}}for(let i=0;i<16;i++){const e=new be;e.set(wi[i],Ci[i],bi[i],Ti[i],0,0),__.push(e)}}Ww();const Be={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>wi[i],uY:i=>Ci[i],vX:i=>bi[i],vY:i=>Ti[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>Bd[i][e],sub:(i,e)=>Bd[i][Be.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?Be.S:Be.N:Math.abs(e)*2<=Math.abs(i)?i>0?Be.E:Be.W:e>0?i>0?Be.SE:Be.SW:i>0?Be.NE:Be.NW,matrixAppendRotationInv:(i,e,t=0,n=0)=>{const r=__[Be.inv(e)];r.tx=t,r.ty=n,i.append(r)},transformRectCoords:(i,e,t,n)=>{const{x:r,y:s,width:l,height:c}=i,{x:h,y:d,width:f,height:m}=e;return t===Be.E?(n.set(r+h,s+d,l,c),n):t===Be.S?n.set(f-s-c+h,r+d,c,l):t===Be.W?n.set(f-r-l+h,m-s-c+d,l,c):t===Be.N?n.set(s+h,m-r-l+d,c,l):n.set(r+h,s+d,l,c)}},Vl=[new Dt,new Dt,new Dt,new Dt];class qe{constructor(e=0,t=0,n=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new qe(0,0,0,0)}clone(){return new qe(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,n,r=.5){const{width:s,height:l}=this;if(s<=0||l<=0)return!1;const c=this.x,h=this.y,d=n*(1-r),f=n-d,m=c-d,g=c+s+d,y=h-d,v=h+l+d,x=c+f,S=c+s-f,C=h+f,b=h+l-f;return e>=m&&e<=g&&t>=y&&t<=v&&!(e>x&&e<S&&t>C&&t<b)}intersects(e,t){if(!t){const $=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=$)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,r=this.right,s=this.top,l=this.bottom;if(r<=n||l<=s)return!1;const c=Vl[0].set(e.left,e.top),h=Vl[1].set(e.left,e.bottom),d=Vl[2].set(e.right,e.top),f=Vl[3].set(e.right,e.bottom);if(d.x<=c.x||h.y<=c.y)return!1;const m=Math.sign(t.a*t.d-t.b*t.c);if(m===0||(t.apply(c,c),t.apply(h,h),t.apply(d,d),t.apply(f,f),Math.max(c.x,h.x,d.x,f.x)<=n||Math.min(c.x,h.x,d.x,f.x)>=r||Math.max(c.y,h.y,d.y,f.y)<=s||Math.min(c.y,h.y,d.y,f.y)>=l))return!1;const g=m*(h.y-c.y),y=m*(c.x-h.x),v=g*n+y*s,x=g*r+y*s,S=g*n+y*l,C=g*r+y*l;if(Math.max(v,x,S,C)<=g*c.x+y*c.y||Math.min(v,x,S,C)>=g*f.x+y*f.y)return!1;const b=m*(c.y-d.y),P=m*(d.x-c.x),E=b*n+P*s,A=b*r+P*s,M=b*n+P*l,k=b*r+P*l;return!(Math.max(E,A,M,k)<=b*c.x+P*c.y||Math.min(E,A,M,k)>=b*f.x+P*f.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=s-r,this}getBounds(e){return e||(e=new qe),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,n=e.y,r=e.x+e.width,s=e.y+e.height;return t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height&&r>=this.x&&r<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Kh={default:-1};function st(i="default"){return Kh[i]===void 0&&(Kh[i]=-1),++Kh[i]}const g0=new Set,Le="8.0.0",jw="8.3.4",ys={quiet:!1,noColor:!1},we=(i,e,t=3)=>{if(ys.quiet||g0.has(e))return;let n=new Error().stack;const r=`${e}
Deprecated since v${i}`,s=typeof console.groupCollapsed=="function"&&!ys.noColor;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r):(n=n.split(`
`).splice(t).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r),console.warn(n))),g0.add(e)};Object.defineProperties(we,{quiet:{get:()=>ys.quiet,set:i=>{ys.quiet=i},enumerable:!0,configurable:!1},noColor:{get:()=>ys.noColor,set:i=>{ys.noColor=i},enumerable:!0,configurable:!1}});const x_=()=>{};function Is(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function y0(i){return!(i&i-1)&&!!i}function v_(i){const e={};for(const t in i)i[t]!==void 0&&(e[t]=i[t]);return e}const _0=Object.create(null);function Gw(i){const e=_0[i];return e===void 0&&(_0[i]=st("resource")),e}const S_=class w_ extends Wn{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...w_.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){we(Le,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Gw(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};S_.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Ds=S_;const C_=class b_ extends Wn{constructor(e={}){super(),this.options=e,this.uid=st("textureSource"),this._resourceType="textureSource",this._resourceId=st("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...b_.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Ds(v_(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=st("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,n){n||(n=this._resolution),e||(e=this.width),t||(t=this.height);const r=Math.round(e*n),s=Math.round(t*n);return this.width=r/n,this.height=s/n,this._resolution=n,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=st("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=y0(this.pixelWidth)&&y0(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};C_.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let jn=C_;class Af extends jn{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(t instanceof Float32Array?n="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?n="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?n="rgba16uint":(t instanceof Int8Array,n="bgra8unorm")),super({...e,resource:t,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Af.extension=pe.TextureSource;const x0=new be;class Uw{constructor(e,t){this.mapCoord=new be,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],l=e[r+1];t[r]=s*n.a+l*n.c+n.tx,t[r+1]=s*n.b+l*n.d+n.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const n=e.orig,r=e.trim;r&&(x0.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(x0));const s=e.source,l=this.uClampFrame,c=this.clampMargin/s._resolution,h=this.clampOffset/s._resolution;return l[0]=(e.frame.x+c+h)/s.width,l[1]=(e.frame.y+c+h)/s.height,l[2]=(e.frame.x+e.frame.width-c+h)/s.width,l[3]=(e.frame.y+e.frame.height-c+h)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class Ae extends Wn{constructor({source:e,label:t,frame:n,orig:r,trim:s,defaultAnchor:l,defaultBorders:c,rotate:h,dynamic:d}={}){if(super(),this.uid=st("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new qe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new jn,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:f,height:m}=this._source;this.frame.width=f,this.frame.height=m}this.orig=r||this.frame,this.trim=s,this.rotate=h??0,this.defaultAnchor=l,this.defaultBorders=c,this.destroyed=!1,this.dynamic=d||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Uw(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:n,height:r}=this._source,s=t.x/n,l=t.y/r,c=t.width/n,h=t.height/r;let d=this.rotate;if(d){const f=c/2,m=h/2,g=s+f,y=l+m;d=Be.add(d,Be.NW),e.x0=g+f*Be.uX(d),e.y0=y+m*Be.uY(d),d=Be.add(d,2),e.x1=g+f*Be.uX(d),e.y1=y+m*Be.uY(d),d=Be.add(d,2),e.x2=g+f*Be.uX(d),e.y2=y+m*Be.uY(d),d=Be.add(d,2),e.x3=g+f*Be.uX(d),e.y3=y+m*Be.uY(d)}else e.x0=s,e.y0=l,e.x1=s+c,e.y1=l,e.x2=s+c,e.y2=l+h,e.x3=s,e.y3=l+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return we(Le,"Texture.baseTexture is now Texture.source"),this._source}}Ae.EMPTY=new Ae({label:"EMPTY",source:new jn({label:"EMPTY"})});Ae.EMPTY.destroy=x_;Ae.WHITE=new Ae({source:new Af({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ae.WHITE.destroy=x_;function Vw(i,e,t){const{width:n,height:r}=t.orig,s=t.trim;if(s){const l=s.width,c=s.height;i.minX=s.x-e._x*n,i.maxX=i.minX+l,i.minY=s.y-e._y*r,i.maxY=i.minY+c}else i.minX=-e._x*n,i.maxX=i.minX+n,i.minY=-e._y*r,i.maxY=i.minY+r}const v0=new be;class zn{constructor(e=1/0,t=1/0,n=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=v0,this.minX=e,this.minY=t,this.maxX=n,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new qe);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=v0,this}set(e,t,n,r){this.minX=e,this.minY=t,this.maxX=n,this.maxY=r}addFrame(e,t,n,r,s){s||(s=this.matrix);const l=s.a,c=s.b,h=s.c,d=s.d,f=s.tx,m=s.ty;let g=this.minX,y=this.minY,v=this.maxX,x=this.maxY,S=l*e+h*t+f,C=c*e+d*t+m;S<g&&(g=S),C<y&&(y=C),S>v&&(v=S),C>x&&(x=C),S=l*n+h*t+f,C=c*n+d*t+m,S<g&&(g=S),C<y&&(y=C),S>v&&(v=S),C>x&&(x=C),S=l*e+h*r+f,C=c*e+d*r+m,S<g&&(g=S),C<y&&(y=C),S>v&&(v=S),C>x&&(x=C),S=l*n+h*r+f,C=c*n+d*r+m,S<g&&(g=S),C<y&&(y=C),S>v&&(v=S),C>x&&(x=C),this.minX=g,this.minY=y,this.maxX=v,this.maxY=x}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,n=this.minY,r=this.maxX,s=this.maxY,{a:l,b:c,c:h,d,tx:f,ty:m}=e;let g=l*t+h*n+f,y=c*t+d*n+m;this.minX=g,this.minY=y,this.maxX=g,this.maxY=y,g=l*r+h*n+f,y=c*r+d*n+m,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=l*t+h*s+f,y=c*t+d*s+m,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY,g=l*r+h*s+f,y=c*r+d*s+m,this.minX=g<this.minX?g:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=g>this.maxX?g:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,n,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<n&&(this.minY=n),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new zn(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,n,r){let s=this.minX,l=this.minY,c=this.maxX,h=this.maxY;r||(r=this.matrix);const d=r.a,f=r.b,m=r.c,g=r.d,y=r.tx,v=r.ty;for(let x=t;x<n;x+=2){const S=e[x],C=e[x+1],b=d*S+m*C+y,P=f*S+g*C+v;s=b<s?b:s,l=P<l?P:l,c=b>c?b:c,h=P>h?P:h}this.minX=s,this.minY=l,this.maxX=c,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var qw={grad:.9,turn:360,rad:360/(2*Math.PI)},fr=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},xt=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Cn=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},T_=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},S0=function(i){return{r:Cn(i.r,0,255),g:Cn(i.g,0,255),b:Cn(i.b,0,255),a:Cn(i.a)}},Zh=function(i){return{r:xt(i.r),g:xt(i.g),b:xt(i.b),a:xt(i.a,3)}},Yw=/^#([0-9a-f]{3,8})$/i,ql=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},P_=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),l=s-Math.min(e,t,n),c=l?s===e?(t-n)/l:s===t?2+(n-e)/l:4+(e-t)/l:0;return{h:60*(c<0?c+6:c),s:s?l/s*100:0,v:s/255*100,a:r}},E_=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),l=n*(1-t),c=n*(1-(e-s)*t),h=n*(1-(1-e+s)*t),d=s%6;return{r:255*[n,c,l,l,h,n][d],g:255*[h,n,n,c,l,l][d],b:255*[l,l,h,n,n,c][d],a:r}},w0=function(i){return{h:T_(i.h),s:Cn(i.s,0,100),l:Cn(i.l,0,100),a:Cn(i.a)}},C0=function(i){return{h:xt(i.h),s:xt(i.s),l:xt(i.l),a:xt(i.a,3)}},b0=function(i){return E_((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},ia=function(i){return{h:(e=P_(i)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},Xw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qw=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zw=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fd={string:[[function(i){var e=Yw.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?xt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?xt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=Kw.exec(i)||Zw.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:S0({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=Xw.exec(i)||Qw.exec(i);if(!e)return null;var t,n,r=w0({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(qw[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return b0(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=r===void 0?1:r;return fr(e)&&fr(t)&&fr(n)?S0({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,r=i.a,s=r===void 0?1:r;if(!fr(e)||!fr(t)||!fr(n))return null;var l=w0({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return b0(l)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,r=i.a,s=r===void 0?1:r;if(!fr(e)||!fr(t)||!fr(n))return null;var l=(function(c){return{h:T_(c.h),s:Cn(c.s,0,100),v:Cn(c.v,0,100),a:Cn(c.a)}})({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return E_(l)},"hsv"]]},T0=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},Jw=function(i){return typeof i=="string"?T0(i.trim(),Fd.string):typeof i=="object"&&i!==null?T0(i,Fd.object):[null,void 0]},Jh=function(i,e){var t=ia(i);return{h:t.h,s:Cn(t.s+100*e,0,100),l:t.l,a:t.a}},ed=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},P0=function(i,e){var t=ia(i);return{h:t.h,s:t.s,l:Cn(t.l+100*e,0,100),a:t.a}},Od=(function(){function i(e){this.parsed=Jw(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return xt(ed(this.rgba),2)},i.prototype.isDark=function(){return ed(this.rgba)<.5},i.prototype.isLight=function(){return ed(this.rgba)>=.5},i.prototype.toHex=function(){return e=Zh(this.rgba),t=e.r,n=e.g,r=e.b,l=(s=e.a)<1?ql(xt(255*s)):"","#"+ql(t)+ql(n)+ql(r)+l;var e,t,n,r,s,l},i.prototype.toRgb=function(){return Zh(this.rgba)},i.prototype.toRgbString=function(){return e=Zh(this.rgba),t=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},i.prototype.toHsl=function(){return C0(ia(this.rgba))},i.prototype.toHslString=function(){return e=C0(ia(this.rgba)),t=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},i.prototype.toHsv=function(){return e=P_(this.rgba),{h:xt(e.h),s:xt(e.s),v:xt(e.v),a:xt(e.a,3)};var e},i.prototype.invert=function(){return Zn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Zn(Jh(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Zn(Jh(this.rgba,-e))},i.prototype.grayscale=function(){return Zn(Jh(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Zn(P0(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Zn(P0(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Zn({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):xt(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=ia(this.rgba);return typeof e=="number"?Zn({h:e,s:t.s,l:t.l,a:t.a}):xt(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Zn(e).toHex()},i})(),Zn=function(i){return i instanceof Od?i:new Od(i)},E0=[],eC=function(i){i.forEach(function(e){E0.indexOf(e)<0&&(e(Od,Fd),E0.push(e))})};function tC(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var s={};i.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,h,d=n[this.toHex()];if(d)return d;if(l?.closest){var f=this.toRgb(),m=1/0,g="black";if(!s.length)for(var y in t)s[y]=new i(t[y]).toRgb();for(var v in t){var x=(c=f,h=s[v],Math.pow(c.r-h.r,2)+Math.pow(c.g-h.g,2)+Math.pow(c.b-h.b,2));x<m&&(m=x,g=v)}return g}},e.string.push([function(l){var c=l.toLowerCase(),h=c==="transparent"?"#0000":t[c];return h?new i(h).toRgb():null},"name"])}eC([tC]);const $s=class Yo{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Yo)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,l)=>s===t[l]);if(e!==null&&t!==null){const s=Object.keys(e),l=Object.keys(t);return s.length!==l.length?!1:s.every(c=>e[c]===t[c])}return e===t}toRgba(){const[e,t,n,r]=this._components;return{r:e,g:t,b:n,a:r}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,n,r,s]=this._components;return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,n,r]=this._components;return e[0]=t,e[1]=n,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,t,n]=this.toUint8RgbArray();return(n<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,r,s]=Yo._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,n,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const l=e;t=(l>>16&255)/255,n=(l>>8&255)/255,r=(l&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,r,s=255]=e,t/=255,n/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const c=Yo.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}const l=Zn(e);l.isValid()&&({r:t,g:n,b:r,a:s}=l.rgba,t/=255,n/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Yo||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};$s.shared=new $s;$s._temp=new $s;$s.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ft=$s;const nC={cullArea:null,cullable:!1,cullableChildren:!0};let td=0;const A0=500;function Ge(...i){td!==A0&&(td++,td===A0?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}const ka={_registeredResources:new Set,register(i){this._registeredResources.add(i)},unregister(i){this._registeredResources.delete(i)},release(){this._registeredResources.forEach(i=>i.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(i){return this._registeredResources.has(i)},reset(){this._registeredResources.clear()}};class rC{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:t=new this._classType,t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class iC{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new rC(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const n=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[n]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const An=new iC;ka.register(An);const sC={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(i){typeof i=="boolean"&&i===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(i===!0?{}:i))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(i){we("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(i)}};function oC(i,e,t){const n=i.length;let r;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(r=e;r<s;++r)i[r]=i[r+t];i.length=s}const aC={allowChildren:!0,removeChildren(i=0,e){const t=e??this.children.length,n=t-i,r=[];if(n>0&&n<=t){for(let l=t-1;l>=i;l--){const c=this.children[l];c&&(r.push(c),c.parent=null)}oC(this.children,i,t);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let l=0;l<r.length;++l){const c=r[l];c.parentRenderLayer?.detach(c),this.emit("childRemoved",c,this,l),r[l].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}else if(n===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const e=this.getChildAt(i);return this.removeChild(e)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,e)},getChildIndex(i){const e=this.children.indexOf(i);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(i,e){this.allowChildren||we(Le,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${i}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(i.parent){const r=i.parent.children.indexOf(i);if(i.parent===this&&r===e)return i;r!==-1&&i.parent.children.splice(r,1)}e===t.length?t.push(i):t.splice(e,0,i),i.parent=this,i.didChange=!0,i._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,e),i.emit("added",this),i},swapChildren(i,e){if(i===e)return;const t=this.getChildIndex(i),n=this.getChildIndex(e);this.children[t]=e,this.children[n]=i;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(e=>this.reparentChildAt(e,this.children.length)),i[0])},reparentChildAt(i,e){if(i.parent===this)return this.setChildIndex(i,e),i;const t=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,e);const n=this.worldTransform.clone();return n.invert(),t.prepend(n),i.setFromMatrix(t),i},replaceChild(i,e){i.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(i)),e.setFromMatrix(i.localTransform),e.updateLocalTransform(),this.removeChild(i)}},lC={collectRenderables(i,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(i,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,i):this.collectRenderablesWithEffects(i,e,t))},collectRenderablesSimple(i,e,t){const n=this.children,r=n.length;for(let s=0;s<r;s++)n[s].collectRenderables(i,e,t)},collectRenderablesWithEffects(i,e,t){const{renderPipes:n}=e;for(let r=0;r<this.effects.length;r++){const s=this.effects[r];n[s.pipe].push(s,this,i)}this.collectRenderablesSimple(i,e,t);for(let r=this.effects.length-1;r>=0;r--){const s=this.effects[r];n[s.pipe].pop(s,this,i)}}};class k0{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class cC{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const n=this._tests[t];if(n.test(e))return An.get(n.maskClass,e)}return e}returnMaskEffect(e){An.return(e)}}const Nd=new cC;bt.handleByList(pe.MaskEffect,Nd._effectClasses);const uC={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)},addEffect(i){this.effects.indexOf(i)===-1&&(this.effects.push(i),this.effects.sort((t,n)=>t.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(i){const e=this.effects.indexOf(i);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(i){const e=this._maskEffect;e?.mask!==i&&(e&&(this.removeEffect(e),Nd.returnMaskEffect(e),this._maskEffect=null),i!=null&&(this._maskEffect=Nd.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(i){this._maskOptions={...this._maskOptions,...i},i.mask&&(this.mask=i.mask),this._markStructureAsChanged()},set filters(i){!Array.isArray(i)&&i&&(i=[i]);const e=this._filterEffect||(this._filterEffect=new k0);i=i;const t=i?.length>0,n=e.filters?.length>0,r=t!==n;i=Array.isArray(i)?i.slice(0):i,e.filters=Object.freeze(i),r&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=i??null))},get filters(){return this._filterEffect?.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new k0),this._filterEffect.filterArea=i},get filterArea(){return this._filterEffect?.filterArea}},hC={label:null,get name(){return we(Le,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){we(Le,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,e=!1){return this.getChildByLabel(i,e)},getChildByLabel(i,e=!1){const t=this.children;for(let n=0;n<t.length;n++){const r=t[n];if(r.label===i||i instanceof RegExp&&i.test(r.label))return r}if(e)for(let n=0;n<t.length;n++){const s=t[n].getChildByLabel(i,!0);if(s)return s}return null},getChildrenByLabel(i,e=!1,t=[]){const n=this.children;for(let r=0;r<n.length;r++){const s=n[r];(s.label===i||i instanceof RegExp&&i.test(s.label))&&t.push(s)}if(e)for(let r=0;r<n.length;r++)n[r].getChildrenByLabel(i,!0,t);return t}},Nt=An.getPool(be),xr=An.getPool(zn),dC=new be,fC={getFastGlobalBounds(i,e){e||(e=new zn),e.clear(),this._getGlobalBoundsRecursive(!!i,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(i,e,t){let n=e;if(i&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(n=xr.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const l=this.bounds;n.addFrame(l.minX,l.minY,l.maxX,l.maxY,this.groupTransform)}const s=this.children;for(let l=0;l<s.length;l++)s[l]._getGlobalBoundsRecursive(i,n,t)}if(r){let s=!1;const l=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(s||(s=!0,n.applyMatrix(l.worldTransform)),this.effects[c].addBounds(n,!0));s&&n.applyMatrix(l.worldTransform.copyTo(dC).invert()),e.addBounds(n),xr.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),xr.return(n))}};function A_(i,e,t){t.clear();let n,r;return i.parent?e?n=i.parent.worldTransform:(r=Nt.get().identity(),n=kf(i,r)):n=be.IDENTITY,k_(i,t,n,e),r&&Nt.return(r),t.isValid||t.set(0,0,0,0),t}function k_(i,e,t,n){if(!i.visible||!i.measurable)return;let r;n?r=i.worldTransform:(i.updateLocalTransform(),r=Nt.get(),r.appendFrom(i.localTransform,t));const s=e,l=!!i.effects.length;if(l&&(e=xr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,r);else{const c=i.bounds;c&&!c.isEmpty()&&(e.matrix=r,e.addBounds(c));for(let h=0;h<i.children.length;h++)k_(i.children[h],e,r,n)}if(l){for(let c=0;c<i.effects.length;c++)i.effects[c].addBounds?.(e);s.addBounds(e,be.IDENTITY),xr.return(e)}n||Nt.return(r)}function kf(i,e){const t=i.parent;return t&&(kf(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function M_(i,e){if(i===16777215||!e)return e;if(e===16777215||!i)return i;const t=i>>16&255,n=i>>8&255,r=i&255,s=e>>16&255,l=e>>8&255,c=e&255,h=t*s/255|0,d=n*l/255|0,f=r*c/255|0;return(h<<16)+(d<<8)+f}const M0=16777215;function R0(i,e){return i===M0?e:e===M0?i:M_(i,e)}function uc(i){return((i&255)<<16)+(i&65280)+(i>>16&255)}const pC={getGlobalAlpha(i){if(i)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(i=new be,e){if(e)return i.copyFrom(this.worldTransform);this.updateLocalTransform();const t=kf(this,Nt.get().identity());return i.appendFrom(this.localTransform,t),Nt.return(t),i},getGlobalTint(i){if(i)return this.renderGroup?uc(this.renderGroup.worldColor):this.parentRenderGroup?uc(R0(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=R0(e,t.localColor),t=t.parent;return uc(e)}};function R_(i,e,t){return e.clear(),t||(t=be.IDENTITY),I_(i,e,t,i,!0),e.isValid||e.set(0,0,0,0),e}function I_(i,e,t,n,r){let s;if(r)s=Nt.get(),s=t.copyTo(s);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const h=i.localTransform;s=Nt.get(),s.appendFrom(h,t)}const l=e,c=!!i.effects.length;if(c&&(e=xr.get().clear()),i.boundsArea)e.addRect(i.boundsArea,s);else{i.renderPipeId&&(e.matrix=s,e.addBounds(i.bounds));const h=i.children;for(let d=0;d<h.length;d++)I_(h[d],e,s,n,!1)}if(c){for(let h=0;h<i.effects.length;h++)i.effects[h].addLocalBounds?.(e,n);l.addBounds(e,be.IDENTITY),xr.return(e)}Nt.return(s)}function D_(i,e){const t=i.children;for(let n=0;n<t.length;n++){const r=t[n],s=r.uid,l=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,c=e.index;(e.data[c]!==s||e.data[c+1]!==l)&&(e.data[e.index]=s,e.data[e.index+1]=l,e.didChange=!0),e.index=c+2,r.children.length&&D_(r,e)}return e.didChange}const mC=new be,gC={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=i/e*t:this.scale.x=t},_setHeight(i,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=i/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new zn});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),D_(this,i),i.didChange&&R_(this,i.localBounds,mC),i.localBounds},getBounds(i,e){return A_(this,i,e||new zn)}},yC={_onRender:null,set onRender(i){const e=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},_C={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(xC))}};function xC(i,e){return i._zIndex-e._zIndex}const vC={getGlobalPosition(i=new Dt,e=!1){return this.parent?this.parent.toGlobal(this._position,i,e):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,e,t=!1){const n=this.getGlobalTransform(Nt.get(),t);return e=n.apply(i,e),Nt.return(n),e},toLocal(i,e,t,n){e&&(i=e.toGlobal(i,t,n));const r=this.getGlobalTransform(Nt.get(),n);return t=r.applyInverse(i,t),Nt.return(r),t}};class $_{constructor(){this.uid=st("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let SC=0;class wC{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Ds(this.textureOptions)}createTexture(e,t,n){const r=new jn({...this.textureOptions,width:e,height:t,resolution:1,antialias:n,autoGarbageCollect:!1});return new Ae({source:r,label:`texturePool_${SC++}`})}getOptimalTexture(e,t,n=1,r){let s=Math.ceil(e*n-1e-6),l=Math.ceil(t*n-1e-6);s=Is(s),l=Is(l);const c=(s<<17)+(l<<1)+(r?1:0);this._texturePool[c]||(this._texturePool[c]=[]);let h=this._texturePool[c].pop();return h||(h=this.createTexture(s,l,r)),h.source._resolution=n,h.source.width=s/n,h.source.height=l/n,h.source.pixelWidth=s,h.source.pixelHeight=l,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=c,h}getSameSizeTexture(e,t=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,t)}returnTexture(e,t=!1){const n=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const n=this._texturePool[t];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0)}this._texturePool={}}}const L_=new wC;ka.register(L_);class CC{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new be,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new $_,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(L_.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let n=0;n<t.length;n++)this.addChild(t[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let n=0;n<t.length;n++)this.removeChild(t[n])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let n=0;n<t.length;n++)this._getChildren(t[n],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const n=e.children;for(let r=0;r<n.length;r++)this._getChildren(n[r],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new be),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new be),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new be),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function bC(i,e,t={}){for(const n in e)!t[n]&&e[n]!==void 0&&(i[n]=e[n])}const nd=new Ct(null),Yl=new Ct(null),rd=new Ct(null,1,1),Xl=new Ct(null),I0=1,TC=2,id=4;class Qe extends Wn{constructor(e={}){super(),this.uid=st("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new be,this.relativeGroupTransform=new be,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ct(this,0,0),this._scale=rd,this._pivot=Yl,this._origin=Xl,this._skew=nd,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],bC(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){we("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),bt.mixin(Qe,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||we(Le,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const t=e[0],n=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),n&&(n.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,n&&n.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const t=e[0],n=this.children.indexOf(t);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,n),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=An.get(CC,this),this.groupTransform=be.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),An.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new be),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Ow}set angle(e){this.rotation=e*Nw}get pivot(){return this._pivot===Yl&&(this._pivot=new Ct(this,0,0)),this._pivot}set pivot(e){this._pivot===Yl&&(this._pivot=new Ct(this,0,0),this._origin!==Xl&&Ge("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===nd&&(this._skew=new Ct(this,0,0)),this._skew}set skew(e){this._skew===nd&&(this._skew=new Ct(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===rd&&(this._scale=new Ct(this,1,1)),this._scale}set scale(e){this._scale===rd&&(this._scale=new Ct(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Xl&&(this._origin=new Ct(this,0,0)),this._origin}set origin(e){this._origin===Xl&&(this._origin=new Ct(this,0,0),this._pivot!==Yl&&Ge("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const n=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,n.width),t!==void 0&&this._setHeight(t,n.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,n=this._scale,r=this._pivot,s=this._origin,l=this._position,c=n._x,h=n._y,d=r._x,f=r._y,m=-s._x,g=-s._y;t.a=this._cx*c,t.b=this._sx*c,t.c=this._cy*h,t.d=this._sy*h,t.tx=l._x-(d*t.a+f*t.c)+(m*t.a+g*t.c)-m,t.ty=l._y-(d*t.b+f*t.d)+(m*t.b+g*t.d)-g}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=I0,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=ft.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=I0,this._onUpdate())}get tint(){return uc(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=TC,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=id,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=id,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=id,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let r=0;r<t.length;++r)t[r].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}bt.mixin(Qe,aC,fC,vC,yC,gC,uC,hC,_C,nC,sC,pC,lC);class Mf extends Qe{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new zn(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:n,y:r}=e;return n>=t.minX&&n<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null;for(const t in this._gpuData)this._gpuData[t].destroy?.();this._gpuData=null}collectRenderablesSimple(e,t,n){const{renderPipes:r}=t;r.blendMode.pushBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const l=this.children,c=l.length;for(let h=0;h<c;h++)l[h].collectRenderables(e,t,n);r.blendMode.popBlendMode(e)}}class Ls extends Mf{constructor(e=Ae.EMPTY){e instanceof Ae&&(e={texture:e});const{texture:t=Ae.EMPTY,anchor:n,roundPixels:r,width:s,height:l,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ct({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),l!==void 0&&(this.height=l)}static from(e,t=!1){return e instanceof Ae?new Ls(e):new Ls(Ae.from(e,t))}set texture(e){e||(e=Ae.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Vw(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return we("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,n=this._bounds,{width:r,height:s}=t.orig;n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const PC=new zn;function B_(i,e,t){const n=PC;i.measurable=!0,A_(i,t,n),e.addBoundsMask(n),i.measurable=!1}function F_(i,e,t){const n=xr.get();i.measurable=!0;const r=Nt.get().identity(),s=O_(i,t,r);R_(i,n,s),i.measurable=!1,e.addBoundsMask(n),Nt.return(r),xr.return(n)}function O_(i,e,t){return i?(i!==e&&(O_(i.parent,e,t),i.updateLocalTransform(),t.append(i.localTransform)),t):(Ge("Mask bounds, renderable is not inside the root container"),t)}class N_{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Ls),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||B_(this.mask,e,t)}addLocalBounds(e,t){F_(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof Ls}}N_.extension=pe.MaskEffect;class H_{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}H_.extension=pe.MaskEffect;class z_{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){B_(this.mask,e,t)}addLocalBounds(e,t){F_(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof Qe}}z_.extension=pe.MaskEffect;const EC={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let D0=EC;const He={get(){return D0},set(i){D0=i}};class W_ extends jn{constructor(e){e.resource||(e.resource=He.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,n=this._resolution){const r=super.resize(e,t,n);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}W_.extension=pe.TextureSource;class Li extends jn{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Li.extension=pe.TextureSource;var Hd=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Hd||{});class sd{constructor(e,t=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=n,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const j_=class sn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new sd(null,null,1/0),this.deltaMS=1/sn.targetFPMS,this.elapsedMS=1/sn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=Hd.NORMAL){return this._addListener(new sd(e,t,n))}addOnce(e,t,n=Hd.NORMAL){return this._addListener(new sd(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*sn.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,sn.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!sn._shared){const e=sn._shared=new sn;e.autoStart=!0,e._protected=!0}return sn._shared}static get system(){if(!sn._system){const e=sn._system=new sn;e.autoStart=!0,e._protected=!0}return sn._system}};j_.targetFPMS=.06;let Ql=j_,od;async function G_(){return od??(od=(async()=>{const e=He.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(l=>{const c=document.createElement("video");c.onloadeddata=()=>l(c),c.onerror=()=>l(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!t)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(r),e.deleteTexture(n),e.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),od}const Nc=class U_ extends jn{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...U_.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Ql.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await G_(),this._load=new Promise((n,r)=>{this.isValid?n(this):(this._resolve=n,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ql.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ql.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ql.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Nc.extension=pe.TextureSource;Nc.defaultOptions={...jn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Nc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let sa=Nc;const Nn=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(n=>typeof n=="string"||t?e(n):n):i);class AC{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ge(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Nn(e);let r;for(let h=0;h<this.parsers.length;h++){const d=this.parsers[h];if(d.test(t)){r=d.getCacheableAssets(n,t);break}}const s=new Map(Object.entries(r||{}));r||n.forEach(h=>{s.set(h,t)});const l=[...s.keys()],c={cacheKeys:l,keys:n};n.forEach(h=>{this._cacheMap.set(h,c)}),l.forEach(h=>{const d=r?r[h]:t;this._cache.has(h)&&this._cache.get(h)!==d&&Ge("[Cache] already has key:",h),this._cache.set(h,s.get(h))})}remove(e){if(!this._cacheMap.has(e)){Ge(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const je=new AC,zd=[];bt.handleByList(pe.TextureSource,zd);function V_(i={}){const e=i&&i.resource,t=e?i.resource:i,n=e?i:{resource:i};for(let r=0;r<zd.length;r++){const s=zd[r];if(s.test(t))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function kC(i={},e=!1){const t=i&&i.resource,n=t?i.resource:i,r=t?i:{resource:i};if(!e&&je.has(n))return je.get(n);const s=new Ae({source:V_(r)});return s.on("destroy",()=>{je.has(n)&&je.remove(n)}),e||je.set(n,s),s}function MC(i,e=!1){return typeof i=="string"?je.get(i):i instanceof jn?new Ae({source:i}):kC(i,e)}Ae.from=MC;jn.from=V_;bt.add(N_,H_,z_,sa,Li,W_,Af);var ri=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(ri||{});function Fn(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Oo(i){return i.split("?")[0].split("#")[0]}function RC(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function IC(i,e,t){return i.replace(new RegExp(RC(e),"g"),t)}function DC(i,e){let t="",n=0,r=-1,s=0,l=-1;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(l===47)break;l=47}if(l===47){if(!(r===c-1||s===1))if(r!==c-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",n=0):(t=t.slice(0,h),n=t.length-1-t.lastIndexOf("/")),r=c,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,r=c,s=0;continue}}}else t.length>0?t+=`/${i.slice(r+1,c)}`:t=i.slice(r+1,c),n=c-r-1;r=c,s=0}else l===46&&s!==-1?++s:s=-1}return t}const cn={toPosix(i){return IC(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){Fn(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(Fn(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const n=Oo(this.toPosix(e??He.get().getBaseUrl())),r=Oo(this.toPosix(t??this.rootname(n)));return i=this.toPosix(i),i.startsWith("/")?cn.join(r,i.slice(1)):this.isAbsolute(i)?i:this.join(n,i)},normalize(i){if(Fn(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const n=i.endsWith("/");return i=DC(i),i.length>0&&n&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return Fn(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];if(Fn(n),n.length>0)if(e===void 0)e=n;else{const r=i[t-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(Fn(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let n=-1,r=!0;const s=this.getProtocol(i),l=i;i=i.slice(s.length);for(let c=i.length-1;c>=1;--c)if(e=i.charCodeAt(c),e===47){if(!r){n=c;break}}else r=!1;return n===-1?t?"/":this.isUrl(l)?s+i:s:t&&n===1?"//":s+i.slice(0,n)},rootname(i){Fn(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){Fn(i),e&&Fn(e),i=Oo(this.toPosix(i));let t=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let l=e.length-1,c=-1;for(s=i.length-1;s>=0;--s){const h=i.charCodeAt(s);if(h===47){if(!r){t=s+1;break}}else c===-1&&(r=!1,c=s+1),l>=0&&(h===e.charCodeAt(l)?--l===-1&&(n=s):(l=-1,n=c))}return t===n?n=c:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){Fn(i),i=Oo(this.toPosix(i));let e=-1,t=0,n=-1,r=!0,s=0;for(let l=i.length-1;l>=0;--l){const c=i.charCodeAt(l);if(c===47){if(!r){t=l+1;break}continue}n===-1&&(r=!1,n=l+1),c===46?e===-1?e=l:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":i.slice(e,n)},parse(i){Fn(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Oo(this.toPosix(i));let t=i.charCodeAt(0);const n=this.isAbsolute(i);let r;e.root=this.rootname(i),n||this.hasProtocol(i)?r=1:r=0;let s=-1,l=0,c=-1,h=!0,d=i.length-1,f=0;for(;d>=r;--d){if(t=i.charCodeAt(d),t===47){if(!h){l=d+1;break}continue}c===-1&&(h=!1,c=d+1),t===46?s===-1?s=d:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||c===-1||f===0||f===1&&s===c-1&&s===l+1?c!==-1&&(l===0&&n?e.base=e.name=i.slice(1,c):e.base=e.name=i.slice(l,c)):(l===0&&n?(e.name=i.slice(1,s),e.base=i.slice(1,c)):(e.name=i.slice(l,s),e.base=i.slice(l,c)),e.ext=i.slice(s,c)),e.dir=this.dirname(i),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function q_(i,e,t,n,r){const s=e[t];for(let l=0;l<s.length;l++){const c=s[l];t<e.length-1?q_(i.replace(n[t],c),e,t+1,n,r):r.push(i.replace(n[t],c))}}function $C(i){const e=/\{(.*?)\}/g,t=i.match(e),n=[];if(t){const r=[];t.forEach(s=>{const l=s.substring(1,s.length-1).split(",");r.push(l)}),q_(i,r,0,t,n)}else n.push(i);return n}const xc=i=>!Array.isArray(i);class Ys{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,src:n}=e;return Nn(t||n,s=>typeof s=="string"?s:Array.isArray(s)?s.map(l=>l?.src??l):s?.src?s.src:s,!0)}addManifest(e){this._manifest&&Ge("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];let r=t;Array.isArray(t)||(r=Object.entries(t).map(([s,l])=>typeof l=="string"||Array.isArray(l)?{alias:s,src:l}:{alias:s,...l})),r.forEach(s=>{const l=s.src,c=s.alias;let h;if(typeof c=="string"){const d=this._createBundleAssetId(e,c);n.push(d),h=[c,d]}else{const d=c.map(f=>this._createBundleAssetId(e,f));n.push(...d),h=[...c,...d]}this.add({...s,alias:h,src:l})}),this._bundles[e]=n}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let n;n=s=>{this.hasKey(s)&&Ge(`[Resolver] already has key: ${s} overwriting`)},Nn(t).forEach(s=>{const{src:l}=s;let{data:c,format:h,loadParser:d,parser:f}=s;const m=Nn(l).map(v=>typeof v=="string"?$C(v):Array.isArray(v)?v:[v]),g=this.getAlias(s);Array.isArray(g)?g.forEach(n):n(g);const y=[];m.forEach(v=>{v.forEach(x=>{let S={};if(typeof x!="object"){S.src=x;for(let C=0;C<this._parsers.length;C++){const b=this._parsers[C];if(b.test(x)){S=b.parse(x);break}}}else c=x.data??c,h=x.format??h,(x.loadParser||x.parser)&&(d=x.loadParser??d,f=x.parser??f),S={...S,...x};if(!g)throw new Error(`[Resolver] alias is undefined for this asset: ${S.src}`);S=this._buildResolvedAsset(S,{aliases:g,data:c,format:h,loadParser:d,parser:f,progressSize:s.progressSize}),y.push(S)})}),g.forEach(v=>{this._assetMap[v]=y})})}resolveBundle(e){const t=xc(e);e=Nn(e);const n={};return e.forEach(r=>{const s=this._bundles[r];if(s){const l=this.resolve(s),c={};for(const h in l){const d=l[h];c[this._extractAssetIdFromBundle(r,h)]=d}n[r]=c}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const r in t)n[r]=t[r].src;return n}return t.src}resolve(e){const t=xc(e);e=Nn(e);const n={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const l=this._getPreferredOrder(s);l?.priority.forEach(c=>{l.params[c].forEach(h=>{const d=s.filter(f=>f[c]?f[c]===h:!1);d.length&&(s=d)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});n[r]=this._resolverHash[r]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[t],r=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:n,data:r,loadParser:s,parser:l,format:c,progressSize:h}=t;return(this._basePath||this._rootPath)&&(e.src=cn.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=s??e.loadParser,e.parser=l??e.parser,e.format=c??e.format??LC(e.src),h!==void 0&&(e.progressSize=h),e}}Ys.RETINA_PREFIX=/@([0-9\.]+)x/;function LC(i){return i.split(".").pop().split("?").shift().split("#").shift()}const Wd=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i},Y_=class Xo{constructor(e,t){this.linkedSheets=[];let n=e;e?.source instanceof jn&&(n={texture:e,data:t});const{texture:r,data:s,cachePrefix:l=""}=n;this.cachePrefix=l,this._texture=r instanceof Ae?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=s;const c=parseFloat(s.meta.scale);c?(this.resolution=c,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Xo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=Xo.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const r=this._frameKeys[t],s=this._frames[r],l=s.frame;if(l){let c=null,h=null;const d=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new qe(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);s.rotated?c=new qe(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):c=new qe(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new qe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[r]=new Ae({source:this.textureSource,frame:c,orig:f,trim:h,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const r=e[t][n];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Xo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Xo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Y_.BATCH_SIZE=1e3;let $0=Y_;const BC=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function X_(i,e,t){const n={};if(i.forEach(r=>{n[r]=e}),Object.keys(e.textures).forEach(r=>{n[`${e.cachePrefix}${r}`]=e.textures[r]}),!t){const r=cn.dirname(i[0]);e.linkedSheets.forEach((s,l)=>{const c=X_([`${r}/${e.data.meta.related_multi_packs[l]}`],s,!0);Object.assign(n,c)})}return n}const FC={extension:pe.Asset,cache:{test:i=>i instanceof $0,getCacheableAssets:(i,e)=>X_(i,e,!1)},resolver:{extension:{type:pe.ResolveParser,name:"resolveSpritesheet"},test:i=>{const t=i.split("?")[0].split("."),n=t.pop(),r=t.pop();return n==="json"&&BC.includes(r)},parse:i=>{const e=i.split(".");return{resolution:parseFloat(Ys.RETINA_PREFIX.exec(i)?.[1]??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:pe.LoadParser,priority:ri.Normal,name:"spritesheetLoader"},async testParse(i,e){return cn.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){const{texture:n,imageFilename:r,textureOptions:s,cachePrefix:l}=e?.data??{};let c=cn.dirname(e.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let h;if(n instanceof Ae)h=n;else{const m=Wd(c+(r??i.meta.image),e.src);h=(await t.load([{src:m,data:s}]))[m]}const d=new $0({texture:h.source,data:i,cachePrefix:l});await d.parse();const f=i?.meta?.related_multi_packs;if(Array.isArray(f)){const m=[];for(const y of f){if(typeof y!="string")continue;let v=c+y;e.data?.ignoreMultiPack||(v=Wd(v,e.src),m.push(t.load({src:v,data:{textureOptions:s,ignoreMultiPack:!0}})))}const g=await Promise.all(m);d.linkedSheets=g,g.forEach(y=>{y.linkedSheets=[d].concat(d.linkedSheets.filter(v=>v!==y))})}return d},async unload(i,e,t){await t.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};bt.add(FC);const ad=Object.create(null),L0=Object.create(null);function Rf(i,e){let t=L0[i];return t===void 0&&(ad[e]===void 0&&(ad[e]=1),L0[i]=t=ad[e]++),t}let Kl;function Q_(){return(!Kl||Kl?.isContextLost())&&(Kl=He.get().createCanvas().getContext("webgl",{})),Kl}let Zl;function OC(){if(!Zl){Zl="mediump";const i=Q_();i&&i.getShaderPrecisionFormat&&(Zl=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Zl}function NC(i,e,t){return e?i:t?(i=i.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function HC(i,e,t){const n=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let r=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&n!=="highp"&&(r="mediump"),`precision ${r} float;
${i}`}else if(n!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function zC(i,e){return e?`#version 300 es
${i}`:i}const WC={},jC={};function GC(i,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const n=t?WC:jC;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${e}`}
${i}`}function UC(i,e){return e?i.replace("#version 300 es",""):i}const ld={stripVersion:UC,ensurePrecision:HC,addProgramDefines:NC,setProgramName:GC,insertVersion:zC},No=Object.create(null),K_=class jd{constructor(e){e={...jd.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:OC()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let r=e.fragment,s=e.vertex;Object.keys(ld).forEach(l=>{const c=n[l];r=ld[l](r,c,!0),s=ld[l](s,c,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Rf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,No[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return No[t]||(No[t]=new jd(e),No[t]._cacheKey=t),No[t]}};K_.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Z_=K_;const B0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function VC(i){return B0[i]??B0.float32}const qC={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function YC({source:i,entryPoint:e}){const t={},n=i.indexOf(`fn ${e}`);if(n!==-1){const r=i.indexOf("->",n);if(r!==-1){const s=i.substring(n,r),l=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let c;for(;(c=l.exec(s))!==null;){const h=qC[c[3]]??"float32";t[c[2]]={location:parseInt(c[1],10),format:h,stride:VC(h).stride,offset:0,instance:!1,start:0}}}}return t}function cd(i){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,h=/struct\s+(\w+)/,d=i.match(e)?.map(m=>({group:parseInt(m.match(t)[1],10),binding:parseInt(m.match(n)[1],10),name:m.match(r)[2],isUniform:m.match(r)[1]==="<uniform>",type:m.match(s)[1]}));if(!d)return{groups:[],structs:[]};const f=i.match(l)?.map(m=>{const g=m.match(h)[1],y=m.match(c).reduce((v,x)=>{const[S,C]=x.split(":");return v[S.trim()]=C.trim(),v},{});return y?{name:g,members:y}:null}).filter(({name:m})=>d.some(g=>g.type===m))??[];return{groups:d,structs:f}}var Qo=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(Qo||{});function XC({groups:i}){const e=[];for(let t=0;t<i.length;t++){const n=i[t];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:Qo.VERTEX|Qo.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:Qo.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:Qo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function QC({groups:i}){const e=[];for(let t=0;t<i.length;t++){const n=i[t];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function KC(i,e){const t=new Set,n=new Set,r=[...i.structs,...e.structs].filter(l=>t.has(l.name)?!1:(t.add(l.name),!0)),s=[...i.groups,...e.groups].filter(l=>{const c=`${l.name}-${l.binding}`;return n.has(c)?!1:(n.add(c),!0)});return{structs:r,groups:s}}const Ho=Object.create(null);class Hc{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:n,layout:r,gpuLayout:s,name:l}=e;if(this.name=l,this.fragment=t,this.vertex=n,t.source===n.source){const c=cd(t.source);this.structsAndGroups=c}else{const c=cd(n.source),h=cd(t.source);this.structsAndGroups=KC(c,h)}this.layout=r??QC(this.structsAndGroups),this.gpuLayout=s??XC(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,n=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Rf(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=YC(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Ho[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Ho[t]||(Ho[t]=new Hc(e),Ho[t]._cacheKey=t),Ho[t]}}const J_=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],ZC=J_.reduce((i,e)=>(i[e]=!0,i),{});function JC(i,e){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ex=class tx{constructor(e,t){this._touched=0,this.uid=st("uniform"),this._resourceType="uniformGroup",this._resourceId=st("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...tx.defaultOptions,...t},this.uniformStructures=e;const n={};for(const r in e){const s=e[r];if(s.name=r,s.size=s.size??1,!ZC[s.type]){const l=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(l){const[,c,h]=l;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${c}', size: ${h} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${J_.join(", ")}`)}s.value??(s.value=JC(s.type,s.size)),n[r]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Rf(Object.keys(n).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};ex.defaultOptions={ubo:!1,isStatic:!1};let nx=ex;class hc{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const n in e){const r=e[n];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const n in this.resources)e[t++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,t){const n=this.resources[t];e!==n&&(n&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const t=this.resources;for(const n in t)t[n]._touched=e}destroy(){const e=this.resources;for(const t in e)e[t]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const n in t)t[n]===e&&(t[n]=null)}else this._updateKey()}}var Gd=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(Gd||{});class If extends Wn{constructor(e){super(),this.uid=st("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:n,groups:r,resources:s,compatibleRenderers:l,groupMap:c}=e;this.gpuProgram=t,this.glProgram=n,l===void 0&&(l=0,t&&(l|=Gd.WEBGPU),n&&(l|=Gd.WEBGL)),this.compatibleRenderers=l;const h={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&r&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&r&&c)for(const d in c)for(const f in c[d]){const m=c[d][f];h[m]={group:d,binding:f,name:m}}else if(t&&r&&!c){const d=t.structsAndGroups.groups;c={},d.forEach(f=>{c[f.group]=c[f.group]||{},c[f.group][f.binding]=f.name,h[f.name]=f})}else if(s){r={},c={},t&&t.structsAndGroups.groups.forEach(m=>{c[m.group]=c[m.group]||{},c[m.group][m.binding]=m.name,h[m.name]=m});let d=0;for(const f in s)h[f]||(r[99]||(r[99]=new hc,this._ownedBindGroups.push(r[99])),h[f]={group:99,binding:d,name:f},c[99]=c[99]||{},c[99][d]=f,d++);for(const f in s){const m=f;let g=s[f];!g.source&&!g._resourceType&&(g=new nx(g));const y=h[m];y&&(r[y.group]||(r[y.group]=new hc,this._ownedBindGroups.push(r[y.group])),r[y.group].setResource(g,y.binding))}}this.groups=r,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(r,h)}addResource(e,t,n){var r,s;(r=this._uniformBindMap)[t]||(r[t]={}),(s=this._uniformBindMap[t])[n]||(s[n]=e),this.groups[t]||(this.groups[t]=new hc,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const n={};for(const r in t){const s=t[r];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(l){e[s.group].setResource(l,s.binding)}})}return n}destroy(e=!1){this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:t,gl:n,...r}=e;let s,l;return t&&(s=Hc.from(t)),n&&(l=Z_.from(n)),new If({gpuProgram:s,glProgram:l,...r})}}const Ud=[];bt.handleByNamedList(pe.Environment,Ud);async function eb(i){if(!i)for(let e=0;e<Ud.length;e++){const t=Ud[e];if(t.value.test()){await t.value.load();return}}}let zo;function tb(){if(typeof zo=="boolean")return zo;try{zo=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{zo=!1}return zo}function F0(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=rx(i,0,r,t,!0);const l=[];if(!s||s.next===s.prev)return l;let c,h,d;if(n&&(s=ob(i,e,s,t)),i.length>80*t){c=i[0],h=i[1];let f=c,m=h;for(let g=t;g<r;g+=t){const y=i[g],v=i[g+1];y<c&&(c=y),v<h&&(h=v),y>f&&(f=y),v>m&&(m=v)}d=Math.max(f-c,m-h),d=d!==0?32767/d:0}return fa(s,l,t,c,h,d,0),l}function rx(i,e,t,n,r){let s;if(r===yb(i,e,t,n)>0)for(let l=e;l<t;l+=n)s=O0(l/n|0,i[l],i[l+1],s);else for(let l=t-n;l>=e;l-=n)s=O0(l/n|0,i[l],i[l+1],s);return s&&Bs(s,s.next)&&(ma(s),s=s.next),s}function Bi(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Bs(t,t.next)||Je(t.prev,t,t.next)===0)){if(ma(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function fa(i,e,t,n,r,s,l){if(!i)return;!l&&s&&hb(i,n,r,s);let c=i;for(;i.prev!==i.next;){const h=i.prev,d=i.next;if(s?rb(i,n,r,s):nb(i)){e.push(h.i,i.i,d.i),ma(i),i=d.next,c=d.next;continue}if(i=d,i===c){l?l===1?(i=ib(Bi(i),e),fa(i,e,t,n,r,s,2)):l===2&&sb(i,e,t,n,r,s):fa(Bi(i),e,t,n,r,s,1);break}}}function nb(i){const e=i.prev,t=i,n=i.next;if(Je(e,t,n)>=0)return!1;const r=e.x,s=t.x,l=n.x,c=e.y,h=t.y,d=n.y,f=Math.min(r,s,l),m=Math.min(c,h,d),g=Math.max(r,s,l),y=Math.max(c,h,d);let v=n.next;for(;v!==e;){if(v.x>=f&&v.x<=g&&v.y>=m&&v.y<=y&&Ko(r,c,s,h,l,d,v.x,v.y)&&Je(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function rb(i,e,t,n){const r=i.prev,s=i,l=i.next;if(Je(r,s,l)>=0)return!1;const c=r.x,h=s.x,d=l.x,f=r.y,m=s.y,g=l.y,y=Math.min(c,h,d),v=Math.min(f,m,g),x=Math.max(c,h,d),S=Math.max(f,m,g),C=Vd(y,v,e,t,n),b=Vd(x,S,e,t,n);let P=i.prevZ,E=i.nextZ;for(;P&&P.z>=C&&E&&E.z<=b;){if(P.x>=y&&P.x<=x&&P.y>=v&&P.y<=S&&P!==r&&P!==l&&Ko(c,f,h,m,d,g,P.x,P.y)&&Je(P.prev,P,P.next)>=0||(P=P.prevZ,E.x>=y&&E.x<=x&&E.y>=v&&E.y<=S&&E!==r&&E!==l&&Ko(c,f,h,m,d,g,E.x,E.y)&&Je(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;P&&P.z>=C;){if(P.x>=y&&P.x<=x&&P.y>=v&&P.y<=S&&P!==r&&P!==l&&Ko(c,f,h,m,d,g,P.x,P.y)&&Je(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;E&&E.z<=b;){if(E.x>=y&&E.x<=x&&E.y>=v&&E.y<=S&&E!==r&&E!==l&&Ko(c,f,h,m,d,g,E.x,E.y)&&Je(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function ib(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Bs(n,r)&&sx(n,t,t.next,r)&&pa(n,r)&&pa(r,n)&&(e.push(n.i,t.i,r.i),ma(t),ma(t.next),t=i=r),t=t.next}while(t!==i);return Bi(t)}function sb(i,e,t,n,r,s){let l=i;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&pb(l,c)){let h=ox(l,c);l=Bi(l,l.next),h=Bi(h,h.next),fa(l,e,t,n,r,s,0),fa(h,e,t,n,r,s,0);return}c=c.next}l=l.next}while(l!==i)}function ob(i,e,t,n){const r=[];for(let s=0,l=e.length;s<l;s++){const c=e[s]*n,h=s<l-1?e[s+1]*n:i.length,d=rx(i,c,h,n,!1);d===d.next&&(d.steiner=!0),r.push(fb(d))}r.sort(ab);for(let s=0;s<r.length;s++)t=lb(r[s],t);return t}function ab(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function lb(i,e){const t=cb(i,e);if(!t)return e;const n=ox(t,i);return Bi(n,n.next),Bi(t,t.next)}function cb(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,l;if(Bs(i,t))return t;do{if(Bs(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const m=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>s&&(s=m,l=t.x<t.next.x?t:t.next,m===n))return l}t=t.next}while(t!==e);if(!l)return null;const c=l,h=l.x,d=l.y;let f=1/0;t=l;do{if(n>=t.x&&t.x>=h&&n!==t.x&&ix(r<d?n:s,r,h,d,r<d?s:n,r,t.x,t.y)){const m=Math.abs(r-t.y)/(n-t.x);pa(t,i)&&(m<f||m===f&&(t.x>l.x||t.x===l.x&&ub(l,t)))&&(l=t,f=m)}t=t.next}while(t!==c);return l}function ub(i,e){return Je(i.prev,i,e.prev)<0&&Je(e.next,i,i.next)<0}function hb(i,e,t,n){let r=i;do r.z===0&&(r.z=Vd(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,db(r)}function db(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let l=n,c=0;for(let d=0;d<t&&(c++,l=l.nextZ,!!l);d++);let h=t;for(;c>0||h>0&&l;)c!==0&&(h===0||!l||n.z<=l.z)?(r=n,n=n.nextZ,c--):(r=l,l=l.nextZ,h--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=l}s.nextZ=null,t*=2}while(e>1);return i}function Vd(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function fb(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function ix(i,e,t,n,r,s,l,c){return(r-l)*(e-c)>=(i-l)*(s-c)&&(i-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(s-c)>=(r-l)*(n-c)}function Ko(i,e,t,n,r,s,l,c){return!(i===l&&e===c)&&ix(i,e,t,n,r,s,l,c)}function pb(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!mb(i,e)&&(pa(i,e)&&pa(e,i)&&gb(i,e)&&(Je(i.prev,i,e.prev)||Je(i,e.prev,e))||Bs(i,e)&&Je(i.prev,i,i.next)>0&&Je(e.prev,e,e.next)>0)}function Je(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Bs(i,e){return i.x===e.x&&i.y===e.y}function sx(i,e,t,n){const r=ec(Je(i,e,t)),s=ec(Je(i,e,n)),l=ec(Je(t,n,i)),c=ec(Je(t,n,e));return!!(r!==s&&l!==c||r===0&&Jl(i,t,e)||s===0&&Jl(i,n,e)||l===0&&Jl(t,i,n)||c===0&&Jl(t,e,n))}function Jl(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function ec(i){return i>0?1:i<0?-1:0}function mb(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&sx(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function pa(i,e){return Je(i.prev,i,i.next)<0?Je(i,e,i.next)>=0&&Je(i,i.prev,e)>=0:Je(i,e,i.prev)<0||Je(i,i.next,e)<0}function gb(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function ox(i,e){const t=qd(i.i,i.x,i.y),n=qd(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function O0(i,e,t,n){const r=qd(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ma(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function qd(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function yb(i,e,t,n){let r=0;for(let s=e,l=t-n;s<t;s+=n)r+=(i[l]-i[s])*(i[s+1]+i[l+1]),l=s;return r}const _b=F0.default||F0;var ax=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(ax||{});class xb{constructor(e){this.items=[],this._name=e}emit(e,t,n,r,s,l,c,h){const{name:d,items:f}=this;for(let m=0,g=f.length;m<g;m++)f[m][d](e,t,n,r,s,l,c,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const vb=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],lx=class cx extends Wn{constructor(e){super(),this.uid=st("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...vb,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await eb(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...cx.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,t){let n=e;if(n instanceof Qe&&(n={container:n},t&&(we(Le,"passing a second argument is deprecated, please use render options instead"),n.target=t.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const r=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=r?n.clearColor:ft.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,t,n){const r=this.view.resolution;this.view.resize(e,t,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==r&&this.runners.resolutionChange.emit(n)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=ax.ALL);const{clear:n,clearColor:r,target:s}=e;ft.shared.setValue(r??this.background.colorRgba),t.renderTarget.clear(s,n,ft.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new xb(t)})}_addSystems(e){let t;for(t in e){const n=e[t];this._addSystem(n.value,n.name)}}_addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const r in this.runners)this.runners[r].add(n);return this}_addPipes(e,t){const n=t.reduce((r,s)=>(r[s.name]=s.value,r),{});e.forEach(r=>{const s=r.value,l=r.name,c=n[l];this.renderPipes[l]=new s(this,c?new c:null),this.runners.destroy.add(this.renderPipes[l])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ka.release(),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!tb())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};lx.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let ux=lx,tc;function Sb(i){return tc!==void 0||(tc=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:i??ux.defaultOptions.failIfMajorPerformanceCaveat};try{if(!He.get().getWebGLRenderingContext())return!1;let n=He.get().createCanvas().getContext("webgl",e);const r=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,r}catch{return!1}})()),tc}let nc;async function wb(i={}){return nc!==void 0||(nc=await(async()=>{const e=He.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),nc}const N0=["webgl","webgpu","canvas"];async function Cb(i){let e=[];i.preference?(e.push(i.preference),N0.forEach(s=>{s!==i.preference&&e.push(s)})):e=N0.slice();let t,n={};for(let s=0;s<e.length;s++){const l=e[s];if(l==="webgpu"&&await wb()){const{WebGPURenderer:c}=await Rs(async()=>{const{WebGPURenderer:h}=await import("./WebGPURenderer-BpLjSB8l.js");return{WebGPURenderer:h}},__vite__mapDeps([3,2,4]));t=c,n={...i,...i.webgpu};break}else if(l==="webgl"&&Sb(i.failIfMajorPerformanceCaveat??ux.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:c}=await Rs(async()=>{const{WebGLRenderer:h}=await import("./WebGLRenderer-B9E3FF5d.js");return{WebGLRenderer:h}},__vite__mapDeps([5,2,4]));t=c,n={...i,...i.webgl};break}else if(l==="canvas")throw n={...i},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!t)throw new Error("No available renderer for the current environment");const r=new t;return await r.init(n),r}const hx="8.14.1";class dx{static init(){globalThis.__PIXI_APP_INIT__?.(this,hx)}static destroy(){}}dx.extension=pe.Application;class bb{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,hx)}destroy(){this._renderer=null}}bb.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"initHook",priority:-10};const fx=class Yd{constructor(...e){this.stage=new Qe,e[0]!==void 0&&we(Le,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await Cb(e),Yd._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return we(Le,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const n=Yd._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};fx._plugins=[];let px=fx;bt.handleByList(pe.Application,px._plugins);bt.add(dx);class mx extends Wn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return we(Le,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return we(Le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return we(Le,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return we(Le,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return we(Le,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}class Tb{constructor(e=0,t=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=[];let t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,n=this.resetTtl){let r=null;if(this.has(e))this.set(e,t,!0,n);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=s:this.last.next=s,this.last=s}return r}set(e,t,n=!1,r=this.resetTtl){let s=this.items[e];return n||s!==void 0?(s.value=t,n===!1&&r&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=s:this.last.next=s,this.last=s),this}values(e=this.keys()){return e.map(t=>this.get(t))}}function gx(i=1e3,e=0,t=!1){if(isNaN(i)||i<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new Tb(i,e,t)}const Pb=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function vc(i){const e=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let t=i.fontFamily;Array.isArray(i.fontFamily)||(t=i.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!Pb.includes(r)&&(r=`"${r}"`),t[n]=r}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${e} ${t.join(",")}`}const ud={willReadFrequently:!0},Gn=class de{static get experimentalLetterSpacingSupported(){let e=de._experimentalLetterSpacingSupported;if(e===void 0){const t=He.get().getCanvasRenderingContext2D().prototype;e=de._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,r,s,l,c,h,d){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=s,this.lineWidths=l,this.lineHeight=c,this.maxLineWidth=h,this.fontProperties=d}static measureText(e=" ",t,n=de._canvas,r=t.wordWrap){const s=`${e}-${t.styleKey}-wordWrap-${r}`;if(de._measurementCache.has(s))return de._measurementCache.get(s);const l=vc(t),c=de.measureFont(l);c.fontSize===0&&(c.fontSize=t.fontSize,c.ascent=t.fontSize);const h=de.__context;h.font=l;const f=(r?de._wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),m=new Array(f.length);let g=0;for(let b=0;b<f.length;b++){const P=de._measureText(f[b],t.letterSpacing,h);m[b]=P,g=Math.max(g,P)}const y=t._stroke?.width||0;let v=g+y;t.dropShadow&&(v+=t.dropShadow.distance);const x=t.lineHeight||c.fontSize;let S=Math.max(x,c.fontSize+y)+(f.length-1)*(x+t.leading);t.dropShadow&&(S+=t.dropShadow.distance);const C=new de(e,t,v,S,f,m,x+t.leading,g,c);return de._measurementCache.set(s,C),C}static _measureText(e,t,n){let r=!1;de.experimentalLetterSpacingSupported&&(de.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let l=s.width;const c=-s.actualBoundingBoxLeft;let d=s.actualBoundingBoxRight-c;if(l>0)if(r)l-=t,d-=t;else{const f=(de.graphemeSegmenter(e).length-1)*t;l+=f,d+=f}return Math.max(l,d)}static _wordWrap(e,t,n=de._canvas){const r=n.getContext("2d",ud);let s=0,l="",c="";const h=Object.create(null),{letterSpacing:d,whiteSpace:f}=t,m=de._collapseSpaces(f),g=de._collapseNewlines(f);let y=!m;const v=t.wordWrapWidth+d,x=de._tokenize(e);for(let S=0;S<x.length;S++){let C=x[S];if(de._isNewline(C)){if(!g){c+=de._addLine(l),y=!m,l="",s=0;continue}C=" "}if(m){const P=de.isBreakingSpace(C),E=de.isBreakingSpace(l[l.length-1]);if(P&&E)continue}const b=de._getFromCache(C,d,h,r);if(b>v)if(l!==""&&(c+=de._addLine(l),l="",s=0),de.canBreakWords(C,t.breakWords)){const P=de.wordWrapSplit(C);for(let E=0;E<P.length;E++){let A=P[E],M=A,k=1;for(;P[E+k];){const D=P[E+k];if(!de.canBreakChars(M,D,C,E,t.breakWords))A+=D;else break;M=D,k++}E+=k-1;const $=de._getFromCache(A,d,h,r);$+s>v&&(c+=de._addLine(l),y=!1,l="",s=0),l+=A,s+=$}}else{l.length>0&&(c+=de._addLine(l),l="",s=0);const P=S===x.length-1;c+=de._addLine(C,!P),y=!1,l="",s=0}else b+s>v&&(y=!1,c+=de._addLine(l),l="",s=0),(l.length>0||!de.isBreakingSpace(C)||y)&&(l+=C,s+=b)}return c+=de._addLine(l,!1),c}static _addLine(e,t=!0){return e=de._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,n,r){let s=n[e];return typeof s!="number"&&(s=de._measureText(e,t,r)+t,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!de.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:de._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:de._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){const s=e[r],l=e[r+1];if(de.isBreakingSpace(s,l)||de._isNewline(s)){n!==""&&(t.push(n),n=""),s==="\r"&&l===`
`?(t.push(`\r
`),r++):t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,r,s){return!0}static wordWrapSplit(e){return de.graphemeSegmenter(e)}static measureFont(e){if(de._fonts[e])return de._fonts[e];const t=de._context;t.font=e;const n=t.measureText(de.METRICS_STRING+de.BASELINE_SYMBOL),r={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return de._fonts[e]=r,r}static clearMetrics(e=""){e?delete de._fonts[e]:de._fonts={}}static get _canvas(){if(!de.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",ud)?.measureText)return de.__canvas=t,t;e=He.get().createCanvas()}catch{e=He.get().createCanvas()}e.width=e.height=10,de.__canvas=e}return de.__canvas}static get _context(){return de.__context||(de.__context=de._canvas.getContext("2d",ud)),de.__context}};Gn.METRICS_STRING="|q";Gn.BASELINE_SYMBOL="M";Gn.BASELINE_MULTIPLIER=1.4;Gn.HEIGHT_MULTIPLIER=2;Gn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const i=new Intl.Segmenter;return e=>{const t=i.segment(e),n=[];let r=0;for(const s of t)n[r++]=s.segment;return n}}return i=>[...i]})();Gn.experimentalLetterSpacing=!1;Gn._fonts={};Gn._newlines=[10,13];Gn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Gn._measurementCache=gx(1e3);let tr=Gn;const H0=[{offset:0,color:"white"},{offset:1,color:"black"}],Df=class Xd{constructor(...e){this.uid=st("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=Eb(e);t={...t.type==="radial"?Xd.defaultRadialOptions:Xd.defaultLinearOptions,...v_(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:ft.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:n,y:r}=this.end,s=n-e,l=r-t;const c=s<0||l<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const S=e;e=n,n=S,s*=-1}if(l<0){const S=t;t=r,r=S,l*=-1}}const h=this.colorStops.length?this.colorStops:H0,d=this._textureSize,{canvas:f,context:m}=W0(d,1),g=c?m.createLinearGradient(this._textureSize,0,0,0):m.createLinearGradient(0,0,this._textureSize,0);z0(g,h),m.fillStyle=g,m.fillRect(0,0,d,1),this.texture=new Ae({source:new Li({resource:f,addressMode:this._wrapMode})});const y=Math.sqrt(s*s+l*l),v=Math.atan2(l,s),x=new be;x.scale(y/d,1),x.rotate(v),x.translate(e,t),this.textureSpace==="local"&&x.scale(d,d),this.transform=x}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:H0,t=this._textureSize,{canvas:n,context:r}=W0(t,t),{x:s,y:l}=this.center,{x:c,y:h}=this.outerCenter,d=this.innerRadius,f=this.outerRadius,m=c-f,g=h-f,y=t/(f*2),v=(s-m)*y,x=(l-g)*y,S=r.createRadialGradient(v,x,d*y,(c-m)*y,(h-g)*y,f*y);z0(S,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,t,t),r.fillStyle=S,r.translate(v,x),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-v,-x),r.fillRect(0,0,t,t),this.texture=new Ae({source:new Li({resource:n,addressMode:this._wrapMode})});const C=new be;C.scale(1/y,1/y),C.translate(m,g),this.textureSpace==="local"&&C.scale(t,t),this.transform=C}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Df.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Df.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Sr=Df;function z0(i,e){for(let t=0;t<e.length;t++){const n=e[t];i.addColorStop(n.offset,n.color)}}function W0(i,e){const t=He.get().createCanvas(i,e),n=t.getContext("2d");return{canvas:t,context:n}}function Eb(i){let e=i[0]??{};return(typeof e=="number"||i[1])&&(we("8.5.2","use options object instead"),e={type:"linear",start:{x:i[0],y:i[1]},end:{x:i[2],y:i[3]},textureSpace:i[4],textureSize:i[5]??Sr.defaultLinearOptions.textureSize}),e}const j0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class zc{constructor(e,t){this.uid=st("fillPattern"),this._tick=0,this.transform=new be,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=j0[t].addressModeU,e.source.style.addressModeV=j0[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var hd,G0;function Ab(){if(G0)return hd;G0=1,hd=t;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function t(s){var l=[];return s.replace(e,function(c,h,d){var f=h.toLowerCase();for(d=r(d),f=="m"&&d.length>2&&(l.push([h].concat(d.splice(0,2))),f="l",h=h=="m"?"l":"L");;){if(d.length==i[f])return d.unshift(h),l.push(d);if(d.length<i[f])throw new Error("malformed path data");l.push([h].concat(d.splice(0,i[f])))}}),l}var n=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(s){var l=s.match(n);return l?l.map(Number):[]}return hd}var kb=Ab();const Mb=Oc(kb);function Rb(i,e){const t=Mb(i),n=[];let r=null,s=0,l=0;for(let c=0;c<t.length;c++){const h=t[c],d=h[0],f=h;switch(d){case"M":s=f[1],l=f[2],e.moveTo(s,l);break;case"m":s+=f[1],l+=f[2],e.moveTo(s,l);break;case"H":s=f[1],e.lineTo(s,l);break;case"h":s+=f[1],e.lineTo(s,l);break;case"V":l=f[1],e.lineTo(s,l);break;case"v":l+=f[1],e.lineTo(s,l);break;case"L":s=f[1],l=f[2],e.lineTo(s,l);break;case"l":s+=f[1],l+=f[2],e.lineTo(s,l);break;case"C":s=f[5],l=f[6],e.bezierCurveTo(f[1],f[2],f[3],f[4],s,l);break;case"c":e.bezierCurveTo(s+f[1],l+f[2],s+f[3],l+f[4],s+f[5],l+f[6]),s+=f[5],l+=f[6];break;case"S":s=f[3],l=f[4],e.bezierCurveToShort(f[1],f[2],s,l);break;case"s":e.bezierCurveToShort(s+f[1],l+f[2],s+f[3],l+f[4]),s+=f[3],l+=f[4];break;case"Q":s=f[3],l=f[4],e.quadraticCurveTo(f[1],f[2],s,l);break;case"q":e.quadraticCurveTo(s+f[1],l+f[2],s+f[3],l+f[4]),s+=f[3],l+=f[4];break;case"T":s=f[1],l=f[2],e.quadraticCurveToShort(s,l);break;case"t":s+=f[1],l+=f[2],e.quadraticCurveToShort(s,l);break;case"A":s=f[6],l=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],s,l);break;case"a":s+=f[6],l+=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],s,l);break;case"Z":case"z":e.closePath(),n.length>0&&(r=n.pop(),r?(s=r.startX,l=r.startY):(s=0,l=0)),r=null;break;default:Ge(`Unknown SVG path command: ${d}`)}d!=="Z"&&d!=="z"&&r===null&&(r={startX:s,startY:l},n.push(r))}return e}class $f{constructor(e=0,t=0,n=0){this.type="circle",this.x=e,this.y=t,this.radius=n}clone(){return new $f(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=n}strokeContains(e,t,n,r=.5){if(this.radius===0)return!1;const s=this.x-e,l=this.y-t,c=this.radius,h=(1-r)*n,d=Math.sqrt(s*s+l*l);return d<=c+h&&d>c-(n-h)}getBounds(e){return e||(e=new qe),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Lf{constructor(e=0,t=0,n=0,r=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=n,this.halfHeight=r}clone(){return new Lf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return n*=n,r*=r,n+r<=1}strokeContains(e,t,n,r=.5){const{halfWidth:s,halfHeight:l}=this;if(s<=0||l<=0)return!1;const c=n*(1-r),h=n-c,d=s-h,f=l-h,m=s+c,g=l+c,y=e-this.x,v=t-this.y,x=y*y/(d*d)+v*v/(f*f),S=y*y/(m*m)+v*v/(g*g);return x>1&&S<=1}getBounds(e){return e||(e=new qe),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Ib(i,e,t,n,r,s){const l=i-t,c=e-n,h=r-t,d=s-n,f=l*h+c*d,m=h*h+d*d;let g=-1;m!==0&&(g=f/m);let y,v;g<0?(y=t,v=n):g>1?(y=r,v=s):(y=t+g*h,v=n+g*d);const x=i-y,S=e-v;return x*x+S*S}let Db,$b;class oa{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let r=0,s=t.length;r<s;r++)n.push(t[r].x,t[r].y);t=n}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,n=t.length;for(let r=0;r<n;r+=2){const s=t[r],l=t[r+1],c=t[(r+2)%n],h=t[(r+3)%n];e+=(c-s)*(h+l)}return e<0}containsPolygon(e){const t=this.getBounds(Db),n=e.getBounds($b);if(!t.containsRect(n))return!1;const r=e.points;for(let s=0;s<r.length;s+=2){const l=r[s],c=r[s+1];if(!this.contains(l,c))return!1}return!0}clone(){const e=this.points.slice(),t=new oa(e);return t.closePath=this.closePath,t}contains(e,t){let n=!1;const r=this.points.length/2;for(let s=0,l=r-1;s<r;l=s++){const c=this.points[s*2],h=this.points[s*2+1],d=this.points[l*2],f=this.points[l*2+1];h>t!=f>t&&e<(d-c)*((t-h)/(f-h))+c&&(n=!n)}return n}strokeContains(e,t,n,r=.5){const s=n*n,l=s*(1-r),c=s-l,{points:h}=this,d=h.length-(this.closePath?0:2);for(let f=0;f<d;f+=2){const m=h[f],g=h[f+1],y=h[(f+2)%h.length],v=h[(f+3)%h.length],x=Ib(e,t,m,g,y,v),S=Math.sign((y-m)*(t-g)-(v-g)*(e-m));if(x<=(S<0?c:l))return!0}return!1}getBounds(e){e||(e=new qe);const t=this.points;let n=1/0,r=-1/0,s=1/0,l=-1/0;for(let c=0,h=t.length;c<h;c+=2){const d=t[c],f=t[c+1];n=d<n?d:n,r=d>r?d:r,s=f<s?f:s,l=f>l?f:l}return e.x=n,e.width=r-n,e.y=s,e.height=l-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return we("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return we("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const rc=(i,e,t,n,r,s,l)=>{const c=i-t,h=e-n,d=Math.sqrt(c*c+h*h);return d>=r-s&&d<=r+l};class Bf{constructor(e=0,t=0,n=0,r=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=n,this.height=r,this.radius=s}getBounds(e){return e||(e=new qe),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Bf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),s=t-(this.y+n);const l=n*n;if(r*r+s*s<=l||(r=e-(this.x+this.width-n),r*r+s*s<=l)||(s=t-(this.y+this.height-n),r*r+s*s<=l)||(r=e-(this.x+n),r*r+s*s<=l))return!0}return!1}strokeContains(e,t,n,r=.5){const{x:s,y:l,width:c,height:h,radius:d}=this,f=n*(1-r),m=n-f,g=s+d,y=l+d,v=c-d*2,x=h-d*2,S=s+c,C=l+h;return(e>=s-f&&e<=s+m||e>=S-m&&e<=S+f)&&t>=y&&t<=y+x||(t>=l-f&&t<=l+m||t>=C-m&&t<=C+f)&&e>=g&&e<=g+v?!0:e<g&&t<y&&rc(e,t,g,y,d,m,f)||e>S-d&&t<y&&rc(e,t,S-d,y,d,m,f)||e>S-d&&t>C-d&&rc(e,t,S-d,C-d,d,m,f)||e<g&&t>C-d&&rc(e,t,g,C-d,d,m,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const yx={};function Lb(i,e,t){let n=2166136261;for(let r=0;r<e;r++)n^=i[r].uid,n=Math.imul(n,16777619),n>>>=0;return yx[n]||Bb(i,e,n,t)}function Bb(i,e,t,n){const r={};let s=0;for(let c=0;c<n;c++){const h=c<e?i[c]:Ae.EMPTY.source;r[s++]=h.source,r[s++]=h.style}const l=new hc(r);return yx[t]=l,l}class U0{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function V0(i,e){const t=i.byteLength/8|0,n=new Float64Array(i,0,t);new Float64Array(e,0,t).set(n);const s=i.byteLength-t*8;if(s>0){const l=new Uint8Array(i,t*8,s);new Uint8Array(e,t*8,s).set(l)}}const Fb={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Ob=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",i[i.NONE=5]="NONE",i))(Ob||{});function q0(i,e){return e.alphaMode==="no-premultiply-alpha"&&Fb[i]||i}const Nb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Hb(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function zb(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=Nb.replace(/%forloop%/gi,Hb(i));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}}finally{e.deleteShader(t)}return i}let hs=null;function Wb(){if(hs)return hs;const i=Q_();return hs=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),hs=zb(hs,i),i.getExtension("WEBGL_lose_context")?.loseContext(),hs}class jb{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class Gb{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new jb,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const aa=[];let Sc=0;ka.register({clear:()=>{if(aa.length>0)for(const i of aa)i&&i.destroy();aa.length=0,Sc=0}});function Y0(){return Sc>0?aa[--Sc]:new Gb}function X0(i){aa[Sc++]=i}let Wo=0;const _x=class xx{constructor(e){this.uid=st("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...xx.defaultOptions,...e},e.maxTextures||(we("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=Wb());const{maxTextures:t,attributesInitialSize:n,indicesInitialSize:r}=e;this.attributeBuffer=new U0(n*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)X0(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const n=e._batch.textures.ids[t._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let n=Y0(),r=n.textures;r.clear();const s=t[this.elementStart];let l=q0(s.blendMode,s.texture._source),c=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const h=this.attributeBuffer.float32View,d=this.attributeBuffer.uint32View,f=this.indexBuffer;let m=this._batchIndexSize,g=this._batchIndexStart,y="startBatch";const v=this.maxTextures;for(let x=this.elementStart;x<this.elementSize;++x){const S=t[x];t[x]=null;const b=S.texture._source,P=q0(S.blendMode,b),E=l!==P||c!==S.topology;if(b._batchTick===Wo&&!E){S._textureId=b._textureBindLocation,m+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,h,d,S._attributeStart,S._textureId),this.packQuadIndex(f,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,h,d,S._attributeStart,S._textureId),this.packIndex(S,f,S._indexStart,S._attributeStart/this.vertexSize)),S._batch=n;continue}b._batchTick=Wo,(r.count>=v||E)&&(this._finishBatch(n,g,m-g,r,l,c,e,y),y="renderBatch",g=m,l=P,c=S.topology,n=Y0(),r=n.textures,r.clear(),++Wo),S._textureId=b._textureBindLocation=r.count,r.ids[b.uid]=r.count,r.textures[r.count++]=b,S._batch=n,m+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,h,d,S._attributeStart,S._textureId),this.packQuadIndex(f,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,h,d,S._attributeStart,S._textureId),this.packIndex(S,f,S._indexStart,S._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(n,g,m-g,r,l,c,e,y),g=m,++Wo),this.elementStart=this.elementSize,this._batchIndexStart=g,this._batchIndexSize=m}_finishBatch(e,t,n,r,s,l,c,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=r,e.blendMode=s,e.topology=l,e.start=t,e.size=n,++Wo,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),n=new U0(t);V0(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const t=this.indexBuffer;let n=Math.max(e,t.length*1.5);n+=n%2;const r=n>65535?new Uint32Array(n):new Uint16Array(n);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)r[s]=t[s];else V0(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,n){e[t]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3}packIndex(e,t,n,r){const s=e.indices,l=e.indexSize,c=e.indexOffset,h=e.attributeOffset;for(let d=0;d<l;d++)t[n++]=r+s[d+c]-h}destroy(){if(this.batches!==null){for(let e=0;e<this.batches.length;e++)X0(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};_x.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Ub=_x;var Vt=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(Vt||{});class ga extends Wn{constructor(e){let{data:t,size:n}=e;const{usage:r,label:s,shrinkToFit:l}=e;super(),this.uid=st("buffer"),this._resourceType="buffer",this._resourceId=st("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,n??(n=t?.byteLength);const c=!!t;this.descriptor={size:n,usage:r,mappedAtCreation:c,label:s},this.shrinkToFit=l??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Vt.STATIC)}set static(e){e?this.descriptor.usage|=Vt.STATIC:this.descriptor.usage&=~Vt.STATIC}setDataWithSize(e,t,n){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=st("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function vx(i,e){if(!(i instanceof ga)){let t=e?Vt.INDEX:Vt.VERTEX;i instanceof Array&&(e?(i=new Uint32Array(i),t=Vt.INDEX|Vt.COPY_DST):(i=new Float32Array(i),t=Vt.VERTEX|Vt.COPY_DST)),i=new ga({data:i,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return i}function Vb(i,e,t){const n=i.getAttribute(e);if(!n)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const r=n.buffer.data;let s=1/0,l=1/0,c=-1/0,h=-1/0;const d=r.BYTES_PER_ELEMENT,f=(n.offset||0)/d,m=(n.stride||8)/d;for(let g=f;g<r.length;g+=m){const y=r[g],v=r[g+1];y>c&&(c=y),v>h&&(h=v),y<s&&(s=y),v<l&&(l=v)}return t.minX=s,t.minY=l,t.maxX=c,t.maxY=h,t}function qb(i){return(i instanceof ga||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=vx(i.buffer,!1),i}class Yb extends Wn{constructor(e={}){super(),this.uid=st("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new zn,this._boundsDirty=!0;const{attributes:t,indexBuffer:n,topology:r}=e;if(this.buffers=[],this.attributes={},t)for(const s in t)this.addAttribute(s,t[s]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const n=qb(t);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=vx(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Vb(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Xb=new Float32Array(1),Qb=new Uint32Array(1);class Kb extends Yb{constructor(){const t=new ga({data:Xb,label:"attribute-batch-buffer",usage:Vt.VERTEX|Vt.COPY_DST,shrinkToFit:!1}),n=new ga({data:Qb,label:"index-batch-buffer",usage:Vt.INDEX|Vt.COPY_DST,shrinkToFit:!1}),r=24;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:r,offset:0},aUV:{buffer:t,format:"float32x2",stride:r,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:r,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:r,offset:20}},indexBuffer:n})}}function Q0(i,e,t){if(i)for(const n in i){const r=n.toLocaleLowerCase(),s=e[r];if(s){let l=i[n];n==="header"&&(l=l.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(l)}else Ge(`${n} placement hook does not exist in shader`)}}const Zb=/\{\{(.*?)\}\}/g;function K0(i){const e={};return(i.match(Zb)?.map(n=>n.replace(/[{()}]/g,""))??[]).forEach(n=>{e[n]=[]}),e}function Z0(i,e){let t;const n=/@in\s+([^;]+);/g;for(;(t=n.exec(i))!==null;)e.push(t[1])}function J0(i,e,t=!1){const n=[];Z0(e,n),i.forEach(c=>{c.header&&Z0(c.header,n)});const r=n;t&&r.sort();const s=r.map((c,h)=>`       @location(${h}) ${c},`).join(`
`);let l=e.replace(/@in\s+[^;]+;\s*/g,"");return l=l.replace("{{in}}",`
${s}
`),l}function ey(i,e){let t;const n=/@out\s+([^;]+);/g;for(;(t=n.exec(i))!==null;)e.push(t[1])}function Jb(i){const t=/\b(\w+)\s*:/g.exec(i);return t?t[1]:""}function e2(i){const e=/@.*?\s+/g;return i.replace(e,"")}function t2(i,e){const t=[];ey(e,t),i.forEach(h=>{h.header&&ey(h.header,t)});let n=0;const r=t.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${n++}) ${h}`).join(`,
`),s=t.sort().map(h=>`       var ${e2(h)};`).join(`
`),l=`return VSOutput(
            ${t.sort().map(h=>` ${Jb(h)}`).join(`,
`)});`;let c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${r}
`),c=c.replace("{{start}}",`
${s}
`),c=c.replace("{{return}}",`
${l}
`),c}function ty(i,e){let t=i;for(const n in e){const r=e[n];r.join(`
`).length?t=t.replace(`{{${n}}}`,`//-----${n} START-----//
${r.join(`
`)}
//----${n} FINISH----//`):t=t.replace(`{{${n}}}`,"")}return t}const qr=Object.create(null),dd=new Map;let n2=0;function r2({template:i,bits:e}){const t=Sx(i,e);if(qr[t])return qr[t];const{vertex:n,fragment:r}=s2(i,e);return qr[t]=wx(n,r,e),qr[t]}function i2({template:i,bits:e}){const t=Sx(i,e);return qr[t]||(qr[t]=wx(i.vertex,i.fragment,e)),qr[t]}function s2(i,e){const t=e.map(l=>l.vertex).filter(l=>!!l),n=e.map(l=>l.fragment).filter(l=>!!l);let r=J0(t,i.vertex,!0);r=t2(t,r);const s=J0(n,i.fragment,!0);return{vertex:r,fragment:s}}function Sx(i,e){return e.map(t=>(dd.has(t)||dd.set(t,n2++),dd.get(t))).sort((t,n)=>t-n).join("-")+i.vertex+i.fragment}function wx(i,e,t){const n=K0(i),r=K0(e);return t.forEach(s=>{Q0(s.vertex,n,s.name),Q0(s.fragment,r,s.name)}),{vertex:ty(i,n),fragment:ty(e,r)}}const o2=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,a2=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,l2=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,c2=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,u2={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},h2={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function d2({bits:i,name:e}){const t=r2({template:{fragment:a2,vertex:o2},bits:[u2,...i]});return Hc.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function f2({bits:i,name:e}){return new Z_({name:e,...i2({template:{vertex:l2,fragment:c2},bits:[h2,...i]})})}const p2={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},m2={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},fd={};function g2(i){const e=[];if(i===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let n=0;n<i;n++)e.push(`@group(1) @binding(${t++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function y2(i){const e=[];if(i===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<i;t++)t===i-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function _2(i){return fd[i]||(fd[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${g2(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${y2(i)}
            `}}),fd[i]}const pd={};function x2(i){const e=[];for(let t=0;t<i;t++)t>0&&e.push("else"),t<i-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function v2(i){return pd[i]||(pd[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${x2(i)}
            `}}),pd[i]}const S2={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},w2={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},ny={};function C2(i){let e=ny[i];if(e)return e;const t=new Int32Array(i);for(let n=0;n<i;n++)t[n]=n;return e=ny[i]=new nx({uTextures:{value:t,type:"i32",size:i}},{isStatic:!0}),e}class b2 extends If{constructor(e){const t=f2({name:"batch",bits:[m2,v2(e),w2]}),n=d2({name:"batch",bits:[p2,_2(e),S2]});super({glProgram:t,gpuProgram:n,resources:{batchSamplers:C2(e)}})}}let md=null;const Cx=class bx extends Ub{constructor(e){super(e),this.geometry=new Kb,this.name=bx.extension.name,this.vertexSize=6,md??(md=new b2(e.maxTextures)),this.shader=md}packAttributes(e,t,n,r,s){const l=s<<16|e.roundPixels&65535,c=e.transform,h=c.a,d=c.b,f=c.c,m=c.d,g=c.tx,y=c.ty,{positions:v,uvs:x}=e,S=e.color,C=e.attributeOffset,b=C+e.attributeSize;for(let P=C;P<b;P++){const E=P*2,A=v[E],M=v[E+1];t[r++]=h*A+f*M+g,t[r++]=m*M+d*A+y,t[r++]=x[E],t[r++]=x[E+1],n[r++]=S,n[r++]=l}}packQuadAttributes(e,t,n,r,s){const l=e.texture,c=e.transform,h=c.a,d=c.b,f=c.c,m=c.d,g=c.tx,y=c.ty,v=e.bounds,x=v.maxX,S=v.minX,C=v.maxY,b=v.minY,P=l.uvs,E=e.color,A=s<<16|e.roundPixels&65535;t[r+0]=h*S+f*b+g,t[r+1]=m*b+d*S+y,t[r+2]=P.x0,t[r+3]=P.y0,n[r+4]=E,n[r+5]=A,t[r+6]=h*x+f*b+g,t[r+7]=m*b+d*x+y,t[r+8]=P.x1,t[r+9]=P.y1,n[r+10]=E,n[r+11]=A,t[r+12]=h*x+f*C+g,t[r+13]=m*C+d*x+y,t[r+14]=P.x2,t[r+15]=P.y2,n[r+16]=E,n[r+17]=A,t[r+18]=h*S+f*C+g,t[r+19]=m*C+d*S+y,t[r+20]=P.x3,t[r+21]=P.y3,n[r+22]=E,n[r+23]=A}};Cx.extension={type:[pe.Batcher],name:"default"};let T2=Cx;function P2(i,e,t,n,r,s,l,c=null){let h=0;t*=e,r*=s;const d=c.a,f=c.b,m=c.c,g=c.d,y=c.tx,v=c.ty;for(;h<l;){const x=i[t],S=i[t+1];n[r]=d*x+m*S+y,n[r+1]=f*x+g*S+v,r+=s,t+=e,h++}}function E2(i,e,t,n){let r=0;for(e*=t;r<n;)i[e]=0,i[e+1]=0,e+=t,r++}function Tx(i,e,t,n,r){const s=e.a,l=e.b,c=e.c,h=e.d,d=e.tx,f=e.ty;t||(t=0),n||(n=2),r||(r=i.length/n-t);let m=t*n;for(let g=0;g<r;g++){const y=i[m],v=i[m+1];i[m]=s*y+c*v+d,i[m+1]=l*y+h*v+f,m+=n}}const A2=new be;class Px{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?M_(t,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||A2}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const ya={extension:{type:pe.ShapeBuilder,name:"circle"},build(i,e){let t,n,r,s,l,c;if(i.type==="circle"){const E=i;if(l=c=E.radius,l<=0)return!1;t=E.x,n=E.y,r=s=0}else if(i.type==="ellipse"){const E=i;if(l=E.halfWidth,c=E.halfHeight,l<=0||c<=0)return!1;t=E.x,n=E.y,r=s=0}else{const E=i,A=E.width/2,M=E.height/2;t=E.x+A,n=E.y+M,l=c=Math.max(0,Math.min(E.radius,Math.min(A,M))),r=A-l,s=M-c}if(r<0||s<0)return!1;const h=Math.ceil(2.3*Math.sqrt(l+c)),d=h*8+(r?4:0)+(s?4:0);if(d===0)return!1;if(h===0)return e[0]=e[6]=t+r,e[1]=e[3]=n+s,e[2]=e[4]=t-r,e[5]=e[7]=n-s,!0;let f=0,m=h*4+(r?2:0)+2,g=m,y=d,v=r+l,x=s,S=t+v,C=t-v,b=n+x;if(e[f++]=S,e[f++]=b,e[--m]=b,e[--m]=C,s){const E=n-x;e[g++]=C,e[g++]=E,e[--y]=E,e[--y]=S}for(let E=1;E<h;E++){const A=Math.PI/2*(E/h),M=r+Math.cos(A)*l,k=s+Math.sin(A)*c,$=t+M,D=t-M,O=n+k,G=n-k;e[f++]=$,e[f++]=O,e[--m]=O,e[--m]=D,e[g++]=D,e[g++]=G,e[--y]=G,e[--y]=$}v=r,x=s+c,S=t+v,C=t-v,b=n+x;const P=n-x;return e[f++]=S,e[f++]=b,e[--y]=P,e[--y]=S,r&&(e[f++]=C,e[f++]=b,e[--y]=P,e[--y]=C),!0},triangulate(i,e,t,n,r,s){if(i.length===0)return;let l=0,c=0;for(let f=0;f<i.length;f+=2)l+=i[f],c+=i[f+1];l/=i.length/2,c/=i.length/2;let h=n;e[h*t]=l,e[h*t+1]=c;const d=h++;for(let f=0;f<i.length;f+=2)e[h*t]=i[f],e[h*t+1]=i[f+1],f>0&&(r[s++]=h,r[s++]=d,r[s++]=h-1),h++;r[s++]=d+1,r[s++]=d,r[s++]=h-1}},k2={...ya,extension:{...ya.extension,name:"ellipse"}},M2={...ya,extension:{...ya.extension,name:"roundedRectangle"}},Ex=1e-4,ry=1e-4;function R2(i){const e=i.length;if(e<6)return 1;let t=0;for(let n=0,r=i[e-2],s=i[e-1];n<e;n+=2){const l=i[n],c=i[n+1];t+=(l-r)*(c+s),r=l,s=c}return t<0?-1:1}function iy(i,e,t,n,r,s,l,c){const h=i-t*r,d=e-n*r,f=i+t*s,m=e+n*s;let g,y;l?(g=n,y=-t):(g=-n,y=t);const v=h+g,x=d+y,S=f+g,C=m+y;return c.push(v,x),c.push(S,C),2}function _i(i,e,t,n,r,s,l,c){const h=t-i,d=n-e;let f=Math.atan2(h,d),m=Math.atan2(r-i,s-e);c&&f<m?f+=Math.PI*2:!c&&f>m&&(m+=Math.PI*2);let g=f;const y=m-f,v=Math.abs(y),x=Math.sqrt(h*h+d*d),S=(15*v*Math.sqrt(x)/Math.PI>>0)+1,C=y/S;if(g+=C,c){l.push(i,e),l.push(t,n);for(let b=1,P=g;b<S;b++,P+=C)l.push(i,e),l.push(i+Math.sin(P)*x,e+Math.cos(P)*x);l.push(i,e),l.push(r,s)}else{l.push(t,n),l.push(i,e);for(let b=1,P=g;b<S;b++,P+=C)l.push(i+Math.sin(P)*x,e+Math.cos(P)*x),l.push(i,e);l.push(r,s),l.push(i,e)}return S*2}function I2(i,e,t,n,r,s){const l=Ex;if(i.length===0)return;const c=e;let h=c.alignment;if(e.alignment!==.5){let U=R2(i);h=(h-.5)*U+.5}const d=new Dt(i[0],i[1]),f=new Dt(i[i.length-2],i[i.length-1]),m=n,g=Math.abs(d.x-f.x)<l&&Math.abs(d.y-f.y)<l;if(m){i=i.slice(),g&&(i.pop(),i.pop(),f.set(i[i.length-2],i[i.length-1]));const U=(d.x+f.x)*.5,W=(f.y+d.y)*.5;i.unshift(U,W),i.push(U,W)}const y=r,v=i.length/2;let x=i.length;const S=y.length/2,C=c.width/2,b=C*C,P=c.miterLimit*c.miterLimit;let E=i[0],A=i[1],M=i[2],k=i[3],$=0,D=0,O=-(A-k),G=E-M,te=0,Z=0,ie=Math.sqrt(O*O+G*G);O/=ie,G/=ie,O*=C,G*=C;const he=h,V=(1-he)*2,Q=he*2;m||(c.cap==="round"?x+=_i(E-O*(V-Q)*.5,A-G*(V-Q)*.5,E-O*V,A-G*V,E+O*Q,A+G*Q,y,!0)+2:c.cap==="square"&&(x+=iy(E,A,O,G,V,Q,!0,y))),y.push(E-O*V,A-G*V),y.push(E+O*Q,A+G*Q);for(let U=1;U<v-1;++U){E=i[(U-1)*2],A=i[(U-1)*2+1],M=i[U*2],k=i[U*2+1],$=i[(U+1)*2],D=i[(U+1)*2+1],O=-(A-k),G=E-M,ie=Math.sqrt(O*O+G*G),O/=ie,G/=ie,O*=C,G*=C,te=-(k-D),Z=M-$,ie=Math.sqrt(te*te+Z*Z),te/=ie,Z/=ie,te*=C,Z*=C;const W=M-E,R=A-k,N=M-$,J=D-k,ne=W*N+R*J,re=R*N-J*W,fe=re<0;if(Math.abs(re)<.001*Math.abs(ne)){y.push(M-O*V,k-G*V),y.push(M+O*Q,k+G*Q),ne>=0&&(c.join==="round"?x+=_i(M,k,M-O*V,k-G*V,M-te*V,k-Z*V,y,!1)+4:x+=2,y.push(M-te*Q,k-Z*Q),y.push(M+te*V,k+Z*V));continue}const Te=(-O+E)*(-G+k)-(-O+M)*(-G+A),Ee=(-te+$)*(-Z+k)-(-te+M)*(-Z+D),Ie=(W*Ee-N*Te)/re,Me=(J*Te-R*Ee)/re,br=(Ie-M)*(Ie-M)+(Me-k)*(Me-k),Un=M+(Ie-M)*V,fn=k+(Me-k)*V,kn=M-(Ie-M)*Q,Vn=k-(Me-k)*Q,Ra=Math.min(W*W+R*R,N*N+J*J),Ni=fe?V:Q,Ia=Ra+Ni*Ni*b;br<=Ia?c.join==="bevel"||br/b>P?(fe?(y.push(Un,fn),y.push(M+O*Q,k+G*Q),y.push(Un,fn),y.push(M+te*Q,k+Z*Q)):(y.push(M-O*V,k-G*V),y.push(kn,Vn),y.push(M-te*V,k-Z*V),y.push(kn,Vn)),x+=2):c.join==="round"?fe?(y.push(Un,fn),y.push(M+O*Q,k+G*Q),x+=_i(M,k,M+O*Q,k+G*Q,M+te*Q,k+Z*Q,y,!0)+4,y.push(Un,fn),y.push(M+te*Q,k+Z*Q)):(y.push(M-O*V,k-G*V),y.push(kn,Vn),x+=_i(M,k,M-O*V,k-G*V,M-te*V,k-Z*V,y,!1)+4,y.push(M-te*V,k-Z*V),y.push(kn,Vn)):(y.push(Un,fn),y.push(kn,Vn)):(y.push(M-O*V,k-G*V),y.push(M+O*Q,k+G*Q),c.join==="round"?fe?x+=_i(M,k,M+O*Q,k+G*Q,M+te*Q,k+Z*Q,y,!0)+2:x+=_i(M,k,M-O*V,k-G*V,M-te*V,k-Z*V,y,!1)+2:c.join==="miter"&&br/b<=P&&(fe?(y.push(kn,Vn),y.push(kn,Vn)):(y.push(Un,fn),y.push(Un,fn)),x+=2),y.push(M-te*V,k-Z*V),y.push(M+te*Q,k+Z*Q),x+=2)}E=i[(v-2)*2],A=i[(v-2)*2+1],M=i[(v-1)*2],k=i[(v-1)*2+1],O=-(A-k),G=E-M,ie=Math.sqrt(O*O+G*G),O/=ie,G/=ie,O*=C,G*=C,y.push(M-O*V,k-G*V),y.push(M+O*Q,k+G*Q),m||(c.cap==="round"?x+=_i(M-O*(V-Q)*.5,k-G*(V-Q)*.5,M-O*V,k-G*V,M+O*Q,k+G*Q,y,!1)+2:c.cap==="square"&&(x+=iy(M,k,O,G,V,Q,!1,y)));const X=ry*ry;for(let U=S;U<x+S-2;++U)E=y[U*2],A=y[U*2+1],M=y[(U+1)*2],k=y[(U+1)*2+1],$=y[(U+2)*2],D=y[(U+2)*2+1],!(Math.abs(E*(k-D)+M*(D-A)+$*(A-k))<X)&&s.push(U,U+1,U+2)}function D2(i,e,t,n){const r=Ex;if(i.length===0)return;const s=i[0],l=i[1],c=i[i.length-2],h=i[i.length-1],d=e||Math.abs(s-c)<r&&Math.abs(l-h)<r,f=t,m=i.length/2,g=f.length/2;for(let y=0;y<m;y++)f.push(i[y*2]),f.push(i[y*2+1]);for(let y=0;y<m-1;y++)n.push(g+y,g+y+1);d&&n.push(g+m-1,g)}function Ax(i,e,t,n,r,s,l){const c=_b(i,e,2);if(!c)return;for(let d=0;d<c.length;d+=3)s[l++]=c[d]+r,s[l++]=c[d+1]+r,s[l++]=c[d+2]+r;let h=r*n;for(let d=0;d<i.length;d+=2)t[h]=i[d],t[h+1]=i[d+1],h+=n}const $2=[],L2={extension:{type:pe.ShapeBuilder,name:"polygon"},build(i,e){for(let t=0;t<i.points.length;t++)e[t]=i.points[t];return!0},triangulate(i,e,t,n,r,s){Ax(i,$2,e,t,n,r,s)}},B2={extension:{type:pe.ShapeBuilder,name:"rectangle"},build(i,e){const t=i,n=t.x,r=t.y,s=t.width,l=t.height;return s>0&&l>0?(e[0]=n,e[1]=r,e[2]=n+s,e[3]=r,e[4]=n+s,e[5]=r+l,e[6]=n,e[7]=r+l,!0):!1},triangulate(i,e,t,n,r,s){let l=0;n*=t,e[n+l]=i[0],e[n+l+1]=i[1],l+=t,e[n+l]=i[2],e[n+l+1]=i[3],l+=t,e[n+l]=i[6],e[n+l+1]=i[7],l+=t,e[n+l]=i[4],e[n+l+1]=i[5],l+=t;const c=n/t;r[s++]=c,r[s++]=c+1,r[s++]=c+2,r[s++]=c+1,r[s++]=c+3,r[s++]=c+2}},F2={extension:{type:pe.ShapeBuilder,name:"triangle"},build(i,e){return e[0]=i.x,e[1]=i.y,e[2]=i.x2,e[3]=i.y2,e[4]=i.x3,e[5]=i.y3,!0},triangulate(i,e,t,n,r,s){let l=0;n*=t,e[n+l]=i[0],e[n+l+1]=i[1],l+=t,e[n+l]=i[2],e[n+l+1]=i[3],l+=t,e[n+l]=i[4],e[n+l+1]=i[5];const c=n/t;r[s++]=c,r[s++]=c+1,r[s++]=c+2}},O2=new be,N2=new qe;function H2(i,e,t,n){const r=e.matrix?i.copyFrom(e.matrix).invert():i.identity();if(e.textureSpace==="local"){const l=t.getBounds(N2);e.width&&l.pad(e.width);const{x:c,y:h}=l,d=1/l.width,f=1/l.height,m=-c*d,g=-h*f,y=r.a,v=r.b,x=r.c,S=r.d;r.a*=d,r.b*=d,r.c*=f,r.d*=f,r.tx=m*y+g*x+r.tx,r.ty=m*v+g*S+r.ty}else r.translate(e.texture.frame.x,e.texture.frame.y),r.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof Sr)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),n&&r.append(O2.copyFrom(n).invert()),r}const Wc={};bt.handleByMap(pe.ShapeBuilder,Wc);bt.add(B2,L2,F2,ya,k2,M2);const z2=new qe,W2=new be;function j2(i,e){const{geometryData:t,batches:n}=e;n.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let r=0;r<i.instructions.length;r++){const s=i.instructions[r];if(s.action==="texture")G2(s.data,n,t);else if(s.action==="fill"||s.action==="stroke"){const l=s.action==="stroke",c=s.data.path.shapePath,h=s.data.style,d=s.data.hole;l&&d&&sy(d.shapePath,h,!0,n,t),d&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=d.shapePath.shapePrimitives),sy(c,h,l,n,t)}}}function G2(i,e,t){const n=[],r=Wc.rectangle,s=z2;s.x=i.dx,s.y=i.dy,s.width=i.dw,s.height=i.dh;const l=i.transform;if(!r.build(s,n))return;const{vertices:c,uvs:h,indices:d}=t,f=d.length,m=c.length/2;l&&Tx(n,l),r.triangulate(n,c,2,m,d,f);const g=i.image,y=g.uvs;h.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const v=An.get(Px);v.indexOffset=f,v.indexSize=d.length-f,v.attributeOffset=m,v.attributeSize=c.length/2-m,v.baseColor=i.style,v.alpha=i.alpha,v.texture=g,v.geometryData=t,e.push(v)}function sy(i,e,t,n,r){const{vertices:s,uvs:l,indices:c}=r;i.shapePrimitives.forEach(({shape:h,transform:d,holes:f})=>{const m=[],g=Wc[h.type];if(!g.build(h,m))return;const y=c.length,v=s.length/2;let x="triangle-list";if(d&&Tx(m,d),t){const P=h.closePath??!0,E=e;E.pixelLine?(D2(m,P,s,c),x="line-list"):I2(m,E,!1,P,s,c)}else if(f){const P=[],E=m.slice();U2(f).forEach(M=>{P.push(E.length/2),E.push(...M)}),Ax(E,P,s,2,v,c,y)}else g.triangulate(m,s,2,v,c,y);const S=l.length/2,C=e.texture;if(C!==Ae.WHITE){const P=H2(W2,e,h,d);P2(s,2,v,l,S,2,s.length/2-v,P)}else E2(l,S,2,s.length/2-v);const b=An.get(Px);b.indexOffset=y,b.indexSize=c.length-y,b.attributeOffset=v,b.attributeSize=s.length/2-v,b.baseColor=e.color,b.alpha=e.alpha,b.texture=C,b.geometryData=r,b.topology=x,n.push(b)})}function U2(i){const e=[];for(let t=0;t<i.length;t++){const n=i[t].shape,r=[];Wc[n.type].build(n,r)&&e.push(r)}return e}class V2{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class q2{constructor(){this.instructions=new $_}init(e){this.batcher=new T2({maxTextures:e}),this.instructions.reset()}get geometry(){return we(jw,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Ff=class Qd{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Qd.defaultOptions.bezierSmoothness=e?.bezierSmoothness??Qd.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),j2(e,t);const n=e.batchMode;e.customShader||n==="no-batch"?t.isBatchable=!1:n==="auto"?t.isBatchable=t.geometryData.vertices.length<400:t.isBatchable=!0,e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const t=An.get(q2,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:n,geometryData:r}=this._gpuContextHash[e.uid],s=r.vertices.length,l=r.indices.length;for(let f=0;f<n.length;f++)n[f].applyTransform=!1;const c=t.batcher;c.ensureAttributeBuffer(s),c.ensureIndexBuffer(l),c.begin();for(let f=0;f<n.length;f++){const m=n[f];c.add(m)}c.finish(t.instructions);const h=c.geometry;h.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),h.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const d=c.batches;for(let f=0;f<d.length;f++){const m=d[f];m.bindGroup=Lb(m.textures.textures,m.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){const t=new V2;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(An.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(n=>{An.return(n)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};Ff.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"graphicsContext"};Ff.defaultOptions={bezierSmoothness:.5};let kx=Ff;const Y2=8,ic=11920929e-14,X2=1;function Mx(i,e,t,n,r,s,l,c,h,d){const m=Math.min(.99,Math.max(0,d??kx.defaultOptions.bezierSmoothness));let g=(X2-m)/1;return g*=g,Q2(e,t,n,r,s,l,c,h,i,g),i}function Q2(i,e,t,n,r,s,l,c,h,d){Kd(i,e,t,n,r,s,l,c,h,d,0),h.push(l,c)}function Kd(i,e,t,n,r,s,l,c,h,d,f){if(f>Y2)return;const m=(i+t)/2,g=(e+n)/2,y=(t+r)/2,v=(n+s)/2,x=(r+l)/2,S=(s+c)/2,C=(m+y)/2,b=(g+v)/2,P=(y+x)/2,E=(v+S)/2,A=(C+P)/2,M=(b+E)/2;if(f>0){let k=l-i,$=c-e;const D=Math.abs((t-l)*$-(n-c)*k),O=Math.abs((r-l)*$-(s-c)*k);if(D>ic&&O>ic){if((D+O)*(D+O)<=d*(k*k+$*$)){h.push(A,M);return}}else if(D>ic){if(D*D<=d*(k*k+$*$)){h.push(A,M);return}}else if(O>ic){if(O*O<=d*(k*k+$*$)){h.push(A,M);return}}else if(k=A-(i+l)/2,$=M-(e+c)/2,k*k+$*$<=d){h.push(A,M);return}}Kd(i,e,m,g,C,b,A,M,h,d,f+1),Kd(A,M,P,E,x,S,l,c,h,d,f+1)}const K2=8,Z2=11920929e-14,J2=1;function eT(i,e,t,n,r,s,l,c){const d=Math.min(.99,Math.max(0,c??kx.defaultOptions.bezierSmoothness));let f=(J2-d)/1;return f*=f,tT(e,t,n,r,s,l,i,f),i}function tT(i,e,t,n,r,s,l,c){Zd(l,i,e,t,n,r,s,c,0),l.push(r,s)}function Zd(i,e,t,n,r,s,l,c,h){if(h>K2)return;const d=(e+n)/2,f=(t+r)/2,m=(n+s)/2,g=(r+l)/2,y=(d+m)/2,v=(f+g)/2;let x=s-e,S=l-t;const C=Math.abs((n-s)*S-(r-l)*x);if(C>Z2){if(C*C<=c*(x*x+S*S)){i.push(y,v);return}}else if(x=y-(e+s)/2,S=v-(t+l)/2,x*x+S*S<=c){i.push(y,v);return}Zd(i,e,t,d,f,y,v,c,h+1),Zd(i,y,v,m,g,s,l,c,h+1)}function Rx(i,e,t,n,r,s,l,c){let h=Math.abs(r-s);(!l&&r>s||l&&s>r)&&(h=2*Math.PI-h),c||(c=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(h/Math.PI)))),c=Math.max(c,3);let d=h/c,f=r;d*=l?-1:1;for(let m=0;m<c+1;m++){const g=Math.cos(f),y=Math.sin(f),v=e+g*n,x=t+y*n;i.push(v,x),f+=d}}function nT(i,e,t,n,r,s){const l=i[i.length-2],h=i[i.length-1]-t,d=l-e,f=r-t,m=n-e,g=Math.abs(h*m-d*f);if(g<1e-8||s===0){(i[i.length-2]!==e||i[i.length-1]!==t)&&i.push(e,t);return}const y=h*h+d*d,v=f*f+m*m,x=h*f+d*m,S=s*Math.sqrt(y)/g,C=s*Math.sqrt(v)/g,b=S*x/y,P=C*x/v,E=S*m+C*d,A=S*f+C*h,M=d*(C+b),k=h*(C+b),$=m*(S+P),D=f*(S+P),O=Math.atan2(k-A,M-E),G=Math.atan2(D-A,$-E);Rx(i,E+e,A+t,s,O,G,d*f>m*h)}const la=Math.PI*2,gd={centerX:0,centerY:0,ang1:0,ang2:0},yd=({x:i,y:e},t,n,r,s,l,c,h)=>{i*=t,e*=n;const d=r*i-s*e,f=s*i+r*e;return h.x=d+l,h.y=f+c,h};function rT(i,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:t,r=Math.cos(i),s=Math.sin(i),l=Math.cos(i+e),c=Math.sin(i+e);return[{x:r-s*n,y:s+r*n},{x:l+c*n,y:c-l*n},{x:l,y:c}]}const oy=(i,e,t,n)=>{const r=i*n-e*t<0?-1:1;let s=i*t+e*n;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},iT=(i,e,t,n,r,s,l,c,h,d,f,m,g)=>{const y=Math.pow(r,2),v=Math.pow(s,2),x=Math.pow(f,2),S=Math.pow(m,2);let C=y*v-y*S-v*x;C<0&&(C=0),C/=y*S+v*x,C=Math.sqrt(C)*(l===c?-1:1);const b=C*r/s*m,P=C*-s/r*f,E=d*b-h*P+(i+t)/2,A=h*b+d*P+(e+n)/2,M=(f-b)/r,k=(m-P)/s,$=(-f-b)/r,D=(-m-P)/s,O=oy(1,0,M,k);let G=oy(M,k,$,D);c===0&&G>0&&(G-=la),c===1&&G<0&&(G+=la),g.centerX=E,g.centerY=A,g.ang1=O,g.ang2=G};function sT(i,e,t,n,r,s,l,c=0,h=0,d=0){if(s===0||l===0)return;const f=Math.sin(c*la/360),m=Math.cos(c*la/360),g=m*(e-n)/2+f*(t-r)/2,y=-f*(e-n)/2+m*(t-r)/2;if(g===0&&y===0)return;s=Math.abs(s),l=Math.abs(l);const v=Math.pow(g,2)/Math.pow(s,2)+Math.pow(y,2)/Math.pow(l,2);v>1&&(s*=Math.sqrt(v),l*=Math.sqrt(v)),iT(e,t,n,r,s,l,h,d,f,m,g,y,gd);let{ang1:x,ang2:S}=gd;const{centerX:C,centerY:b}=gd;let P=Math.abs(S)/(la/4);Math.abs(1-P)<1e-7&&(P=1);const E=Math.max(Math.ceil(P),1);S/=E;let A=i[i.length-2],M=i[i.length-1];const k={x:0,y:0};for(let $=0;$<E;$++){const D=rT(x,S),{x:O,y:G}=yd(D[0],s,l,m,f,C,b,k),{x:te,y:Z}=yd(D[1],s,l,m,f,C,b,k),{x:ie,y:he}=yd(D[2],s,l,m,f,C,b,k);Mx(i,A,M,O,G,te,Z,ie,he),A=ie,M=he,x+=S}}function oT(i,e,t){const n=(l,c)=>{const h=c.x-l.x,d=c.y-l.y,f=Math.sqrt(h*h+d*d),m=h/f,g=d/f;return{len:f,nx:m,ny:g}},r=(l,c)=>{l===0?i.moveTo(c.x,c.y):i.lineTo(c.x,c.y)};let s=e[e.length-1];for(let l=0;l<e.length;l++){const c=e[l%e.length],h=c.radius??t;if(h<=0){r(l,c),s=c;continue}const d=e[(l+1)%e.length],f=n(c,s),m=n(c,d);if(f.len<1e-4||m.len<1e-4){r(l,c),s=c;continue}let g=Math.asin(f.nx*m.ny-f.ny*m.nx),y=1,v=!1;f.nx*m.nx-f.ny*-m.ny<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,v=!0):g>0&&(y=-1,v=!0);const x=g/2;let S,C=Math.abs(Math.cos(x)*h/Math.sin(x));C>Math.min(f.len/2,m.len/2)?(C=Math.min(f.len/2,m.len/2),S=Math.abs(C*Math.sin(x)/Math.cos(x))):S=h;const b=c.x+m.nx*C+-m.ny*S*y,P=c.y+m.ny*C+m.nx*S*y,E=Math.atan2(f.ny,f.nx)+Math.PI/2*y,A=Math.atan2(m.ny,m.nx)-Math.PI/2*y;l===0&&i.moveTo(b+Math.cos(E)*S,P+Math.sin(E)*S),i.arc(b,P,S,E,A,v),s=c}}function aT(i,e,t,n){const r=(c,h)=>Math.sqrt((c.x-h.x)**2+(c.y-h.y)**2),s=(c,h,d)=>({x:c.x+(h.x-c.x)*d,y:c.y+(h.y-c.y)*d}),l=e.length;for(let c=0;c<l;c++){const h=e[(c+1)%l],d=h.radius??t;if(d<=0){c===0?i.moveTo(h.x,h.y):i.lineTo(h.x,h.y);continue}const f=e[c],m=e[(c+2)%l],g=r(f,h);let y;if(g<1e-4)y=h;else{const S=Math.min(g/2,d);y=s(h,f,S/g)}const v=r(m,h);let x;if(v<1e-4)x=h;else{const S=Math.min(v/2,d);x=s(h,m,S/v)}c===0?i.moveTo(y.x,y.y):i.lineTo(y.x,y.y),i.quadraticCurveTo(h.x,h.y,x.x,x.y,n)}}const lT=new qe;class cT{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new zn,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const n=this._currentPoly.points,r=n[n.length-2],s=n[n.length-1];return(r!==e||s!==t)&&n.push(e,t),this}arc(e,t,n,r,s,l){this._ensurePoly(!1);const c=this._currentPoly.points;return Rx(c,e,t,n,r,s,l),this}arcTo(e,t,n,r,s){this._ensurePoly();const l=this._currentPoly.points;return nT(l,e,t,n,r,s),this}arcToSvg(e,t,n,r,s,l,c){const h=this._currentPoly.points;return sT(h,this._currentPoly.lastX,this._currentPoly.lastY,l,c,e,t,n,r,s),this}bezierCurveTo(e,t,n,r,s,l,c){this._ensurePoly();const h=this._currentPoly;return Mx(this._currentPoly.points,h.lastX,h.lastY,e,t,n,r,s,l,c),this}quadraticCurveTo(e,t,n,r,s){this._ensurePoly();const l=this._currentPoly;return eT(this._currentPoly.points,l.lastX,l.lastY,e,t,n,r,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const n=this.shapePrimitives,r=n.length;for(let s=0;s<e.instructions.length;s++){const l=e.instructions[s];this[l.action](...l.data)}if(e.checkForHoles&&n.length-r>1){let s=null;for(let l=r;l<n.length;l++){const c=n[l];if(c.shape.type==="polygon"){const h=c.shape,d=s?.shape;d&&d.containsPolygon(h)?(s.holes||(s.holes=[]),s.holes.push(c),n.copyWithin(l,l+1),n.length--,l--):s=c}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,n,r,s){return this.drawShape(new qe(e,t,n,r),s),this}circle(e,t,n,r){return this.drawShape(new $f(e,t,n),r),this}poly(e,t,n){const r=new oa(e);return r.closePath=t,this.drawShape(r,n),this}regularPoly(e,t,n,r,s=0,l){r=Math.max(r|0,3);const c=-1*Math.PI/2+s,h=Math.PI*2/r,d=[];for(let f=0;f<r;f++){const m=c-f*h;d.push(e+n*Math.cos(m),t+n*Math.sin(m))}return this.poly(d,!0,l),this}roundPoly(e,t,n,r,s,l=0,c){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(e,t,n,r,l);const h=n*Math.sin(Math.PI/r)-.001;s=Math.min(s,h);const d=-1*Math.PI/2+l,f=Math.PI*2/r,m=(r-2)*Math.PI/r/2;for(let g=0;g<r;g++){const y=g*f+d,v=e+n*Math.cos(y),x=t+n*Math.sin(y),S=y+Math.PI+m,C=y-Math.PI-m,b=v+s*Math.cos(S),P=x+s*Math.sin(S),E=v+s*Math.cos(C),A=x+s*Math.sin(C);g===0?this.moveTo(b,P):this.lineTo(b,P),this.quadraticCurveTo(v,x,E,A,c)}return this.closePath()}roundShape(e,t,n=!1,r){return e.length<3?this:(n?aT(this,e,t,r):oT(this,e,t),this.closePath())}filletRect(e,t,n,r,s){if(s===0)return this.rect(e,t,n,r);const l=Math.min(n,r)/2,c=Math.min(l,Math.max(-l,s)),h=e+n,d=t+r,f=c<0?-c:0,m=Math.abs(c);return this.moveTo(e,t+m).arcTo(e+f,t+f,e+m,t,m).lineTo(h-m,t).arcTo(h-f,t+f,h,t+m,m).lineTo(h,d-m).arcTo(h-f,d-f,e+n-m,d,m).lineTo(e+m,d).arcTo(e+f,d-f,e,d-m,m).closePath()}chamferRect(e,t,n,r,s,l){if(s<=0)return this.rect(e,t,n,r);const c=Math.min(s,Math.min(n,r)/2),h=e+n,d=t+r,f=[e+c,t,h-c,t,h,t+c,h,d-c,h-c,d,e+c,d,e,d-c,e,t+c];for(let m=f.length-1;m>=2;m-=2)f[m]===f[m-2]&&f[m-1]===f[m-3]&&f.splice(m-1,2);return this.poly(f,!0,l)}ellipse(e,t,n,r,s){return this.drawShape(new Lf(e,t,n,r),s),this}roundRect(e,t,n,r,s,l){return this.drawShape(new Bf(e,t,n,r,s),l),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let n=this._currentPoly;return n&&this.endPoly(),n=new oa,n.points.push(e,t),this._currentPoly=n,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new oa,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let n=t.shape.x,r=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const s=t.transform,l=n;n=s.a*n+s.c*r+s.tx,r=s.b*l+s.d*r+s.ty}this._currentPoly.points.push(n,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const n=e.instructions[t];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let n=0;n<t.length;n++){const r=t[n],s=r.shape.getBounds(lT);r.transform?e.addRect(s,r.transform):e.addRect(s)}return e}}class vr{constructor(e,t=!1){this.instructions=[],this.uid=st("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?Rb(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new cT(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,n,r,s){const l=this.instructions[this.instructions.length-1],c=this.getLastPoint(Dt.shared);let h=0,d=0;if(!l||l.action!=="bezierCurveTo")h=c.x,d=c.y;else{h=l.data[2],d=l.data[3];const f=c.x,m=c.y;h=f+(f-h),d=m+(m-d)}return this.instructions.push({action:"bezierCurveTo",data:[h,d,e,t,n,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,n){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(Dt.shared);let l=0,c=0;if(!r||r.action!=="quadraticCurveTo")l=s.x,c=s.y;else{l=r.data[0],c=r.data[1];const h=s.x,d=s.y;l=h+(h-l),c=d+(d-c)}return this.instructions.push({action:"quadraticCurveTo",data:[l,c,e,t,n]}),this._dirty=!0,this}rect(e,t,n,r,s){return this.instructions.push({action:"rect",data:[e,t,n,r,s]}),this._dirty=!0,this}circle(e,t,n,r){return this.instructions.push({action:"circle",data:[e,t,n,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,n,r,s,l,c){s||(s=r/2);const h=-1*Math.PI/2+l,d=n*2,f=Math.PI*2/d,m=[];for(let g=0;g<d;g++){const y=g%2?s:r,v=g*f+h;m.push(e+y*Math.cos(v),t+y*Math.sin(v))}return this.poly(m,!0,c),this}clone(e=!1){const t=new vr;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const r=this.instructions[n];t.instructions.push({action:r.action,data:r.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,n=e.b,r=e.c,s=e.d,l=e.tx,c=e.ty;let h=0,d=0,f=0,m=0,g=0,y=0,v=0,x=0;for(let S=0;S<this.instructions.length;S++){const C=this.instructions[S],b=C.data;switch(C.action){case"moveTo":case"lineTo":h=b[0],d=b[1],b[0]=t*h+r*d+l,b[1]=n*h+s*d+c;break;case"bezierCurveTo":f=b[0],m=b[1],g=b[2],y=b[3],h=b[4],d=b[5],b[0]=t*f+r*m+l,b[1]=n*f+s*m+c,b[2]=t*g+r*y+l,b[3]=n*g+s*y+c,b[4]=t*h+r*d+l,b[5]=n*h+s*d+c;break;case"quadraticCurveTo":f=b[0],m=b[1],h=b[2],d=b[3],b[0]=t*f+r*m+l,b[1]=n*f+s*m+c,b[2]=t*h+r*d+l,b[3]=n*h+s*d+c;break;case"arcToSvg":h=b[5],d=b[6],v=b[0],x=b[1],b[0]=t*v+r*x,b[1]=n*v+s*x,b[5]=t*h+r*d+l,b[6]=n*h+s*d+c;break;case"circle":b[4]=jo(b[3],e);break;case"rect":b[4]=jo(b[4],e);break;case"ellipse":b[8]=jo(b[8],e);break;case"roundRect":b[5]=jo(b[5],e);break;case"addPath":b[0].transform(e);break;case"poly":b[2]=jo(b[2],e);break;default:Ge("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,n=this.instructions[t];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;n=this.instructions[t]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function jo(i,e){return i?i.prepend(e):e.clone()}function nt(i,e,t){const n=i.getAttribute(e);return n?Number(n):t}function uT(i,e){const t=i.querySelectorAll("defs");for(let n=0;n<t.length;n++){const r=t[n];for(let s=0;s<r.children.length;s++){const l=r.children[s];switch(l.nodeName.toLowerCase()){case"lineargradient":e.defs[l.id]=hT(l);break;case"radialgradient":e.defs[l.id]=dT();break}}}}function hT(i){const e=nt(i,"x1",0),t=nt(i,"y1",0),n=nt(i,"x2",1),r=nt(i,"y2",0),s=i.getAttribute("gradientUnits")||"objectBoundingBox",l=new Sr(e,t,n,r,s==="objectBoundingBox"?"local":"global");for(let c=0;c<i.children.length;c++){const h=i.children[c],d=nt(h,"offset",0),f=ft.shared.setValue(h.getAttribute("stop-color")).toNumber();l.addColorStop(d,f)}return l}function dT(i){return Ge("[SVG Parser] Radial gradients are not yet supported"),new Sr(0,0,1,0)}function ay(i){const e=i.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const ly={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Ix(i,e){const t=i.getAttribute("style"),n={},r={},s={strokeStyle:n,fillStyle:r,useFill:!1,useStroke:!1};for(const l in ly){const c=i.getAttribute(l);c&&cy(e,s,l,c.trim())}if(t){const l=t.split(";");for(let c=0;c<l.length;c++){const h=l[c].trim(),[d,f]=h.split(":");ly[d]&&cy(e,s,d,f.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?r:null,useFill:s.useFill,useStroke:s.useStroke}}function cy(i,e,t,n){switch(t){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const r=ay(n);e.strokeStyle.fill=i.defs[r]}else e.strokeStyle.color=ft.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const r=ay(n);e.fillStyle.fill=i.defs[r]}else e.fillStyle.color=ft.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function fT(i){if(i.length<=2)return!0;const e=i.map(c=>c.area).sort((c,h)=>h-c),[t,n]=e,r=e[e.length-1],s=t/n,l=n/r;return!(s>3&&l<2)}function pT(i){return i.split(/(?=[Mm])/).filter(n=>n.trim().length>0)}function mT(i){const e=i.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),n=[],r=[];for(let f=0;f<t.length;f+=2)f+1<t.length&&(n.push(t[f]),r.push(t[f+1]));if(n.length===0||r.length===0)return 0;const s=Math.min(...n),l=Math.max(...n),c=Math.min(...r),h=Math.max(...r);return(l-s)*(h-c)}function uy(i,e){const t=new vr(i,!1);for(const n of t.instructions)e.instructions.push(n)}function gT(i,e){if(typeof i=="string"){const l=document.createElement("div");l.innerHTML=i.trim(),i=l.querySelector("svg")}const t={context:e,defs:{},path:new vr};uT(i,t);const n=i.children,{fillStyle:r,strokeStyle:s}=Ix(i,t);for(let l=0;l<n.length;l++){const c=n[l];c.nodeName.toLowerCase()!=="defs"&&Dx(c,t,r,s)}return e}function Dx(i,e,t,n){const r=i.children,{fillStyle:s,strokeStyle:l}=Ix(i,e);s&&t?t={...t,...s}:s&&(t=s),l&&n?n={...n,...l}:l&&(n=l);const c=!t&&!n;c&&(t={color:0});let h,d,f,m,g,y,v,x,S,C,b,P,E,A,M,k,$;switch(i.nodeName.toLowerCase()){case"path":{A=i.getAttribute("d");const D=i.getAttribute("fill-rule"),O=pT(A),G=D==="evenodd",te=O.length>1;if(G&&te){const ie=O.map(V=>({path:V,area:mT(V)}));if(ie.sort((V,Q)=>Q.area-V.area),O.length>3||!fT(ie))for(let V=0;V<ie.length;V++){const Q=ie[V],X=V===0;e.context.beginPath();const U=new vr(void 0,!0);uy(Q.path,U),e.context.path(U),X?(t&&e.context.fill(t),n&&e.context.stroke(n)):e.context.cut()}else for(let V=0;V<ie.length;V++){const Q=ie[V],X=V%2===1;e.context.beginPath();const U=new vr(void 0,!0);uy(Q.path,U),e.context.path(U),X?e.context.cut():(t&&e.context.fill(t),n&&e.context.stroke(n))}}else{const ie=D?D==="evenodd":!0;M=new vr(A,ie),e.context.path(M),t&&e.context.fill(t),n&&e.context.stroke(n)}break}case"circle":v=nt(i,"cx",0),x=nt(i,"cy",0),S=nt(i,"r",0),e.context.ellipse(v,x,S,S),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"rect":h=nt(i,"x",0),d=nt(i,"y",0),k=nt(i,"width",0),$=nt(i,"height",0),C=nt(i,"rx",0),b=nt(i,"ry",0),C||b?e.context.roundRect(h,d,k,$,C||b):e.context.rect(h,d,k,$),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"ellipse":v=nt(i,"cx",0),x=nt(i,"cy",0),C=nt(i,"rx",0),b=nt(i,"ry",0),e.context.beginPath(),e.context.ellipse(v,x,C,b),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"line":f=nt(i,"x1",0),m=nt(i,"y1",0),g=nt(i,"x2",0),y=nt(i,"y2",0),e.context.beginPath(),e.context.moveTo(f,m),e.context.lineTo(g,y),n&&e.context.stroke(n);break;case"polygon":E=i.getAttribute("points"),P=E.match(/\d+/g).map(D=>parseInt(D,10)),e.context.poly(P,!0),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"polyline":E=i.getAttribute("points"),P=E.match(/\d+/g).map(D=>parseInt(D,10)),e.context.poly(P,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Ge(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}c&&(t=null);for(let D=0;D<r.length;D++)Dx(r[D],e,t,n)}function yT(i){return ft.isColorLike(i)}function hy(i){return i instanceof zc}function dy(i){return i instanceof Sr}function _T(i){return i instanceof Ae}function xT(i,e,t){const n=ft.shared.setValue(e??0);return i.color=n.toNumber(),i.alpha=n.alpha===1?t.alpha:n.alpha,i.texture=Ae.WHITE,{...t,...i}}function vT(i,e,t){return i.texture=e,{...t,...i}}function fy(i,e,t){return i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,{...t,...i}}function py(i,e,t){return e.buildGradient(),i.fill=e,i.color=16777215,i.texture=e.texture,i.matrix=e.transform,i.textureSpace=e.textureSpace,{...t,...i}}function ST(i,e){const t={...e,...i},n=ft.shared.setValue(t.color);return t.alpha*=n.alpha,t.color=n.toNumber(),t}function Ei(i,e){if(i==null)return null;const t={},n=i;return yT(i)?xT(t,i,e):_T(i)?vT(t,i,e):hy(i)?fy(t,i,e):dy(i)?py(t,i,e):n.fill&&hy(n.fill)?fy(n,n.fill,e):n.fill&&dy(n.fill)?py(n,n.fill,e):ST(n,e)}function wc(i,e){const{width:t,alignment:n,miterLimit:r,cap:s,join:l,pixelLine:c,...h}=e,d=Ei(i,h);return d?{width:t,alignment:n,miterLimit:r,cap:s,join:l,pixelLine:c,...d}:null}const wT=new Dt,my=new be,Of=class Jn extends Wn{constructor(){super(...arguments),this.uid=st("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new vr,this._transform=new be,this._fillStyle={...Jn.defaultFillStyle},this._strokeStyle={...Jn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new zn,this._boundsDirty=!0}clone(){const e=new Jn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ei(e,Jn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=wc(e,Jn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ei(e,Jn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ei(e,Jn.defaultStrokeStyle),this}texture(e,t,n,r,s,l){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:r||0,dw:s||e.frame.width,dh:l||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?ft.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new vr,this}fill(e,t){let n;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r?.action==="stroke"?n=r.data.path:n=this._activePath.clone(),n?(e!=null&&(t!==void 0&&typeof e=="number"&&(we(Le,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Ei(e,Jn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(Dt.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n?.action==="fill"?t=n.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=wc(e,Jn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(n);else{t.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,t,n,r,s,l){this._tick++;const c=this._transform;return this._activePath.arc(c.a*e+c.c*t+c.tx,c.b*e+c.d*t+c.ty,n,r,s,l),this}arcTo(e,t,n,r,s){this._tick++;const l=this._transform;return this._activePath.arcTo(l.a*e+l.c*t+l.tx,l.b*e+l.d*t+l.ty,l.a*n+l.c*r+l.tx,l.b*n+l.d*r+l.ty,s),this}arcToSvg(e,t,n,r,s,l,c){this._tick++;const h=this._transform;return this._activePath.arcToSvg(e,t,n,r,s,h.a*l+h.c*c+h.tx,h.b*l+h.d*c+h.ty),this}bezierCurveTo(e,t,n,r,s,l,c){this._tick++;const h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,h.a*n+h.c*r+h.tx,h.b*n+h.d*r+h.ty,h.a*s+h.c*l+h.tx,h.b*s+h.d*l+h.ty,c),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,n,r){return this._tick++,this._activePath.ellipse(e,t,n,r,this._transform.clone()),this}circle(e,t,n){return this._tick++,this._activePath.circle(e,t,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty),this}moveTo(e,t){this._tick++;const n=this._transform,r=this._activePath.instructions,s=n.a*e+n.c*t+n.tx,l=n.b*e+n.d*t+n.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=l,this):(this._activePath.moveTo(s,l),this)}quadraticCurveTo(e,t,n,r,s){this._tick++;const l=this._transform;return this._activePath.quadraticCurveTo(l.a*e+l.c*t+l.tx,l.b*e+l.d*t+l.ty,l.a*n+l.c*r+l.tx,l.b*n+l.d*r+l.ty,s),this}rect(e,t,n,r){return this._tick++,this._activePath.rect(e,t,n,r,this._transform.clone()),this}roundRect(e,t,n,r,s){return this._tick++,this._activePath.roundRect(e,t,n,r,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,n,r,s=0,l){return this._tick++,this._activePath.regularPoly(e,t,n,r,s,l),this}roundPoly(e,t,n,r,s,l){return this._tick++,this._activePath.roundPoly(e,t,n,r,s,l),this}roundShape(e,t,n,r){return this._tick++,this._activePath.roundShape(e,t,n,r),this}filletRect(e,t,n,r,s){return this._tick++,this._activePath.filletRect(e,t,n,r,s),this}chamferRect(e,t,n,r,s,l){return this._tick++,this._activePath.chamferRect(e,t,n,r,s,l),this}star(e,t,n,r,s=0,l=0){return this._tick++,this._activePath.star(e,t,n,r,s,l,this._transform.clone()),this}svg(e){return this._tick++,gT(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,n,r,s,l){return e instanceof be?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,n,r,s,l),this)}transform(e,t,n,r,s,l){return e instanceof be?(this._transform.append(e),this):(my.set(e,t,n,r,s,l),this._transform.append(my),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const n=this.instructions[t],r=n.action;if(r==="fill"){const s=n.data;e.addBounds(s.path.bounds)}else if(r==="texture"){const s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=n.data,l=s.style.alignment,c=s.style.width*(1-l),h=s.path.bounds;e.addFrame(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let n=!1;for(let r=0;r<t.length;r++){const s=t[r],l=s.data,c=l.path;if(!s.action||!c)continue;const h=l.style,d=c.shapePath.shapePrimitives;for(let f=0;f<d.length;f++){const m=d[f].shape;if(!h||!m)continue;const g=d[f].transform,y=g?g.applyInverse(e,wT):e;if(s.action==="fill")n=m.contains(y.x,y.y);else{const x=h;n=m.strokeContains(y.x,y.y,x.width,x.alignment)}const v=l.hole;if(v){const x=v.shapePath?.shapePrimitives;if(x)for(let S=0;S<x.length;S++)x[S].shape.contains(y.x,y.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(n)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(n))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Of.defaultFillStyle={color:16777215,alpha:1,texture:Ae.WHITE,matrix:null,fill:null,textureSpace:"local"};Of.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ae.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Sn=Of;const Nf=class ps extends Wn{constructor(e={}){super(),this.uid=st("textStyle"),this._tick=0,CT(e);const t={...ps.defaultTextStyle,...e};for(const n in t){const r=n;this[r]=t[n]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...ps.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...ps.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Sn.defaultFillStyle,...e},()=>{this._fill=Ei({...this._originalFill},Sn.defaultFillStyle)})),this._fill=Ei(e===0?"black":e,Sn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Sn.defaultStrokeStyle,...e},()=>{this._stroke=wc({...this._originalStroke},Sn.defaultStrokeStyle)})),this._stroke=wc(e,Sn.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=ps.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new ps({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(n),this._originalFill?.texture&&this._originalFill.texture.destroy(n),this._stroke?.texture&&this._stroke.texture.destroy(n),this._originalStroke?.texture&&this._originalStroke.texture.destroy(n)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(n,r,s)=>(n[r]===s||(n[r]=s,t?.(r,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(ft.isColorLike(e)||e instanceof Sr||e instanceof zc)}};Nf.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Nf.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let _a=Nf;function CT(i){const e=i;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=_a.defaultDropShadow;i.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){we(Le,"strokeThickness is now a part of stroke");const t=e.stroke;let n={};if(ft.isColorLike(t))n.color=t;else if(t instanceof Sr||t instanceof zc)n.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))n=t;else throw new Error("Invalid stroke value.");i.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(we(Le,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ge("The number of fill colors must match the number of fill gradient stops.");const t=new Sr({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),r=e.fill.map(s=>ft.shared.setValue(s).toNumber());n.forEach((s,l)=>{t.addColorStop(s,r[l])}),i.fill={fill:t}}}class bT{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const n=He.get().createCanvas();n.width=e,n.height=t;const r=n.getContext("2d");return{canvas:n,context:r}}getOptimalCanvasAndContext(e,t,n=1){e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),e=Is(e),t=Is(t);const r=(e<<17)+(t<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){const t=e.canvas,{width:n,height:r}=t,s=(n<<17)+(r<<1);e.context.resetTransform(),e.context.clearRect(0,0,n,r),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const xa=new bT;ka.register(xa);const gy=1e5;function Cc(i,e,t,n=0){if(i.texture===Ae.WHITE&&!i.fill)return ft.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof zc){const r=i.fill,s=e.createPattern(r.texture.source.resource,"repeat"),l=r.transform.copyTo(be.shared);return l.scale(r.texture.frame.width,r.texture.frame.height),s.setTransform(l),s}else if(i.fill instanceof Sr){const r=i.fill,s=r.type==="linear",l=r.textureSpace==="local";let c=1,h=1;l&&t&&(c=t.width+n,h=t.height+n);let d,f=!1;if(s){const{start:m,end:g}=r;d=e.createLinearGradient(m.x*c,m.y*h,g.x*c,g.y*h),f=Math.abs(g.x-m.x)<Math.abs((g.y-m.y)*.1)}else{const{center:m,innerRadius:g,outerCenter:y,outerRadius:v}=r;d=e.createRadialGradient(m.x*c,m.y*h,g*c,y.x*c,y.y*h,v*c)}if(f&&l&&t){const m=t.lineHeight/h;for(let g=0;g<t.lines.length;g++){const y=(g*t.lineHeight+n/2)/h;r.colorStops.forEach(v=>{const x=y+v.offset*m;d.addColorStop(Math.floor(x*gy)/gy,ft.shared.setValue(v.color).toHex())})}}else r.colorStops.forEach(m=>{d.addColorStop(m.offset,ft.shared.setValue(m.color).toHex())});return d}}else{const r=e.createPattern(i.texture.source.resource,"repeat"),s=i.matrix.copyTo(be.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}return Ge("FillStyle not recognised",i),"red"}const $x=class Lx extends mx{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...Lx.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const n=t.style.clone();t.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=Ae.WHITE,n._fill.fill=null),this.applyFillAsTint=t.overrideFill;const r=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=vc(n);t.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/r):n.fontSize=this.baseRenderedFontSize=r,this._style=n,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof Ds?t.textureStyle:new Ds(t.textureStyle)),this.fontMetrics=tr.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){const t=tr.graphemeSegmenter(e).filter(S=>!this._currentChars.includes(S)).filter((S,C,b)=>b.indexOf(S)===C);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:r,context:s}=n.canvasAndContext,l=n.texture.source;const c=this._style;let h=this._currentX,d=this._currentY,f=this._currentMaxCharHeight;const m=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*m;let y=!1;const v=r.width/this.resolution,x=r.height/this.resolution;for(let S=0;S<t.length;S++){const C=t[S],b=tr.measureText(C,c,r,!1);b.lineHeight=b.height;const P=b.width*m,E=Math.ceil((c.fontStyle==="italic"?2:1)*P),A=b.height*m,M=E+g*2,k=A+g*2;if(y=!1,C!==`
`&&C!=="\r"&&C!=="	"&&C!==" "&&(y=!0,f=Math.ceil(Math.max(k,f))),h+M>v&&(d+=f,f=k,h=0,d+f>x)){l.update();const D=this._nextPage();r=D.canvasAndContext.canvas,s=D.canvasAndContext.context,l=D.texture.source,h=0,d=0,f=0}const $=P/m-(c.dropShadow?.distance??0)-(c._stroke?.width??0);if(this.chars[C]={id:C.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:$,kerning:{}},y){this._drawGlyph(s,b,h+g,d+g,m,c);const D=l.width*m,O=l.height*m,G=new qe(h/D*l.width,d/O*l.height,M/D*l.width,k/O*l.height);this.chars[C].texture=new Ae({source:l,frame:G}),h+=Math.ceil(M)}}l.update(),this._currentX=h,this._currentY=d,this._currentMaxCharHeight=f,this._skipKerning&&this._applyKerning(t,s)}get pageTextures(){return we(Le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const n=this._measureCache;for(let r=0;r<e.length;r++){const s=e[r];for(let l=0;l<this._currentChars.length;l++){const c=this._currentChars[l];let h=n[s];h||(h=n[s]=t.measureText(s).width);let d=n[c];d||(d=n[c]=t.measureText(c).width);let f=t.measureText(s+c).width,m=f-(h+d);m&&(this.chars[s].kerning[c]=m),f=t.measureText(s+c).width,m=f-(h+d),m&&(this.chars[c].kerning[s]=m)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=xa.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new Ae({source:new Li({resource:t.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);const s={canvasAndContext:t,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,n){t.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=vc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const r=t._stroke,s=r?.width??0;if(r&&(e.lineWidth=s,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=Cc(r,e)),t._fill&&(e.fillStyle=Cc(t._fill,e)),t.dropShadow){const l=t.dropShadow,c=ft.shared.setValue(l.color).toArray(),h=l.blur*n,d=l.distance*n;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${l.alpha})`,e.shadowBlur=h,e.shadowOffsetX=Math.cos(l.angle)*d,e.shadowOffsetY=Math.sin(l.angle)*d}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,n,r,s,l){const c=t.text,h=t.fontProperties,f=(l._stroke?.width??0)*s,m=n+f/2,g=r-f/2,y=h.descent*s,v=t.lineHeight*s;let x=!1;l.stroke&&f&&(x=!0,e.strokeText(c,m,g+v-y));const{shadowBlur:S,shadowOffsetX:C,shadowOffsetY:b}=e;l._fill&&(x&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(c,m,g+v-y)),x&&(e.shadowBlur=S,e.shadowOffsetX=C,e.shadowOffsetY=b)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:n}=this.pages[e];xa.returnCanvasAndContext(t),n.destroy(!0)}this.pages=null}};$x.defaultOptions={textureSize:512,style:new _a,mipmap:!0};let yy=$x;function TT(i,e,t,n){const r={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=t.baseLineOffset;let s=r.lines[0],l=null,c=!0;const h={width:0,start:0,index:0,positions:[],chars:[]},d=t.baseMeasurementFontSize/e.fontSize,f=e.letterSpacing*d,m=e.wordWrapWidth*d,g=e.lineHeight?e.lineHeight*d:t.lineHeight,y=e.wordWrap&&e.breakWords,v=C=>{const b=s.width;for(let P=0;P<h.index;P++){const E=C.positions[P];s.chars.push(C.chars[P]),s.charPositions.push(E+b)}s.width+=C.width,c=!1,h.width=0,h.index=0,h.chars.length=0},x=()=>{let C=s.chars.length-1;if(n){let b=s.chars[C];for(;b===" ";)s.width-=t.chars[b].xAdvance,b=s.chars[--C]}r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,r.lines.push(s),r.height+=g},S=C=>C-f>m;for(let C=0;C<i.length+1;C++){let b;const P=C===i.length;P||(b=i[C]);const E=t.chars[b]||t.chars[" "];if(/(?:\s)/.test(b)||b==="\r"||b===`
`||P){if(!c&&e.wordWrap&&S(s.width+h.width)?(x(),v(h),P||s.charPositions.push(0)):(h.start=s.width,v(h),P||s.charPositions.push(0)),b==="\r"||b===`
`)x();else if(!P){const $=E.xAdvance+(E.kerning[l]||0)+f;s.width+=$,s.spaceWidth=$,s.spacesIndex.push(s.charPositions.length),s.chars.push(b)}}else{const k=E.kerning[l]||0,$=E.xAdvance+k+f;y&&S(s.width+h.width+$)&&(v(h),x()),h.positions[h.index++]=h.width+k,h.chars.push(b),h.width+=$}l=b}return x(),e.align==="center"?PT(r):e.align==="right"?ET(r):e.align==="justify"&&AT(r),r}function PT(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],n=i.width/2-t.width/2;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=n}}function ET(i){for(let e=0;e<i.lines.length;e++){const t=i.lines[e],n=i.width-t.width;for(let r=0;r<t.charPositions.length;r++)t.charPositions[r]+=n}}function AT(i){const e=i.width;for(let t=0;t<i.lines.length;t++){const n=i.lines[t];let r=0,s=n.spacesIndex[r++],l=0;const c=n.spacesIndex.length,d=(e-n.width)/c;for(let f=0;f<n.charPositions.length;f++)f===s&&(s=n.spacesIndex[r++],l+=d),n.charPositions[f]+=l}}function kT(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=r[0].charCodeAt(0),l=r[1].charCodeAt(0);if(l<s)throw new Error("[BitmapFont]: Invalid character range.");for(let c=s,h=l;c<=h;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let sc=0;class MT{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=gx(1e3)}getFont(e,t){let n=`${t.fontFamily}-bitmap`,r=!0;if(t._fill.fill&&!t._stroke?(n+=t._fill.fill.styleKey,r=!1):(t._stroke||t.dropShadow)&&(n=`${t.styleKey}-bitmap`,r=!1),!je.has(n)){const l=Object.create(t);l.lineHeight=0;const c=new yy({style:l,overrideFill:r,overrideSize:!0,...this.defaultOptions});sc++,sc>50&&Ge("BitmapText",`You have dynamically created ${sc} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),c.once("destroy",()=>{sc--,je.remove(n)}),je.set(n,c)}const s=je.get(n);return s.ensureCharacters?.(e),s}getLayout(e,t,n=!0){const r=this.getFont(e,t),s=`${e}-${t.styleKey}-${n}`;if(this.measureCache.has(s))return this.measureCache.get(s);const l=tr.graphemeSegmenter(e),c=TT(l,t,r,n);return this.measureCache.set(s,c),c}measureText(e,t,n=!0){return this.getLayout(e,t,n)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},we(Le,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=t?.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const r=t.style,s=r instanceof _a?r:new _a(r),l=t.dynamicFill??this._canUseTintForStyle(s),c=new yy({style:s,overrideFill:l,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),h=kT(t.chars);return c.ensureCharacters(h.join("")),je.set(`${n}-bitmap`,c),c.once("destroy",()=>je.remove(`${n}-bitmap`)),c}uninstall(e){const t=`${e}-bitmap`,n=je.get(t);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const _y=new MT;class Bx extends mx{constructor(e,t){super();const{textures:n,data:r}=e;Object.keys(r.pages).forEach(s=>{const l=r.pages[parseInt(s,10)],c=n[l.id];this.pages.push({texture:c})}),Object.keys(r.chars).forEach(s=>{const l=r.chars[s],{frame:c,source:h,rotate:d}=n[l.page],f=Be.transformRectCoords(l,c,d,new qe),m=new Ae({frame:f,orig:new qe(0,0,l.width,l.height),source:h,rotate:d});this.chars[s]={id:s.codePointAt(0),xOffset:l.xOffset,yOffset:l.yOffset,xAdvance:l.xAdvance,kerning:l.kerning??{},texture:m}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){_y.install(e)}static uninstall(e){_y.uninstall(e)}}const _d={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const e=i.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const m in e){const g=e[m].match(/^[a-z]+/gm)[0],y=e[m].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),v={};for(const x in y){const S=y[x].split("="),C=S[0],b=S[1].replace(/"/gm,""),P=parseFloat(b),E=isNaN(P)?b:P;v[C]=E}t[g].push(v)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=t.info,[s]=t.common,[l]=t.distanceField??[];l&&(n.distanceField={range:parseInt(l.distanceRange,10),type:l.fieldType}),n.fontSize=parseInt(r.size,10),n.fontFamily=r.face,n.lineHeight=parseInt(s.lineHeight,10);const c=t.page;for(let m=0;m<c.length;m++)n.pages.push({id:parseInt(c[m].id,10)||0,file:c[m].file});const h={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);const d=t.char;for(let m=0;m<d.length;m++){const g=d[m],y=parseInt(g.id,10);let v=g.letter??g.char??String.fromCharCode(y);v==="space"&&(v=" "),h[y]=v,n.chars[v]={id:y,page:parseInt(g.page,10)||0,x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xOffset:parseInt(g.xoffset,10),yOffset:parseInt(g.yoffset,10),xAdvance:parseInt(g.xadvance,10),kerning:{}}}const f=t.kerning||[];for(let m=0;m<f.length;m++){const g=parseInt(f[m].first,10),y=parseInt(f[m].second,10),v=parseInt(f[m].amount,10);n.chars[h[y]].kerning[h[g]]=v}return n}},xy={test(i){const e=i;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=i.getElementsByTagName("info")[0],n=i.getElementsByTagName("common")[0],r=i.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const s=i.getElementsByTagName("page"),l=i.getElementsByTagName("char"),c=i.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let d=0;d<s.length;d++)e.pages.push({id:parseInt(s[d].getAttribute("id"),10)||0,file:s[d].getAttribute("file")});const h={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let d=0;d<l.length;d++){const f=l[d],m=parseInt(f.getAttribute("id"),10);let g=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(m);g==="space"&&(g=" "),h[m]=g,e.chars[g]={id:m,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let d=0;d<c.length;d++){const f=parseInt(c[d].getAttribute("first"),10),m=parseInt(c[d].getAttribute("second"),10),g=parseInt(c[d].getAttribute("amount"),10);e.chars[h[m]].kerning[h[f]]=g}return e}},vy={test(i){return typeof i=="string"&&i.includes("<font>")?xy.test(He.get().parseXML(i)):!1},parse(i){return xy.parse(He.get().parseXML(i))}},RT=[".xml",".fnt"],IT={extension:{type:pe.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof Bx,getCacheableAssets(i,e){const t={};return i.forEach(n=>{t[n]=e,t[`${n}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},DT={extension:{type:pe.LoadParser,priority:ri.Normal},name:"loadBitmapFont",id:"bitmap-font",test(i){return RT.includes(cn.extname(i).toLowerCase())},async testParse(i){return _d.test(i)||vy.test(i)},async parse(i,e,t){const n=_d.test(i)?_d.parse(i):vy.parse(i),{src:r}=e,{pages:s}=n,l=[],c=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let m=0;m<s.length;++m){const g=s[m].file;let y=cn.join(cn.dirname(r),g);y=Wd(y,r),l.push({src:y,data:c})}const h=await t.load(l),d=l.map(m=>h[m.src]);return new Bx({data:n,textures:d},r)},async load(i,e){return await(await He.get().fetch(i)).text()},async unload(i,e,t){await Promise.all(i.pages.map(n=>t.unload(n.texture.source._sourceOrigin))),i.destroy()}};class $T{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const LT={extension:{type:pe.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(e=>e instanceof Ae),getCacheableAssets:(i,e)=>{const t={};return i.forEach(n=>{e.forEach((r,s)=>{t[n+(s===0?"":s+1)]=r})}),t}};async function Fx(i){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(i)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const BT={extension:{type:pe.DetectionParser,priority:1},test:async()=>Fx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")},Sy=["png","jpg","jpeg"],FT={extension:{type:pe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Sy],remove:async i=>i.filter(e=>!Sy.includes(e))},OT="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function jc(i){return OT?!1:document.createElement("video").canPlayType(i)!==""}const NT={extension:{type:pe.DetectionParser,priority:0},test:async()=>jc("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")},HT={extension:{type:pe.DetectionParser,priority:0},test:async()=>jc("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")},zT={extension:{type:pe.DetectionParser,priority:0},test:async()=>jc("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")},WT={extension:{type:pe.DetectionParser,priority:0},test:async()=>Fx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")},Ox=class dc{constructor(){this.loadOptions={...dc.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{let r=null,s=null;if((t.parser||t.loadParser)&&(s=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ge(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Ge(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&c.test?.(e,t,this)){s=c;break}}if(!s)return Ge(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,t,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await c.testParse?.(r,t,this)&&(r=await c.parse(r,t,this)||r,n.parser=c)}return r})(),n}async load(e,t){this._parsersValidated||this._validateParsers();const n=typeof t=="function"?{...dc.defaultOptions,...this.loadOptions,onProgress:t}:{...dc.defaultOptions,...this.loadOptions,...t||{}},{onProgress:r,onError:s,strategy:l,retryCount:c,retryDelay:h}=n;let d=0;const f={},m=xc(e),g=Nn(e,x=>({alias:[x],src:x,data:{}})),y=g.reduce((x,S)=>x+(S.progressSize||1),0),v=g.map(async x=>{const S=cn.toAbsolute(x.src);f[x.src]||(await this._loadAssetWithRetry(S,x,{onProgress:r,onError:s,strategy:l,retryCount:c,retryDelay:h},f),d+=x.progressSize||1,r&&r(d/y))});return await Promise.all(v),m?f[g[0].src]:f}async unload(e){const n=Nn(e,r=>({alias:[r],src:r})).map(async r=>{const s=cn.toAbsolute(r.src),l=this.promiseCache[s];if(l){const c=await l.promise;delete this.promiseCache[s],await l.parser?.unload?.(c,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ge("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ge(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,n,r){let s=0;const{onError:l,strategy:c,retryCount:h,retryDelay:d}=n,f=m=>new Promise(g=>setTimeout(g,m));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),r[t.src]=await this.promiseCache[e].promise;return}catch(m){delete this.promiseCache[e],delete r[t.src],s++;const g=c!=="retry"||s>h;if(c==="retry"&&!g){l&&l(m,t),await f(d);continue}if(c==="skip"){l&&l(m,t);return}throw l&&l(m,t),new Error(`[Loader.load] Failed to load ${e}.
${m}`)}}};Ox.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let jT=Ox;function Xs(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function Qs(i,e){const t=i.split("?")[0],n=cn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const GT=".json",UT="application/json",VT={extension:{type:pe.LoadParser,priority:ri.Low},name:"loadJson",id:"json",test(i){return Xs(i,UT)||Qs(i,GT)},async load(i){return await(await He.get().fetch(i)).json()}},qT=".txt",YT="text/plain",XT={name:"loadTxt",id:"text",extension:{type:pe.LoadParser,priority:ri.Low,name:"loadTxt"},test(i){return Xs(i,YT)||Qs(i,qT)},async load(i){return await(await He.get().fetch(i)).text()}},QT=["normal","bold","100","200","300","400","500","600","700","800","900"],KT=[".ttf",".otf",".woff",".woff2"],ZT=["font/ttf","font/otf","font/woff","font/woff2"],JT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function eP(i){const e=cn.extname(i),r=cn.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1));let s=r.length>0;for(const c of r)if(!c.match(JT)){s=!1;break}let l=r.join(" ");return s||(l=`"${l.replace(/[\\"]/g,"\\$&")}"`),l}const tP=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function nP(i){return tP.test(i)?i:encodeURI(i)}const rP={extension:{type:pe.LoadParser,priority:ri.Low},name:"loadWebFont",id:"web-font",test(i){return Xs(i,ZT)||Qs(i,KT)},async load(i,e){const t=He.get().getFontFaceSet();if(t){const n=[],r=e.data?.family??eP(i),s=e.data?.weights?.filter(c=>QT.includes(c))??["normal"],l=e.data??{};for(let c=0;c<s.length;c++){const h=s[c],d=new FontFace(r,`url(${nP(i)})`,{...l,weight:h});await d.load(),t.add(d),n.push(d)}return je.has(`${r}-and-url`)?je.get(`${r}-and-url`).entries.push({url:i,faces:n}):je.set(`${r}-and-url`,{entries:[{url:i,faces:n}]}),n.length===1?n[0]:n}return Ge("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){const e=Array.isArray(i)?i:[i],t=e[0].family,n=je.get(`${t}-and-url`),r=n.entries.find(s=>s.faces.some(l=>e.indexOf(l)!==-1));r.faces=r.faces.filter(s=>e.indexOf(s)===-1),r.faces.length===0&&(n.entries=n.entries.filter(s=>s!==r)),e.forEach(s=>{He.get().getFontFaceSet().delete(s)}),n.entries.length===0&&je.remove(`${t}-and-url`)}};function Hf(i,e=1){const t=Ys.RETINA_PREFIX?.exec(i);return t?parseFloat(t[1]):e}function zf(i,e,t){i.label=t,i._sourceOrigin=t;const n=new Ae({source:i,label:t}),r=()=>{delete e.promiseCache[t],je.has(t)&&je.remove(t)};return n.source.once("destroy",()=>{e.promiseCache[t]&&(Ge("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),n.once("destroy",()=>{i.destroyed||(Ge("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),n}const iP=".svg",sP="image/svg+xml",oP={extension:{type:pe.LoadParser,priority:ri.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return Xs(i,sP)||Qs(i,iP)},async load(i,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?lP(i):aP(i,e,t,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function aP(i,e,t,n){const r=await He.get().fetch(i),s=He.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await r.text())}`,s.crossOrigin=n,await s.decode();const l=e.data?.width??s.width,c=e.data?.height??s.height,h=e.data?.resolution||Hf(i),d=Math.ceil(l*h),f=Math.ceil(c*h),m=He.get().createCanvas(d,f),g=m.getContext("2d");g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="high",g.drawImage(s,0,0,l*h,c*h);const{parseAsGraphicsContext:y,...v}=e.data??{},x=new Li({resource:m,alphaMode:"premultiply-alpha-on-upload",resolution:h,...v});return zf(x,t,i)}async function lP(i){const t=await(await He.get().fetch(i)).text(),n=new Sn;return n.svg(t),n}const cP=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let bs=null,Jd=class{constructor(){bs||(bs=URL.createObjectURL(new Blob([cP],{type:"application/javascript"}))),this.worker=new Worker(bs)}};Jd.revokeObjectURL=function(){bs&&(URL.revokeObjectURL(bs),bs=null)};const uP=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Ts=null;class Nx{constructor(){Ts||(Ts=URL.createObjectURL(new Blob([uP],{type:"application/javascript"}))),this.worker=new Worker(Ts)}}Nx.revokeObjectURL=function(){Ts&&(URL.revokeObjectURL(Ts),Ts=null)};let wy=0,xd;class hP{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Jd;t.addEventListener("message",n=>{t.terminate(),Jd.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){xd===void 0&&(xd=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<xd&&(this._createdWorkers++,e=new Nx().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const n=new Promise((r,s)=>{this._queue.push({id:e,arguments:t,resolve:r,reject:s})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),n=t.id;this._resolveHash[wy]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:wy++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Cy=new hP,dP=[".jpeg",".jpg",".png",".webp",".avif"],fP=["image/jpeg","image/png","image/webp","image/avif"];async function pP(i,e){const t=await He.get().fetch(i);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${t.status} ${t.statusText}`);const n=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const Hx={name:"loadTextures",id:"texture",extension:{type:pe.LoadParser,priority:ri.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Xs(i,fP)||Qs(i,dP)},async load(i,e,t){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Cy.isImageBitmapSupported()?n=await Cy.loadImageBitmap(i,e):n=await pP(i,e):n=await new Promise((s,l)=>{n=He.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=i,n.complete?s(n):(n.onload=()=>{s(n)},n.onerror=l)});const r=new Li({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||Hf(i),...e.data});return zf(r,t,i)},unload(i){i.destroy(!0)}},mP=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let vd,Sd;function gP(i,e,t){t===void 0&&!e.startsWith("data:")?i.crossOrigin=_P(e):t!==!1&&(i.crossOrigin=typeof t=="string"?t:"anonymous")}function yP(i){return new Promise((e,t)=>{i.addEventListener("canplaythrough",n),i.addEventListener("error",r),i.load();function n(){s(),e()}function r(l){s(),t(l)}function s(){i.removeEventListener("canplaythrough",n),i.removeEventListener("error",r)}})}function _P(i,e=globalThis.location){if(i.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function xP(){const i=[],e=[];for(const t of mP){const n=sa.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;jc(n)&&(i.push(t),e.includes(n)||e.push(n))}return{validVideoExtensions:i,validVideoMime:e}}const vP={name:"loadVideo",id:"video",extension:{type:pe.LoadParser,name:"loadVideo"},test(i){if(!vd||!Sd){const{validVideoExtensions:n,validVideoMime:r}=xP();vd=n,Sd=r}const e=Xs(i,Sd),t=Qs(i,vd);return e||t},async load(i,e,t){const n={...sa.defaultOptions,resolution:e.data?.resolution||Hf(i),alphaMode:e.data?.alphaMode||await G_(),...e.data},r=document.createElement("video"),s={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(s).forEach(h=>{const d=s[h];d!==void 0&&r.setAttribute(h,d)}),n.muted===!0&&(r.muted=!0),gP(r,i,n.crossorigin);const l=document.createElement("source");let c;if(n.mime)c=n.mime;else if(i.startsWith("data:"))c=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const h=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();c=sa.MIME_TYPES[h]||`video/${h}`}return l.src=i,c&&(l.type=c),new Promise(h=>{const d=async()=>{const f=new sa({...n,resource:r});r.removeEventListener("canplay",d),e.data.preload&&await yP(r),h(zf(f,t,i))};n.preload&&!n.autoPlay&&r.load(),r.addEventListener("canplay",d),r.appendChild(l)})},unload(i){i.destroy(!0)}},zx={extension:{type:pe.ResolveParser,name:"resolveTexture"},test:Hx.test,parse:i=>({resolution:parseFloat(Ys.RETINA_PREFIX.exec(i)?.[1]??"1"),format:i.split(".").pop(),src:i})},SP={extension:{type:pe.ResolveParser,priority:-2,name:"resolveJson"},test:i=>Ys.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:zx.parse};class wP{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ys,this.loader=new jT,this.cache=je,this._backgroundLoader=new $T(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Ge("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const t=e.texturePreference?.resolution??1,n=typeof t=="number"?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const n=xc(e),r=Nn(e).map(c=>{if(typeof c!="string"){const h=this.resolver.getAlias(c);return h.some(d=>!this.resolver.hasKey(d))&&this.add(c),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),s=this.resolver.resolve(r),l=await this._mapLoadToResolve(s,t);return n?l[r[0]]:l}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},l=Object.keys(r);let c=0;const h=[],d=()=>{t?.(h.reduce((m,g)=>m+g,0)/c)},f=l.map((m,g)=>{const y=r[m],v=Object.values(y),S=[...new Set(v.flat())].reduce((C,b)=>C+(b.progressSize||1),0);return h.push(0),c+=S,this._mapLoadToResolve(y,C=>{h[g]=C*S,d()}).then(C=>{s[m]=C})});return await Promise.all(f),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return je.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=je.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(n,t);this._backgroundLoader.active=!0;const s={};return n.forEach(l=>{const c=r[l.src],h=[l.src];l.alias&&h.push(...l.alias),h.forEach(d=>{s[d]=c}),je.set(h,c)}),s}async unload(e){this._initialized||await this.init();const t=Nn(e).map(r=>typeof r!="string"?r.src:r),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Nn(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(r=>this._unloadFromResolved(t[r]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{je.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,r)=>t.indexOf(n)===r),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const Zo=new wP;bt.handleByList(pe.LoadParser,Zo.loader.parsers).handleByList(pe.ResolveParser,Zo.resolver.parsers).handleByList(pe.CacheParser,Zo.cache.parsers).handleByList(pe.DetectionParser,Zo.detections);bt.add(LT,FT,BT,WT,NT,HT,zT,VT,XT,rP,oP,Hx,vP,DT,IT,zx,SP);const by={loader:pe.LoadParser,resolver:pe.ResolveParser,cache:pe.CacheParser,detection:pe.DetectionParser};bt.handle(pe.Asset,i=>{const e=i.ref;Object.entries(by).filter(([t])=>!!e[t]).forEach(([t,n])=>bt.add(Object.assign(e[t],{extension:e[t].extension??n})))},i=>{const e=i.ref;Object.keys(by).filter(t=>!!e[t]).forEach(t=>bt.remove(e[t]))});class ce extends Mf{constructor(e){e instanceof Sn&&(e={context:e});const{context:t,roundPixels:n,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",t?this._context=t:this._context=this._ownedContext=new Sn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new ce(this._context.clone()):(this._ownedContext=null,new ce(this._context))}lineStyle(e,t,n){we(Le,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),t&&(r.color=t),n&&(r.alpha=n),this.context.strokeStyle=r,this}beginFill(e,t){we(Le,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),t!==void 0&&(n.alpha=t),this.context.fillStyle=n,this}endFill(){we(Le,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Sn.defaultStrokeStyle.width||e.color!==Sn.defaultStrokeStyle.color||e.alpha!==Sn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return we(Le,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return we(Le,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return we(Le,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return we(Le,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return we(Le,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return we(Le,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class CP extends Mf{constructor(e,t){const{text:n,resolution:r,style:s,anchor:l,width:c,height:h,roundPixels:d,...f}=e;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=n??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new Ct({_onUpdate:()=>{this.onViewUpdate()}}),l&&(this.anchor=l),this.roundPixels=d??!1,c!==void 0&&(this.width=c),h!==void 0&&(this.height=h)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,n=this.bounds.height,r=-t*this.anchor.x;let s=0;return e.x>=r&&e.x<=r+t&&(s=-n*this.anchor.y,e.y>=s&&e.y<=s+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function bP(i,e){let t=i[0]??{};return(typeof t=="string"||i[1])&&(we(Le,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:i[1]}),t}let xi=null,mr=null;function TP(i,e){xi||(xi=He.get().createCanvas(256,128),mr=xi.getContext("2d",{willReadFrequently:!0}),mr.globalCompositeOperation="copy",mr.globalAlpha=1),(xi.width<i||xi.height<e)&&(xi.width=Is(i),xi.height=Is(e))}function Ty(i,e,t){for(let n=0,r=4*t*e;n<e;++n,r+=4)if(i[r+3]!==0)return!1;return!0}function Py(i,e,t,n,r){const s=4*e;for(let l=n,c=n*s+4*t;l<=r;++l,c+=s)if(i[c+3]!==0)return!1;return!0}function PP(...i){let e=i[0];e.canvas||(e={canvas:i[0],resolution:i[1]});const{canvas:t}=e,n=Math.min(e.resolution??1,1),r=e.width??t.width,s=e.height??t.height;let l=e.output;if(TP(r,s),!mr)throw new TypeError("Failed to get canvas 2D context");mr.drawImage(t,0,0,r,s,0,0,r*n,s*n);const h=mr.getImageData(0,0,r,s).data;let d=0,f=0,m=r-1,g=s-1;for(;f<s&&Ty(h,r,f);)++f;if(f===s)return qe.EMPTY;for(;Ty(h,r,g);)--g;for(;Py(h,r,d,f,g);)++d;for(;Py(h,r,m,f,g);)--m;return++m,++g,mr.globalCompositeOperation="source-over",mr.strokeRect(d,f,m-d,g-f),mr.globalCompositeOperation="copy",l??(l=new qe),l.set(d/n,f/n,(m-d)/n,(g-f)/n),l}const Ey=new qe;class EP{getCanvasAndContext(e){const{text:t,style:n,resolution:r=1}=e,s=n._getFinalPadding(),l=tr.measureText(t||" ",n),c=Math.ceil(Math.ceil(Math.max(1,l.width)+s*2)*r),h=Math.ceil(Math.ceil(Math.max(1,l.height)+s*2)*r),d=xa.getOptimalCanvasAndContext(c,h);this._renderTextToCanvas(t,n,s,r,d);const f=n.trim?PP({canvas:d.canvas,width:c,height:h,resolution:1,output:Ey}):Ey.set(0,0,c,h);return{canvasAndContext:d,frame:f}}returnCanvasAndContext(e){xa.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,n,r,s){const{canvas:l,context:c}=s,h=vc(t),d=tr.measureText(e||" ",t),f=d.lines,m=d.lineHeight,g=d.lineWidths,y=d.maxLineWidth,v=d.fontProperties,x=l.height;if(c.resetTransform(),c.scale(r,r),c.textBaseline=t.textBaseline,t._stroke?.width){const P=t._stroke;c.lineWidth=P.width,c.miterLimit=P.miterLimit,c.lineJoin=P.join,c.lineCap=P.cap}c.font=h;let S,C;const b=t.dropShadow?2:1;for(let P=0;P<b;++P){const E=t.dropShadow&&P===0,A=E?Math.ceil(Math.max(1,x)+n*2):0,M=A*r;if(E){c.fillStyle="black",c.strokeStyle="black";const D=t.dropShadow,O=D.color,G=D.alpha;c.shadowColor=ft.shared.setValue(O).setAlpha(G).toRgbaString();const te=D.blur*r,Z=D.distance*r;c.shadowBlur=te,c.shadowOffsetX=Math.cos(D.angle)*Z,c.shadowOffsetY=Math.sin(D.angle)*Z+M}else{if(c.fillStyle=t._fill?Cc(t._fill,c,d,n*2):null,t._stroke?.width){const D=t._stroke.width*.5+n*2;c.strokeStyle=Cc(t._stroke,c,d,D)}c.shadowColor="black"}let k=(m-v.fontSize)/2;m-v.fontSize<0&&(k=0);const $=t._stroke?.width??0;for(let D=0;D<f.length;D++)S=$/2,C=$/2+D*m+v.ascent+k,t.align==="right"?S+=y-g[D]:t.align==="center"&&(S+=(y-g[D])/2),t._stroke?.width&&this._drawLetterSpacing(f[D],t,s,S+n,C+n-A,!0),t._fill!==void 0&&this._drawLetterSpacing(f[D],t,s,S+n,C+n-A)}}_drawLetterSpacing(e,t,n,r,s,l=!1){const{context:c}=n,h=t.letterSpacing;let d=!1;if(tr.experimentalLetterSpacingSupported&&(tr.experimentalLetterSpacing?(c.letterSpacing=`${h}px`,c.textLetterSpacing=`${h}px`,d=!0):(c.letterSpacing="0px",c.textLetterSpacing="0px")),h===0||d){l?c.strokeText(e,r,s):c.fillText(e,r,s);return}let f=r;const m=tr.graphemeSegmenter(e);let g=c.measureText(e).width,y=0;for(let v=0;v<m.length;++v){const x=m[v];l?c.strokeText(x,f,s):c.fillText(x,f,s);let S="";for(let C=v+1;C<m.length;++C)S+=m[C];y=c.measureText(S).width,f+=g-y+h,g=y}}}const Ay=new EP;class Ft extends CP{constructor(...e){const t=bP(e,"Text");super(t,_a),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof Ds?t.textureStyle:new Ds(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let n=0,r=0;if(this._style.trim){const{frame:s,canvasAndContext:l}=Ay.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Ay.returnCanvasAndContext(l),n=s.width,r=s.height}else{const s=tr.measureText(this._text,this._style);n=s.width,r=s.height}e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*r,e.maxY=e.minY+r}}bt.add(Dw,$w);function pr(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Wx(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}var un={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Fs={duration:.5,overwrite:!1,delay:0},Wf,Tt,Ve,bn=1e8,Oe=1/bn,ef=Math.PI*2,AP=ef/4,kP=0,jx=Math.sqrt,MP=Math.cos,RP=Math.sin,vt=function(e){return typeof e=="string"},ot=function(e){return typeof e=="function"},wr=function(e){return typeof e=="number"},jf=function(e){return typeof e>"u"},ir=function(e){return typeof e=="object"},Yt=function(e){return e!==!1},Gf=function(){return typeof window<"u"},oc=function(e){return ot(e)||vt(e)},Gx=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},$t=Array.isArray,tf=/(?:-?\.?\d|\.)+/gi,Ux=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_s=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,wd=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Vx=/[+-]=-?[.\d]+/,qx=/[^,'"\[\]\s]+/gi,IP=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ke,er,nf,Uf,hn={},bc={},Yx,Xx=function(e){return(bc=Os(e,hn))&&Jt},Vf=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},va=function(e,t){return!t&&console.warn(e)},Qx=function(e,t){return e&&(hn[e]=t)&&bc&&(bc[e]=t)||hn},Sa=function(){return 0},DP={suppressEvents:!0,isStart:!0,kill:!1},fc={suppressEvents:!0,kill:!1},$P={suppressEvents:!0},qf={},Kr=[],rf={},Kx,on={},Cd={},ky=30,pc=[],Yf="",Xf=function(e){var t=e[0],n,r;if(ir(t)||ot(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=pc.length;r--&&!pc[r].targetTest(t););n=pc[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new S1(e[r],n)))||e.splice(r,1);return e},ki=function(e){return e._gsap||Xf(Tn(e))[0]._gsap},Zx=function(e,t,n){return(n=e[t])&&ot(n)?e[t]():jf(n)&&e.getAttribute&&e.getAttribute(t)||n},Xt=function(e,t){return(e=e.split(",")).forEach(t)||e},ct=function(e){return Math.round(e*1e5)/1e5||0},dt=function(e){return Math.round(e*1e7)/1e7||0},Ps=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},LP=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Tc=function(){var e=Kr.length,t=Kr.slice(0),n,r;for(rf={},Kr.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Qf=function(e){return!!(e._initted||e._startAt||e.add)},Jx=function(e,t,n,r){Kr.length&&!Tt&&Tc(),e.render(t,n,!!(Tt&&t<0&&Qf(e))),Kr.length&&!Tt&&Tc()},e1=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(qx).length<2?t:vt(e)?e.trim():e},t1=function(e){return e},dn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},BP=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},Os=function(e,t){for(var n in t)e[n]=t[n];return e},My=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=ir(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},Pc=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},ca=function(e){var t=e.parent||Ke,n=e.keyframes?BP($t(e.keyframes)):dn;if(Yt(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},FP=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},n1=function(e,t,n,r,s){var l=e[r],c;if(s)for(c=t[s];l&&l[s]>c;)l=l._prev;return l?(t._next=l._next,l._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=l,t.parent=t._dp=e,t},Gc=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,l=t._next;s?s._next=l:e[n]===t&&(e[n]=l),l?l._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},Jr=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Mi=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},OP=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},sf=function(e,t,n,r){return e._startAt&&(Tt?e._startAt.revert(fc):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},NP=function i(e){return!e||e._ts&&i(e.parent)},Ry=function(e){return e._repeat?Ns(e._tTime,e=e.duration()+e._rDelay)*e:0},Ns=function(e,t){var n=Math.floor(e=dt(e/t));return e&&n===e?n-1:n},Ec=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Uc=function(e){return e._end=dt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Oe)||0))},Vc=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=dt(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Uc(e),n._dirty||Mi(n,e)),e},r1=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Ec(e.rawTime(),t),(!t._dur||Ma(0,t.totalDuration(),n)-t._tTime>Oe)&&t.render(n,!0)),Mi(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Oe}},nr=function(e,t,n,r){return t.parent&&Jr(t),t._start=dt((wr(n)?n:n||e!==Ke?vn(e,n,t):e._time)+t._delay),t._end=dt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),n1(e,t,"_first","_last",e._sort?"_start":0),of(t)||(e._recent=t),r||r1(e,t),e._ts<0&&Vc(e,e._tTime),e},i1=function(e,t){return(hn.ScrollTrigger||Vf("scrollTrigger",t))&&hn.ScrollTrigger.create(t,e)},s1=function(e,t,n,r,s){if(Zf(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!Tt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Kx!==an.frame)return Kr.push(e),e._lazy=[s,r],1},HP=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},of=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},zP=function(e,t,n,r){var s=e.ratio,l=t<0||!t&&(!e._start&&HP(e)&&!(!e._initted&&of(e))||(e._ts<0||e._dp._ts<0)&&!of(e))?0:1,c=e._rDelay,h=0,d,f,m;if(c&&e._repeat&&(h=Ma(0,e._tDur,t),f=Ns(h,c),e._yoyo&&f&1&&(l=1-l),f!==Ns(e._tTime,c)&&(s=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==s||Tt||r||e._zTime===Oe||!t&&e._zTime){if(!e._initted&&s1(e,t,r,n,h))return;for(m=e._zTime,e._zTime=t||(n?Oe:0),n||(n=t&&!m),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=h,d=e._pt;d;)d.r(l,d.d),d=d._next;t<0&&sf(e,t,n,!0),e._onUpdate&&!n&&ln(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&ln(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Jr(e,1),!n&&!Tt&&(ln(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},WP=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Hs=function(e,t,n,r){var s=e._repeat,l=dt(t)||0,c=e._tTime/e._tDur;return c&&!r&&(e._time*=l/e._dur),e._dur=l,e._tDur=s?s<0?1e10:dt(l*(s+1)+e._rDelay*s):l,c>0&&!r&&Vc(e,e._tTime=e._tDur*c),e.parent&&Uc(e),n||Mi(e.parent,e),e},Iy=function(e){return e instanceof Ot?Mi(e):Hs(e,e._dur)},jP={_start:0,endTime:Sa,totalDuration:Sa},vn=function i(e,t,n){var r=e.labels,s=e._recent||jP,l=e.duration()>=bn?s.endTime(!1):e._dur,c,h,d;return vt(t)&&(isNaN(t)||t in r)?(h=t.charAt(0),d=t.substr(-1)==="%",c=t.indexOf("="),h==="<"||h===">"?(c>=0&&(t=t.replace(/=/,"")),(h==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(d?(c<0?s:n).totalDuration()/100:1)):c<0?(t in r||(r[t]=l),r[t]):(h=parseFloat(t.charAt(c-1)+t.substr(c+1)),d&&n&&(h=h/100*($t(n)?n[0]:n).totalDuration()),c>1?i(e,t.substr(0,c-1),n)+h:l+h)):t==null?l:+t},ua=function(e,t,n){var r=wr(t[1]),s=(r?2:1)+(e<2?0:1),l=t[s],c,h;if(r&&(l.duration=t[1]),l.parent=n,e){for(c=l,h=n;h&&!("immediateRender"in c);)c=h.vars.defaults||{},h=Yt(h.vars.inherit)&&h.parent;l.immediateRender=Yt(c.immediateRender),e<2?l.runBackwards=1:l.startAt=t[s-1]}return new ht(t[0],l,t[s+1])},ii=function(e,t){return e||e===0?t(e):t},Ma=function(e,t,n){return n<e?e:n>t?t:n},It=function(e,t){return!vt(e)||!(t=IP.exec(e))?"":t[1]},GP=function(e,t,n){return ii(n,function(r){return Ma(e,t,r)})},af=[].slice,o1=function(e,t){return e&&ir(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ir(e[0]))&&!e.nodeType&&e!==er},UP=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return vt(r)&&!t||o1(r,1)?(s=n).push.apply(s,Tn(r)):n.push(r)})||n},Tn=function(e,t,n){return Ve&&!t&&Ve.selector?Ve.selector(e):vt(e)&&!n&&(nf||!zs())?af.call((t||Uf).querySelectorAll(e),0):$t(e)?UP(e,n):o1(e)?af.call(e,0):e?[e]:[]},lf=function(e){return e=Tn(e)[0]||va("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Tn(t,n.querySelectorAll?n:n===e?va("Invalid scope")||Uf.createElement("div"):e)}},a1=function(e){return e.sort(function(){return .5-Math.random()})},l1=function(e){if(ot(e))return e;var t=ir(e)?e:{each:e},n=Ri(t.ease),r=t.from||0,s=parseFloat(t.base)||0,l={},c=r>0&&r<1,h=isNaN(r)||c,d=t.axis,f=r,m=r;return vt(r)?f=m={center:.5,edges:.5,end:1}[r]||0:!c&&h&&(f=r[0],m=r[1]),function(g,y,v){var x=(v||t).length,S=l[x],C,b,P,E,A,M,k,$,D;if(!S){if(D=t.grid==="auto"?0:(t.grid||[1,bn])[1],!D){for(k=-bn;k<(k=v[D++].getBoundingClientRect().left)&&D<x;);D<x&&D--}for(S=l[x]=[],C=h?Math.min(D,x)*f-.5:r%D,b=D===bn?0:h?x*m/D-.5:r/D|0,k=0,$=bn,M=0;M<x;M++)P=M%D-C,E=b-(M/D|0),S[M]=A=d?Math.abs(d==="y"?E:P):jx(P*P+E*E),A>k&&(k=A),A<$&&($=A);r==="random"&&a1(S),S.max=k-$,S.min=$,S.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(D>x?x-1:d?d==="y"?x/D:D:Math.max(D,x/D))||0)*(r==="edges"?-1:1),S.b=x<0?s-x:s,S.u=It(t.amount||t.each)||0,n=n&&x<0?_1(n):n}return x=(S[g]-S.min)/S.max||0,dt(S.b+(n?n(x):x)*S.v)+S.u}},cf=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=dt(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(wr(n)?0:It(n))}},c1=function(e,t){var n=$t(e),r,s;return!n&&ir(e)&&(r=n=e.radius||bn,e.values?(e=Tn(e.values),(s=!wr(e[0]))&&(r*=r)):e=cf(e.increment)),ii(t,n?ot(e)?function(l){return s=e(l),Math.abs(s-l)<=r?s:l}:function(l){for(var c=parseFloat(s?l.x:l),h=parseFloat(s?l.y:0),d=bn,f=0,m=e.length,g,y;m--;)s?(g=e[m].x-c,y=e[m].y-h,g=g*g+y*y):g=Math.abs(e[m]-c),g<d&&(d=g,f=m);return f=!r||d<=r?e[f]:l,s||f===l||wr(l)?f:f+It(l)}:cf(e))},u1=function(e,t,n,r){return ii($t(e)?!t:n===!0?!!(n=0):!r,function(){return $t(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},VP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,l){return l(s)},r)}},qP=function(e,t){return function(n){return e(parseFloat(n))+(t||It(n))}},YP=function(e,t,n){return d1(e,t,0,1,n)},h1=function(e,t,n){return ii(n,function(r){return e[~~t(r)]})},XP=function i(e,t,n){var r=t-e;return $t(e)?h1(e,i(0,e.length),t):ii(n,function(s){return(r+(s-e)%r)%r+e})},QP=function i(e,t,n){var r=t-e,s=r*2;return $t(e)?h1(e,i(0,e.length-1),t):ii(n,function(l){return l=(s+(l-e)%s)%s||0,e+(l>r?s-l:l)})},wa=function(e){for(var t=0,n="",r,s,l,c;~(r=e.indexOf("random(",t));)l=e.indexOf(")",r),c=e.charAt(r+7)==="[",s=e.substr(r+7,l-r-7).match(c?qx:tf),n+=e.substr(t,r-t)+u1(c?s:+s[0],c?0:+s[1],+s[2]||1e-5),t=l+1;return n+e.substr(t,e.length-t)},d1=function(e,t,n,r,s){var l=t-e,c=r-n;return ii(s,function(h){return n+((h-e)/l*c||0)})},KP=function i(e,t,n,r){var s=isNaN(e+t)?0:function(y){return(1-y)*e+y*t};if(!s){var l=vt(e),c={},h,d,f,m,g;if(n===!0&&(r=1)&&(n=null),l)e={p:e},t={p:t};else if($t(e)&&!$t(t)){for(f=[],m=e.length,g=m-2,d=1;d<m;d++)f.push(i(e[d-1],e[d]));m--,s=function(v){v*=m;var x=Math.min(g,~~v);return f[x](v-x)},n=t}else r||(e=Os($t(e)?[]:{},e));if(!f){for(h in t)Kf.call(c,e,h,"get",t[h]);s=function(v){return tp(v,c)||(l?e.p:e)}}}return ii(n,s)},Dy=function(e,t,n){var r=e.labels,s=bn,l,c,h;for(l in r)c=r[l]-t,c<0==!!n&&c&&s>(c=Math.abs(c))&&(h=l,s=c);return h},ln=function(e,t,n){var r=e.vars,s=r[t],l=Ve,c=e._ctx,h,d,f;if(s)return h=r[t+"Params"],d=r.callbackScope||e,n&&Kr.length&&Tc(),c&&(Ve=c),f=h?s.apply(d,h):s.call(d),Ve=l,f},Jo=function(e){return Jr(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Tt),e.progress()<1&&ln(e,"onInterrupt"),e},xs,f1=[],p1=function(e){if(e)if(e=!e.name&&e.default||e,Gf()||e.headless){var t=e.name,n=ot(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Sa,render:tp,add:Kf,kill:fE,modifier:dE,rawVars:0},l={targetTest:0,get:0,getSetter:ep,aliases:{},register:0};if(zs(),e!==r){if(on[t])return;dn(r,dn(Pc(e,s),l)),Os(r.prototype,Os(s,Pc(e,l))),on[r.prop=t]=r,e.targetTest&&(pc.push(r),qf[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Qx(t,r),e.register&&e.register(Jt,r,Qt)}else f1.push(e)},Fe=255,ea={aqua:[0,Fe,Fe],lime:[0,Fe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Fe],navy:[0,0,128],white:[Fe,Fe,Fe],olive:[128,128,0],yellow:[Fe,Fe,0],orange:[Fe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Fe,0,0],pink:[Fe,192,203],cyan:[0,Fe,Fe],transparent:[Fe,Fe,Fe,0]},bd=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Fe+.5|0},m1=function(e,t,n){var r=e?wr(e)?[e>>16,e>>8&Fe,e&Fe]:0:ea.black,s,l,c,h,d,f,m,g,y,v;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ea[e])r=ea[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),l=e.charAt(2),c=e.charAt(3),e="#"+s+s+l+l+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Fe,r&Fe,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Fe,e&Fe]}else if(e.substr(0,3)==="hsl"){if(r=v=e.match(tf),!t)h=+r[0]%360/360,d=+r[1]/100,f=+r[2]/100,l=f<=.5?f*(d+1):f+d-f*d,s=f*2-l,r.length>3&&(r[3]*=1),r[0]=bd(h+1/3,s,l),r[1]=bd(h,s,l),r[2]=bd(h-1/3,s,l);else if(~e.indexOf("="))return r=e.match(Ux),n&&r.length<4&&(r[3]=1),r}else r=e.match(tf)||ea.transparent;r=r.map(Number)}return t&&!v&&(s=r[0]/Fe,l=r[1]/Fe,c=r[2]/Fe,m=Math.max(s,l,c),g=Math.min(s,l,c),f=(m+g)/2,m===g?h=d=0:(y=m-g,d=f>.5?y/(2-m-g):y/(m+g),h=m===s?(l-c)/y+(l<c?6:0):m===l?(c-s)/y+2:(s-l)/y+4,h*=60),r[0]=~~(h+.5),r[1]=~~(d*100+.5),r[2]=~~(f*100+.5)),n&&r.length<4&&(r[3]=1),r},g1=function(e){var t=[],n=[],r=-1;return e.split(Zr).forEach(function(s){var l=s.match(_s)||[];t.push.apply(t,l),n.push(r+=l.length+1)}),t.c=n,t},$y=function(e,t,n){var r="",s=(e+r).match(Zr),l=t?"hsla(":"rgba(",c=0,h,d,f,m;if(!s)return e;if(s=s.map(function(g){return(g=m1(g,t,1))&&l+(t?g[0]+","+g[1]+"%,"+g[2]+"%,"+g[3]:g.join(","))+")"}),n&&(f=g1(e),h=n.c,h.join(r)!==f.c.join(r)))for(d=e.replace(Zr,"1").split(_s),m=d.length-1;c<m;c++)r+=d[c]+(~h.indexOf(c)?s.shift()||l+"0,0,0,0)":(f.length?f:s.length?s:n).shift());if(!d)for(d=e.split(Zr),m=d.length-1;c<m;c++)r+=d[c]+s[c];return r+d[m]},Zr=(function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ea)i+="|"+e+"\\b";return new RegExp(i+")","gi")})(),ZP=/hsl[a]?\(/,y1=function(e){var t=e.join(" "),n;if(Zr.lastIndex=0,Zr.test(t))return n=ZP.test(t),e[1]=$y(e[1],n),e[0]=$y(e[0],n,g1(e[1])),!0},Ca,an=(function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,l=s,c=[],h,d,f,m,g,y,v=function x(S){var C=i()-r,b=S===!0,P,E,A,M;if((C>e||C<0)&&(n+=C-t),r+=C,A=r-n,P=A-l,(P>0||b)&&(M=++m.frame,g=A-m.time*1e3,m.time=A=A/1e3,l+=P+(P>=s?4:s-P),E=1),b||(h=d(x)),E)for(y=0;y<c.length;y++)c[y](A,g,M,S)};return m={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(S){return g/(1e3/(S||60))},wake:function(){Yx&&(!nf&&Gf()&&(er=nf=window,Uf=er.document||{},hn.gsap=Jt,(er.gsapVersions||(er.gsapVersions=[])).push(Jt.version),Xx(bc||er.GreenSockGlobals||!er.gsap&&er||{}),f1.forEach(p1)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,h&&m.sleep(),d=f||function(S){return setTimeout(S,l-m.time*1e3+1|0)},Ca=1,v(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(h),Ca=0,d=Sa},lagSmoothing:function(S,C){e=S||1/0,t=Math.min(C||33,e)},fps:function(S){s=1e3/(S||240),l=m.time*1e3+s},add:function(S,C,b){var P=C?function(E,A,M,k){S(E,A,M,k),m.remove(P)}:S;return m.remove(S),c[b?"unshift":"push"](P),zs(),P},remove:function(S,C){~(C=c.indexOf(S))&&c.splice(C,1)&&y>=C&&y--},_listeners:c},m})(),zs=function(){return!Ca&&an.wake()},Pe={},JP=/^[\d.\-M][\d.\-,\s]/,eE=/["']/g,tE=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,l=n.length,c,h,d;s<l;s++)h=n[s],c=s!==l-1?h.lastIndexOf(","):h.length,d=h.substr(0,c),t[r]=isNaN(d)?d.replace(eE,"").trim():+d,r=h.substr(c+1).trim();return t},nE=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},rE=function(e){var t=(e+"").split("("),n=Pe[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[tE(t[1])]:nE(e).split(",").map(e1)):Pe._CE&&JP.test(e)?Pe._CE("",e):n},_1=function(e){return function(t){return 1-e(1-t)}},x1=function i(e,t){for(var n=e._first,r;n;)n instanceof Ot?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},Ri=function(e,t){return e&&(ot(e)?e:Pe[e]||rE(e))||t},Oi=function(e,t,n,r){n===void 0&&(n=function(h){return 1-t(1-h)}),r===void 0&&(r=function(h){return h<.5?t(h*2)/2:1-t((1-h)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},l;return Xt(e,function(c){Pe[c]=hn[c]=s,Pe[l=c.toLowerCase()]=n;for(var h in s)Pe[l+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=Pe[c+"."+h]=s[h]}),s},v1=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Td=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),l=s/ef*(Math.asin(1/r)||0),c=function(f){return f===1?1:r*Math.pow(2,-10*f)*RP((f-l)*s)+1},h=e==="out"?c:e==="in"?function(d){return 1-c(1-d)}:v1(c);return s=ef/s,h.config=function(d,f){return i(e,d,f)},h},Pd=function i(e,t){t===void 0&&(t=1.70158);var n=function(l){return l?--l*l*((t+1)*l+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:v1(n);return r.config=function(s){return i(e,s)},r};Xt("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;Oi(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn;Oi("Elastic",Td("in"),Td("out"),Td());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(c){return c<t?i*c*c:c<n?i*Math.pow(c-1.5/e,2)+.75:c<r?i*(c-=2.25/e)*c+.9375:i*Math.pow(c-2.625/e,2)+.984375};Oi("Bounce",function(l){return 1-s(1-l)},s)})(7.5625,2.75);Oi("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});Oi("Circ",function(i){return-(jx(1-i*i)-1)});Oi("Sine",function(i){return i===1?1:-MP(i*AP)+1});Oi("Back",Pd("in"),Pd("out"),Pd());Pe.SteppedEase=Pe.steps=hn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,l=1-Oe;return function(c){return((r*Ma(0,l,c)|0)+s)*n}}};Fs.ease=Pe["quad.out"];Xt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return Yf+=i+","+i+"Params,"});var S1=function(e,t){this.id=kP++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Zx,this.set=t?t.getSetter:ep},ba=(function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Hs(this,+t.duration,1,1),this.data=t.data,Ve&&(this._ctx=Ve,Ve.data.push(this)),Ca||an.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Hs(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(zs(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Vc(this,n),!s._dp||s.parent||r1(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&nr(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Oe||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Jx(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Ry(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Ry(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Ns(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-Oe?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Ec(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Oe?0:this._rts,this.totalTime(Ma(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),Uc(this),OP(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(zs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Oe&&(this._tTime-=Oe)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&nr(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Yt(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ec(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=$P);var r=Tt;return Tt=n,Qf(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Tt=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Iy(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Iy(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(vn(this,n),Yt(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Yt(r)),this._dur||(this._zTime=-Oe),this},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Oe:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Oe,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Oe)},e.eventCallback=function(n,r,s){var l=this.vars;return arguments.length>1?(r?(l[n]=r,s&&(l[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete l[n],this):l[n]},e.then=function(n){var r=this;return new Promise(function(s){var l=ot(n)?n:t1,c=function(){var d=r.then;r.then=null,ot(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=d),s(l),r.then=d};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?c():r._prom=c})},e.kill=function(){Jo(this)},i})();dn(ba.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Oe,_prom:0,_ps:!1,_rts:1});var Ot=(function(i){Wx(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Yt(n.sortChildren),Ke&&nr(n.parent||Ke,pr(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&i1(pr(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,l){return ua(0,arguments,this),this},t.from=function(r,s,l){return ua(1,arguments,this),this},t.fromTo=function(r,s,l,c){return ua(2,arguments,this),this},t.set=function(r,s,l){return s.duration=0,s.parent=this,ca(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new ht(r,s,vn(this,l),1),this},t.call=function(r,s,l){return nr(this,ht.delayedCall(0,r,s),l)},t.staggerTo=function(r,s,l,c,h,d,f){return l.duration=s,l.stagger=l.stagger||c,l.onComplete=d,l.onCompleteParams=f,l.parent=this,new ht(r,l,vn(this,h)),this},t.staggerFrom=function(r,s,l,c,h,d,f){return l.runBackwards=1,ca(l).immediateRender=Yt(l.immediateRender),this.staggerTo(r,s,l,c,h,d,f)},t.staggerFromTo=function(r,s,l,c,h,d,f,m){return c.startAt=l,ca(c).immediateRender=Yt(c.immediateRender),this.staggerTo(r,s,c,h,d,f,m)},t.render=function(r,s,l){var c=this._time,h=this._dirty?this.totalDuration():this._tDur,d=this._dur,f=r<=0?0:dt(r),m=this._zTime<0!=r<0&&(this._initted||!d),g,y,v,x,S,C,b,P,E,A,M,k;if(this!==Ke&&f>h&&r>=0&&(f=h),f!==this._tTime||l||m){if(c!==this._time&&d&&(f+=this._time-c,r+=this._time-c),g=f,E=this._start,P=this._ts,C=!P,m&&(d||(c=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,S=d+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(S*100+r,s,l);if(g=dt(f%S),f===h?(x=this._repeat,g=d):(A=dt(f/S),x=~~A,x&&x===A&&(g=d,x--),g>d&&(g=d)),A=Ns(this._tTime,S),!c&&this._tTime&&A!==x&&this._tTime-A*S-this._dur<=0&&(A=x),M&&x&1&&(g=d-g,k=1),x!==A&&!this._lock){var $=M&&A&1,D=$===(M&&x&1);if(x<A&&($=!$),c=$?0:f%d?d:f,this._lock=1,this.render(c||(k?0:dt(x*S)),s,!d)._lock=0,this._tTime=f,!s&&this.parent&&ln(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),c&&c!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(d=this._dur,h=this._tDur,D&&(this._lock=2,c=$?d:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;x1(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=WP(this,dt(c),dt(g)),b&&(f-=g-(g=b._start))),this._tTime=f,this._time=g,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,c=0),!c&&f&&!s&&!A&&(ln(this,"onStart"),this._tTime!==f))return this;if(g>=c&&r>=0)for(y=this._first;y;){if(v=y._next,(y._act||g>=y._start)&&y._ts&&b!==y){if(y.parent!==this)return this.render(r,s,l);if(y.render(y._ts>0?(g-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(g-y._start)*y._ts,s,l),g!==this._time||!this._ts&&!C){b=0,v&&(f+=this._zTime=-Oe);break}}y=v}else{y=this._last;for(var O=r<0?r:g;y;){if(v=y._prev,(y._act||O<=y._end)&&y._ts&&b!==y){if(y.parent!==this)return this.render(r,s,l);if(y.render(y._ts>0?(O-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(O-y._start)*y._ts,s,l||Tt&&Qf(y)),g!==this._time||!this._ts&&!C){b=0,v&&(f+=this._zTime=O?-Oe:Oe);break}}y=v}}if(b&&!s&&(this.pause(),b.render(g>=c?0:-Oe)._zTime=g>=c?1:-1,this._ts))return this._start=E,Uc(this),this.render(r,s,l);this._onUpdate&&!s&&ln(this,"onUpdate",!0),(f===h&&this._tTime>=this.totalDuration()||!f&&c)&&(E===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||((r||!d)&&(f===h&&this._ts>0||!f&&this._ts<0)&&Jr(this,1),!s&&!(r<0&&!c)&&(f||c||!h)&&(ln(this,f===h&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<h&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var l=this;if(wr(s)||(s=vn(this,s,r)),!(r instanceof ba)){if($t(r))return r.forEach(function(c){return l.add(c,s)}),this;if(vt(r))return this.addLabel(r,s);if(ot(r))r=ht.delayedCall(0,r);else return this}return this!==r?nr(this,r,s):this},t.getChildren=function(r,s,l,c){r===void 0&&(r=!0),s===void 0&&(s=!0),l===void 0&&(l=!0),c===void 0&&(c=-bn);for(var h=[],d=this._first;d;)d._start>=c&&(d instanceof ht?s&&h.push(d):(l&&h.push(d),r&&h.push.apply(h,d.getChildren(!0,s,l)))),d=d._next;return h},t.getById=function(r){for(var s=this.getChildren(1,1,1),l=s.length;l--;)if(s[l].vars.id===r)return s[l]},t.remove=function(r){return vt(r)?this.removeLabel(r):ot(r)?this.killTweensOf(r):(r.parent===this&&Gc(this,r),r===this._recent&&(this._recent=this._last),Mi(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=dt(an.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=vn(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,l){var c=ht.delayedCall(0,s||Sa,l);return c.data="isPause",this._hasPause=1,nr(this,c,vn(this,r))},t.removePause=function(r){var s=this._first;for(r=vn(this,r);s;)s._start===r&&s.data==="isPause"&&Jr(s),s=s._next},t.killTweensOf=function(r,s,l){for(var c=this.getTweensOf(r,l),h=c.length;h--;)Yr!==c[h]&&c[h].kill(r,s);return this},t.getTweensOf=function(r,s){for(var l=[],c=Tn(r),h=this._first,d=wr(s),f;h;)h instanceof ht?LP(h._targets,c)&&(d?(!Yr||h._initted&&h._ts)&&h.globalTime(0)<=s&&h.globalTime(h.totalDuration())>s:!s||h.isActive())&&l.push(h):(f=h.getTweensOf(c,s)).length&&l.push.apply(l,f),h=h._next;return l},t.tweenTo=function(r,s){s=s||{};var l=this,c=vn(l,r),h=s,d=h.startAt,f=h.onStart,m=h.onStartParams,g=h.immediateRender,y,v=ht.to(l,dn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:s.duration||Math.abs((c-(d&&"time"in d?d.time:l._time))/l.timeScale())||Oe,onStart:function(){if(l.pause(),!y){var S=s.duration||Math.abs((c-(d&&"time"in d?d.time:l._time))/l.timeScale());v._dur!==S&&Hs(v,S,0,1).render(v._time,!0,!0),y=1}f&&f.apply(v,m||[])}},s));return g?v.render(0):v},t.tweenFromTo=function(r,s,l){return this.tweenTo(s,dn({startAt:{time:vn(this,r)}},l))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Dy(this,vn(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Dy(this,vn(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Oe)},t.shiftChildren=function(r,s,l){l===void 0&&(l=0);for(var c=this._first,h=this.labels,d;c;)c._start>=l&&(c._start+=r,c._end+=r),c=c._next;if(s)for(d in h)h[d]>=l&&(h[d]+=r);return Mi(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,l;s;)l=s._next,this.remove(s),s=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Mi(this)},t.totalDuration=function(r){var s=0,l=this,c=l._last,h=bn,d,f,m;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(m=l.parent;c;)d=c._prev,c._dirty&&c.totalDuration(),f=c._start,f>h&&l._sort&&c._ts&&!l._lock?(l._lock=1,nr(l,c,f-c._delay,1)._lock=0):h=f,f<0&&c._ts&&(s-=f,(!m&&!l._dp||m&&m.smoothChildTiming)&&(l._start+=f/l._ts,l._time-=f,l._tTime-=f),l.shiftChildren(-f,!1,-1/0),h=0),c._end>s&&c._ts&&(s=c._end),c=d;Hs(l,l===Ke&&l._time>s?l._time:s,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(r){if(Ke._ts&&(Jx(Ke,Ec(r,Ke)),Kx=an.frame),an.frame>=ky){ky+=un.autoSleep||120;var s=Ke._first;if((!s||!s._ts)&&un.autoSleep&&an._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||an.sleep()}}},e})(ba);dn(Ot.prototype,{_lock:0,_hasPause:0,_forcing:0});var iE=function(e,t,n,r,s,l,c){var h=new Qt(this._pt,e,t,0,1,E1,null,s),d=0,f=0,m,g,y,v,x,S,C,b;for(h.b=n,h.e=r,n+="",r+="",(C=~r.indexOf("random("))&&(r=wa(r)),l&&(b=[n,r],l(b,e,t),n=b[0],r=b[1]),g=n.match(wd)||[];m=wd.exec(r);)v=m[0],x=r.substring(d,m.index),y?y=(y+1)%5:x.substr(-5)==="rgba("&&(y=1),v!==g[f++]&&(S=parseFloat(g[f-1])||0,h._pt={_next:h._pt,p:x||f===1?x:",",s:S,c:v.charAt(1)==="="?Ps(S,v)-S:parseFloat(v)-S,m:y&&y<4?Math.round:0},d=wd.lastIndex);return h.c=d<r.length?r.substring(d,r.length):"",h.fp=c,(Vx.test(r)||C)&&(h.e=0),this._pt=h,h},Kf=function(e,t,n,r,s,l,c,h,d,f){ot(r)&&(r=r(s||0,e,l));var m=e[t],g=n!=="get"?n:ot(m)?d?e[t.indexOf("set")||!ot(e["get"+t.substr(3)])?t:"get"+t.substr(3)](d):e[t]():m,y=ot(m)?d?cE:T1:Jf,v;if(vt(r)&&(~r.indexOf("random(")&&(r=wa(r)),r.charAt(1)==="="&&(v=Ps(g,r)+(It(g)||0),(v||v===0)&&(r=v))),!f||g!==r||uf)return!isNaN(g*r)&&r!==""?(v=new Qt(this._pt,e,t,+g||0,r-(g||0),typeof m=="boolean"?hE:P1,0,y),d&&(v.fp=d),c&&v.modifier(c,this,e),this._pt=v):(!m&&!(t in e)&&Vf(t,r),iE.call(this,e,t,g,r,y,h||un.stringFilter,d))},sE=function(e,t,n,r,s){if(ot(e)&&(e=ha(e,s,t,n,r)),!ir(e)||e.style&&e.nodeType||$t(e)||Gx(e))return vt(e)?ha(e,s,t,n,r):e;var l={},c;for(c in e)l[c]=ha(e[c],s,t,n,r);return l},w1=function(e,t,n,r,s,l){var c,h,d,f;if(on[e]&&(c=new on[e]).init(s,c.rawVars?t[e]:sE(t[e],r,s,l,n),n,r,l)!==!1&&(n._pt=h=new Qt(n._pt,s,e,0,1,c.render,c,0,c.priority),n!==xs))for(d=n._ptLookup[n._targets.indexOf(s)],f=c._props.length;f--;)d[c._props[f]]=h;return c},Yr,uf,Zf=function i(e,t,n){var r=e.vars,s=r.ease,l=r.startAt,c=r.immediateRender,h=r.lazy,d=r.onUpdate,f=r.runBackwards,m=r.yoyoEase,g=r.keyframes,y=r.autoRevert,v=e._dur,x=e._startAt,S=e._targets,C=e.parent,b=C&&C.data==="nested"?C.vars.targets:S,P=e._overwrite==="auto"&&!Wf,E=e.timeline,A,M,k,$,D,O,G,te,Z,ie,he,V,Q;if(E&&(!g||!s)&&(s="none"),e._ease=Ri(s,Fs.ease),e._yEase=m?_1(Ri(m===!0?s:m,Fs.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!E&&!!r.runBackwards,!E||g&&!r.stagger){if(te=S[0]?ki(S[0]).harness:0,V=te&&r[te.prop],A=Pc(r,qf),x&&(x._zTime<0&&x.progress(1),t<0&&f&&c&&!y?x.render(-1,!0):x.revert(f&&v?fc:DP),x._lazy=0),l){if(Jr(e._startAt=ht.set(S,dn({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!x&&Yt(h),startAt:null,delay:0,onUpdate:d&&function(){return ln(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Tt||!c&&!y)&&e._startAt.revert(fc),c&&v&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(f&&v&&!x){if(t&&(c=!1),k=dn({overwrite:!1,data:"isFromStart",lazy:c&&!x&&Yt(h),immediateRender:c,stagger:0,parent:C},A),V&&(k[te.prop]=V),Jr(e._startAt=ht.set(S,k)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Tt?e._startAt.revert(fc):e._startAt.render(-1,!0)),e._zTime=t,!c)i(e._startAt,Oe,Oe);else if(!t)return}for(e._pt=e._ptCache=0,h=v&&Yt(h)||h&&!v,M=0;M<S.length;M++){if(D=S[M],G=D._gsap||Xf(S)[M]._gsap,e._ptLookup[M]=ie={},rf[G.id]&&Kr.length&&Tc(),he=b===S?M:b.indexOf(D),te&&(Z=new te).init(D,V||A,e,he,b)!==!1&&(e._pt=$=new Qt(e._pt,D,Z.name,0,1,Z.render,Z,0,Z.priority),Z._props.forEach(function(X){ie[X]=$}),Z.priority&&(O=1)),!te||V)for(k in A)on[k]&&(Z=w1(k,A,e,he,D,b))?Z.priority&&(O=1):ie[k]=$=Kf.call(e,D,k,"get",A[k],he,b,0,r.stringFilter);e._op&&e._op[M]&&e.kill(D,e._op[M]),P&&e._pt&&(Yr=e,Ke.killTweensOf(D,ie,e.globalTime(t)),Q=!e.parent,Yr=0),e._pt&&h&&(rf[G.id]=1)}O&&A1(e),e._onInit&&e._onInit(e)}e._onUpdate=d,e._initted=(!e._op||e._pt)&&!Q,g&&t<=0&&E.render(bn,!0,!0)},oE=function(e,t,n,r,s,l,c,h){var d=(e._pt&&e._ptCache||(e._ptCache={}))[t],f,m,g,y;if(!d)for(d=e._ptCache[t]=[],g=e._ptLookup,y=e._targets.length;y--;){if(f=g[y][t],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==t&&f.fp!==t;)f=f._next;if(!f)return uf=1,e.vars[t]="+=0",Zf(e,c),uf=0,h?va(t+" not eligible for reset"):1;d.push(f)}for(y=d.length;y--;)m=d[y],f=m._pt||m,f.s=(r||r===0)&&!s?r:f.s+(r||0)+l*f.c,f.c=n-f.s,m.e&&(m.e=ct(n)+It(m.e)),m.b&&(m.b=f.s+It(m.b))},aE=function(e,t){var n=e[0]?ki(e[0]).harness:0,r=n&&n.aliases,s,l,c,h;if(!r)return t;s=Os({},t);for(l in r)if(l in s)for(h=r[l].split(","),c=h.length;c--;)s[h[c]]=s[l];return s},lE=function(e,t,n,r){var s=t.ease||r||"power1.inOut",l,c;if($t(t))c=n[e]||(n[e]=[]),t.forEach(function(h,d){return c.push({t:d/(t.length-1)*100,v:h,e:s})});else for(l in t)c=n[l]||(n[l]=[]),l==="ease"||c.push({t:parseFloat(e),v:t[l],e:s})},ha=function(e,t,n,r,s){return ot(e)?e.call(t,n,r,s):vt(e)&&~e.indexOf("random(")?wa(e):e},C1=Yf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",b1={};Xt(C1+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return b1[i]=1});var ht=(function(i){Wx(e,i);function e(n,r,s,l){var c;typeof r=="number"&&(s.duration=r,r=s,s=null),c=i.call(this,l?r:ca(r))||this;var h=c.vars,d=h.duration,f=h.delay,m=h.immediateRender,g=h.stagger,y=h.overwrite,v=h.keyframes,x=h.defaults,S=h.scrollTrigger,C=h.yoyoEase,b=r.parent||Ke,P=($t(n)||Gx(n)?wr(n[0]):"length"in r)?[n]:Tn(n),E,A,M,k,$,D,O,G;if(c._targets=P.length?Xf(P):va("GSAP target "+n+" not found. https://gsap.com",!un.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=y,v||g||oc(d)||oc(f)){if(r=c.vars,E=c.timeline=new Ot({data:"nested",defaults:x||{},targets:b&&b.data==="nested"?b.vars.targets:P}),E.kill(),E.parent=E._dp=pr(c),E._start=0,g||oc(d)||oc(f)){if(k=P.length,O=g&&l1(g),ir(g))for($ in g)~C1.indexOf($)&&(G||(G={}),G[$]=g[$]);for(A=0;A<k;A++)M=Pc(r,b1),M.stagger=0,C&&(M.yoyoEase=C),G&&Os(M,G),D=P[A],M.duration=+ha(d,pr(c),A,D,P),M.delay=(+ha(f,pr(c),A,D,P)||0)-c._delay,!g&&k===1&&M.delay&&(c._delay=f=M.delay,c._start+=f,M.delay=0),E.to(D,M,O?O(A,D,P):0),E._ease=Pe.none;E.duration()?d=f=0:c.timeline=0}else if(v){ca(dn(E.vars.defaults,{ease:"none"})),E._ease=Ri(v.ease||r.ease||"none");var te=0,Z,ie,he;if($t(v))v.forEach(function(V){return E.to(P,V,">")}),E.duration();else{M={};for($ in v)$==="ease"||$==="easeEach"||lE($,v[$],M,v.easeEach);for($ in M)for(Z=M[$].sort(function(V,Q){return V.t-Q.t}),te=0,A=0;A<Z.length;A++)ie=Z[A],he={ease:ie.e,duration:(ie.t-(A?Z[A-1].t:0))/100*d},he[$]=ie.v,E.to(P,he,te),te+=he.duration;E.duration()<d&&E.to({},{duration:d-E.duration()})}}d||c.duration(d=E.duration())}else c.timeline=0;return y===!0&&!Wf&&(Yr=pr(c),Ke.killTweensOf(P),Yr=0),nr(b,pr(c),s),r.reversed&&c.reverse(),r.paused&&c.paused(!0),(m||!d&&!v&&c._start===dt(b._time)&&Yt(m)&&NP(pr(c))&&b.data!=="nested")&&(c._tTime=-Oe,c.render(Math.max(0,-f)||0)),S&&i1(pr(c),S),c}var t=e.prototype;return t.render=function(r,s,l){var c=this._time,h=this._tDur,d=this._dur,f=r<0,m=r>h-Oe&&!f?h:r<Oe?0:r,g,y,v,x,S,C,b,P,E;if(!d)zP(this,r,s,l);else if(m!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(g=m,P=this.timeline,this._repeat){if(x=d+this._rDelay,this._repeat<-1&&f)return this.totalTime(x*100+r,s,l);if(g=dt(m%x),m===h?(v=this._repeat,g=d):(S=dt(m/x),v=~~S,v&&v===S?(g=d,v--):g>d&&(g=d)),C=this._yoyo&&v&1,C&&(E=this._yEase,g=d-g),S=Ns(this._tTime,x),g===c&&!l&&this._initted&&v===S)return this._tTime=m,this;v!==S&&(P&&this._yEase&&x1(P,C),this.vars.repeatRefresh&&!C&&!this._lock&&g!==x&&this._initted&&(this._lock=l=1,this.render(dt(x*v),!0).invalidate()._lock=0))}if(!this._initted){if(s1(this,f?r:g,l,s,m))return this._tTime=0,this;if(c!==this._time&&!(l&&this.vars.repeatRefresh&&v!==S))return this;if(d!==this._dur)return this.render(r,s,l)}if(this._tTime=m,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(E||this._ease)(g/d),this._from&&(this.ratio=b=1-b),!c&&m&&!s&&!S&&(ln(this,"onStart"),this._tTime!==m))return this;for(y=this._pt;y;)y.r(b,y.d),y=y._next;P&&P.render(r<0?r:P._dur*P._ease(g/this._dur),s,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(f&&sf(this,r,s,l),ln(this,"onUpdate")),this._repeat&&v!==S&&this.vars.onRepeat&&!s&&this.parent&&ln(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(f&&!this._onUpdate&&sf(this,r,!0,!0),(r||!d)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Jr(this,1),!s&&!(f&&!c)&&(m||c||C)&&(ln(this,m===h?"onComplete":"onReverseComplete",!0),this._prom&&!(m<h&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,l,c,h){Ca||an.wake(),this._ts||this.play();var d=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Zf(this,d),f=this._ease(d/this._dur),oE(this,r,s,l,c,f,d,h)?this.resetTo(r,s,l,c,1):(Vc(this,0),this.parent||n1(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Jo(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Tt),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Yr&&Yr.vars.overwrite!==!0)._first||Jo(this),this.parent&&l!==this.timeline.totalDuration()&&Hs(this,this._dur*this.timeline._tDur/l,0,1),this}var c=this._targets,h=r?Tn(r):c,d=this._ptLookup,f=this._pt,m,g,y,v,x,S,C;if((!s||s==="all")&&FP(c,h))return s==="all"&&(this._pt=0),Jo(this);for(m=this._op=this._op||[],s!=="all"&&(vt(s)&&(x={},Xt(s,function(b){return x[b]=1}),s=x),s=aE(c,s)),C=c.length;C--;)if(~h.indexOf(c[C])){g=d[C],s==="all"?(m[C]=s,v=g,y={}):(y=m[C]=m[C]||{},v=s);for(x in v)S=g&&g[x],S&&((!("kill"in S.d)||S.d.kill(x)===!0)&&Gc(this,S,"_pt"),delete g[x]),y!=="all"&&(y[x]=1)}return this._initted&&!this._pt&&f&&Jo(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return ua(1,arguments)},e.delayedCall=function(r,s,l,c){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:c})},e.fromTo=function(r,s,l){return ua(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,l){return Ke.killTweensOf(r,s,l)},e})(ba);dn(ht.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Xt("staggerTo,staggerFrom,staggerFromTo",function(i){ht[i]=function(){var e=new Ot,t=af.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var Jf=function(e,t,n){return e[t]=n},T1=function(e,t,n){return e[t](n)},cE=function(e,t,n,r){return e[t](r.fp,n)},uE=function(e,t,n){return e.setAttribute(t,n)},ep=function(e,t){return ot(e[t])?T1:jf(e[t])&&e.setAttribute?uE:Jf},P1=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},hE=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},E1=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},tp=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},dE=function(e,t,n,r){for(var s=this._pt,l;s;)l=s._next,s.p===r&&s.modifier(e,t,n),s=l},fE=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Gc(this,t,"_pt"):t.dep||(n=1),t=r;return!n},pE=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},A1=function(e){for(var t=e._pt,n,r,s,l;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:l)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:l=t,t=n}e._pt=s},Qt=(function(){function i(t,n,r,s,l,c,h,d,f){this.t=n,this.s=s,this.c=l,this.p=r,this.r=c||P1,this.d=h||this,this.set=d||Jf,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=pE,this.m=n,this.mt=s,this.tween=r},i})();Xt(Yf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return qf[i]=1});hn.TweenMax=hn.TweenLite=ht;hn.TimelineLite=hn.TimelineMax=Ot;Ke=new Ot({sortChildren:!1,defaults:Fs,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});un.stringFilter=y1;var Ii=[],mc={},mE=[],Ly=0,gE=0,Ed=function(e){return(mc[e]||mE).map(function(t){return t()})},hf=function(){var e=Date.now(),t=[];e-Ly>2&&(Ed("matchMediaInit"),Ii.forEach(function(n){var r=n.queries,s=n.conditions,l,c,h,d;for(c in r)l=er.matchMedia(r[c]).matches,l&&(h=1),l!==s[c]&&(s[c]=l,d=1);d&&(n.revert(),h&&t.push(n))}),Ed("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),Ly=e,Ed("matchMedia"))},k1=(function(){function i(t,n){this.selector=n&&lf(n),this.data=[],this._r=[],this.isReverted=!1,this.id=gE++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){ot(n)&&(s=r,r=n,n=ot);var l=this,c=function(){var d=Ve,f=l.selector,m;return d&&d!==l&&d.data.push(l),s&&(l.selector=lf(s)),Ve=l,m=r.apply(l,arguments),ot(m)&&l._r.push(m),Ve=d,l.selector=f,l.isReverted=!1,m};return l.last=c,n===ot?c(l,function(h){return l.add(null,h)}):n?l[n]=c:c},e.ignore=function(n){var r=Ve;Ve=null,n(this),Ve=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof ht&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?(function(){for(var c=s.getTweens(),h=s.data.length,d;h--;)d=s.data[h],d.data==="isFlip"&&(d.revert(),d.getChildren(!0,!0,!1).forEach(function(f){return c.splice(c.indexOf(f),1)}));for(c.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,m){return m.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),h=s.data.length;h--;)d=s.data[h],d instanceof Ot?d.data!=="nested"&&(d.scrollTrigger&&d.scrollTrigger.revert(),d.kill()):!(d instanceof ht)&&d.revert&&d.revert(n);s._r.forEach(function(f){return f(n,s)}),s.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),r)for(var l=Ii.length;l--;)Ii[l].id===this.id&&Ii.splice(l,1)},e.revert=function(n){this.kill(n||{})},i})(),yE=(function(){function i(t){this.contexts=[],this.scope=t,Ve&&Ve.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){ir(n)||(n={matches:n});var l=new k1(0,s||this.scope),c=l.conditions={},h,d,f;Ve&&!l.selector&&(l.selector=Ve.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=n;for(d in n)d==="all"?f=1:(h=er.matchMedia(n[d]),h&&(Ii.indexOf(l)<0&&Ii.push(l),(c[d]=h.matches)&&(f=1),h.addListener?h.addListener(hf):h.addEventListener("change",hf)));return f&&r(l,function(m){return l.add(null,m)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i})(),Ac={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return p1(r)})},timeline:function(e){return new Ot(e)},getTweensOf:function(e,t){return Ke.getTweensOf(e,t)},getProperty:function(e,t,n,r){vt(e)&&(e=Tn(e)[0]);var s=ki(e||{}).get,l=n?t1:e1;return n==="native"&&(n=""),e&&(t?l((on[t]&&on[t].get||s)(e,t,n,r)):function(c,h,d){return l((on[c]&&on[c].get||s)(e,c,h,d))})},quickSetter:function(e,t,n){if(e=Tn(e),e.length>1){var r=e.map(function(f){return Jt.quickSetter(f,t,n)}),s=r.length;return function(f){for(var m=s;m--;)r[m](f)}}e=e[0]||{};var l=on[t],c=ki(e),h=c.harness&&(c.harness.aliases||{})[t]||t,d=l?function(f){var m=new l;xs._pt=0,m.init(e,n?f+n:f,xs,0,[e]),m.render(1,m),xs._pt&&tp(1,xs)}:c.set(e,h);return l?d:function(f){return d(e,h,n?f+n:f,c,1)}},quickTo:function(e,t,n){var r,s=Jt.to(e,dn((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),l=function(h,d,f){return s.resetTo(t,h,d,f)};return l.tween=s,l},isTweening:function(e){return Ke.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ri(e.ease,Fs.ease)),My(Fs,e||{})},config:function(e){return My(un,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,l=e.extendTimeline;(r||"").split(",").forEach(function(c){return c&&!on[c]&&!hn[c]&&va(t+" effect requires "+c+" plugin.")}),Cd[t]=function(c,h,d){return n(Tn(c),dn(h||{},s),d)},l&&(Ot.prototype[t]=function(c,h,d){return this.add(Cd[t](c,ir(h)?h:(d=h)&&{},this),d)})},registerEase:function(e,t){Pe[e]=Ri(t)},parseEase:function(e,t){return arguments.length?Ri(e,t):Pe},getById:function(e){return Ke.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ot(e),r,s;for(n.smoothChildTiming=Yt(e.smoothChildTiming),Ke.remove(n),n._dp=0,n._time=n._tTime=Ke._time,r=Ke._first;r;)s=r._next,(t||!(!r._dur&&r instanceof ht&&r.vars.onComplete===r._targets[0]))&&nr(n,r,r._start-r._delay),r=s;return nr(Ke,n,0),n},context:function(e,t){return e?new k1(e,t):Ve},matchMedia:function(e){return new yE(e)},matchMediaRefresh:function(){return Ii.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||hf()},addEventListener:function(e,t){var n=mc[e]||(mc[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=mc[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:XP,wrapYoyo:QP,distribute:l1,random:u1,snap:c1,normalize:YP,getUnit:It,clamp:GP,splitColor:m1,toArray:Tn,selector:lf,mapRange:d1,pipe:VP,unitize:qP,interpolate:KP,shuffle:a1},install:Xx,effects:Cd,ticker:an,updateRoot:Ot.updateRoot,plugins:on,globalTimeline:Ke,core:{PropTween:Qt,globals:Qx,Tween:ht,Timeline:Ot,Animation:ba,getCache:ki,_removeLinkedListItem:Gc,reverting:function(){return Tt},context:function(e){return e&&Ve&&(Ve.data.push(e),e._ctx=Ve),Ve},suppressOverwrites:function(e){return Wf=e}}};Xt("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Ac[i]=ht[i]});an.add(Ot.updateRoot);xs=Ac.to({},{duration:0});var _E=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},xE=function(e,t){var n=e._targets,r,s,l;for(r in t)for(s=n.length;s--;)l=e._ptLookup[s][r],l&&(l=l.d)&&(l._pt&&(l=_E(l,r)),l&&l.modifier&&l.modifier(t[r],e,n[s],r))},Ad=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,l){l._onInit=function(c){var h,d;if(vt(s)&&(h={},Xt(s,function(f){return h[f]=1}),s=h),t){h={};for(d in s)h[d]=t(s[d]);s=h}xE(c,s)}}}},Jt=Ac.registerPlugin({name:"attr",init:function(e,t,n,r,s){var l,c,h;this.tween=n;for(l in t)h=e.getAttribute(l)||"",c=this.add(e,"setAttribute",(h||0)+"",t[l],r,s,0,0,l),c.op=l,c.b=h,this._props.push(l)},render:function(e,t){for(var n=t._pt;n;)Tt?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Ad("roundProps",cf),Ad("modifiers"),Ad("snap",c1))||Ac;ht.version=Ot.version=Jt.version="3.13.0";Yx=1;Gf()&&zs();Pe.Power0;Pe.Power1;Pe.Power2;Pe.Power3;Pe.Power4;Pe.Linear;Pe.Quad;Pe.Cubic;Pe.Quart;Pe.Quint;Pe.Strong;Pe.Elastic;Pe.Back;Pe.SteppedEase;Pe.Bounce;Pe.Sine;Pe.Expo;Pe.Circ;var By,Xr,Es,np,Ai,Fy,rp,vE=function(){return typeof window<"u"},Cr={},Pi=180/Math.PI,As=Math.PI/180,ds=Math.atan2,Oy=1e8,ip=/([A-Z])/g,SE=/(left|right|width|margin|padding|x)/i,wE=/[\s,\(]\S/,rr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},df=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},CE=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},bE=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},TE=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},M1=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},R1=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},PE=function(e,t,n){return e.style[t]=n},EE=function(e,t,n){return e.style.setProperty(t,n)},AE=function(e,t,n){return e._gsap[t]=n},kE=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},ME=function(e,t,n,r,s){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(s,l)},RE=function(e,t,n,r,s){var l=e._gsap;l[t]=n,l.renderTransform(s,l)},et="transform",Kt=et+"Origin",IE=function i(e,t){var n=this,r=this.target,s=r.style,l=r._gsap;if(e in Cr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=rr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return n.tfm[c]=gr(r,c)}):this.tfm[e]=l.x?l[e]:gr(r,e),e===Kt&&(this.tfm.zOrigin=l.zOrigin);else return rr.transform.split(",").forEach(function(c){return i.call(n,c,t)});if(this.props.indexOf(et)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Kt,t,"")),e=et}(s||t)&&this.props.push(e,t,s[e])},I1=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},DE=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,l;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(ip,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=rp(),(!s||!s.isStart)&&!n[et]&&(I1(n),r.zOrigin&&n[Kt]&&(n[Kt]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},D1=function(e,t){var n={target:e,props:[],revert:DE,save:IE};return e._gsap||Jt.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return n.save(r)}),n},$1,ff=function(e,t){var n=Xr.createElementNS?Xr.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Xr.createElement(e);return n&&n.style?n:Xr.createElement(e)},Pn=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(ip,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,Ws(t)||t,1)||""},Ny="O,Moz,ms,Ms,Webkit".split(","),Ws=function(e,t,n){var r=t||Ai,s=r.style,l=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(Ny[l]+e in s););return l<0?null:(l===3?"ms":l>=0?Ny[l]:"")+e},pf=function(){vE()&&window.document&&(By=window,Xr=By.document,Es=Xr.documentElement,Ai=ff("div")||{style:{}},ff("div"),et=Ws(et),Kt=et+"Origin",Ai.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$1=!!Ws("perspective"),rp=Jt.core.reverting,np=1)},Hy=function(e){var t=e.ownerSVGElement,n=ff("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",n.appendChild(r),Es.appendChild(n);try{s=r.getBBox()}catch{}return n.removeChild(r),Es.removeChild(n),s},zy=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},L1=function(e){var t,n;try{t=e.getBBox()}catch{t=Hy(e),n=1}return t&&(t.width||t.height)||n||(t=Hy(e)),t&&!t.width&&!t.x&&!t.y?{x:+zy(e,["x","cx","x1"])||0,y:+zy(e,["y","cy","y1"])||0,width:0,height:0}:t},B1=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&L1(e))},Fi=function(e,t){if(t){var n=e.style,r;t in Cr&&t!==Kt&&(t=et),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(ip,"-$1").toLowerCase())):n.removeAttribute(t)}},Qr=function(e,t,n,r,s,l){var c=new Qt(e._pt,t,n,0,1,l?R1:M1);return e._pt=c,c.b=r,c.e=s,e._props.push(n),c},Wy={deg:1,rad:1,turn:1},$E={grid:1,flex:1},ei=function i(e,t,n,r){var s=parseFloat(n)||0,l=(n+"").trim().substr((s+"").length)||"px",c=Ai.style,h=SE.test(t),d=e.tagName.toLowerCase()==="svg",f=(d?"client":"offset")+(h?"Width":"Height"),m=100,g=r==="px",y=r==="%",v,x,S,C;if(r===l||!s||Wy[r]||Wy[l])return s;if(l!=="px"&&!g&&(s=i(e,t,n,"px")),C=e.getCTM&&B1(e),(y||l==="%")&&(Cr[t]||~t.indexOf("adius")))return v=C?e.getBBox()[h?"width":"height"]:e[f],ct(y?s/v*m:s/100*v);if(c[h?"width":"height"]=m+(g?l:r),x=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!d?e:e.parentNode,C&&(x=(e.ownerSVGElement||{}).parentNode),(!x||x===Xr||!x.appendChild)&&(x=Xr.body),S=x._gsap,S&&y&&S.width&&h&&S.time===an.time&&!S.uncache)return ct(s/S.width*m);if(y&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=m+r,v=e[f],b?e.style[t]=b:Fi(e,t)}else(y||l==="%")&&!$E[Pn(x,"display")]&&(c.position=Pn(e,"position")),x===e&&(c.position="static"),x.appendChild(Ai),v=Ai[f],x.removeChild(Ai),c.position="absolute";return h&&y&&(S=ki(x),S.time=an.time,S.width=x[f]),ct(g?v*s/m:v&&s?m/v*s:0)},gr=function(e,t,n,r){var s;return np||pf(),t in rr&&t!=="transform"&&(t=rr[t],~t.indexOf(",")&&(t=t.split(",")[0])),Cr[t]&&t!=="transform"?(s=Pa(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Mc(Pn(e,Kt))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=kc[t]&&kc[t](e,t,n)||Pn(e,t)||Zx(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ei(e,t,s,n)+n:s},LE=function(e,t,n,r){if(!n||n==="none"){var s=Ws(t,e,1),l=s&&Pn(e,s,1);l&&l!==n?(t=s,n=l):t==="borderColor"&&(n=Pn(e,"borderTopColor"))}var c=new Qt(this._pt,e.style,t,0,1,E1),h=0,d=0,f,m,g,y,v,x,S,C,b,P,E,A;if(c.b=n,c.e=r,n+="",r+="",r.substring(0,6)==="var(--"&&(r=Pn(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(x=e.style[t],e.style[t]=r,r=Pn(e,t)||r,x?e.style[t]=x:Fi(e,t)),f=[n,r],y1(f),n=f[0],r=f[1],g=n.match(_s)||[],A=r.match(_s)||[],A.length){for(;m=_s.exec(r);)S=m[0],b=r.substring(h,m.index),v?v=(v+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(v=1),S!==(x=g[d++]||"")&&(y=parseFloat(x)||0,E=x.substr((y+"").length),S.charAt(1)==="="&&(S=Ps(y,S)+E),C=parseFloat(S),P=S.substr((C+"").length),h=_s.lastIndex-P.length,P||(P=P||un.units[t]||E,h===r.length&&(r+=P,c.e+=P)),E!==P&&(y=ei(e,t,x,P)||0),c._pt={_next:c._pt,p:b||d===1?b:",",s:y,c:C-y,m:v&&v<4||t==="zIndex"?Math.round:0});c.c=h<r.length?r.substring(h,r.length):""}else c.r=t==="display"&&r==="none"?R1:M1;return Vx.test(r)&&(c.e=0),this._pt=c,c},jy={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},BE=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=jy[n]||n,t[1]=jy[r]||r,t.join(" ")},FE=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,l=n._gsap,c,h,d;if(s==="all"||s===!0)r.cssText="",h=1;else for(s=s.split(","),d=s.length;--d>-1;)c=s[d],Cr[c]&&(h=1,c=c==="transformOrigin"?Kt:et),Fi(n,c);h&&(Fi(n,et),l&&(l.svg&&n.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Pa(n,1),l.uncache=1,I1(r)))}},kc={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var l=e._pt=new Qt(e._pt,t,n,0,0,FE);return l.u=r,l.pr=-10,l.tween=s,e._props.push(n),1}}},Ta=[1,0,0,1,0,0],F1={},O1=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Gy=function(e){var t=Pn(e,et);return O1(t)?Ta:t.substr(7).match(Ux).map(ct)},sp=function(e,t){var n=e._gsap||ki(e),r=e.style,s=Gy(e),l,c,h,d;return n.svg&&e.getAttribute("transform")?(h=e.transform.baseVal.consolidate().matrix,s=[h.a,h.b,h.c,h.d,h.e,h.f],s.join(",")==="1,0,0,1,0,0"?Ta:s):(s===Ta&&!e.offsetParent&&e!==Es&&!n.svg&&(h=r.display,r.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(d=1,c=e.nextElementSibling,Es.appendChild(e)),s=Gy(e),h?r.display=h:Fi(e,"display"),d&&(c?l.insertBefore(e,c):l?l.appendChild(e):Es.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},mf=function(e,t,n,r,s,l){var c=e._gsap,h=s||sp(e,!0),d=c.xOrigin||0,f=c.yOrigin||0,m=c.xOffset||0,g=c.yOffset||0,y=h[0],v=h[1],x=h[2],S=h[3],C=h[4],b=h[5],P=t.split(" "),E=parseFloat(P[0])||0,A=parseFloat(P[1])||0,M,k,$,D;n?h!==Ta&&(k=y*S-v*x)&&($=E*(S/k)+A*(-x/k)+(x*b-S*C)/k,D=E*(-v/k)+A*(y/k)-(y*b-v*C)/k,E=$,A=D):(M=L1(e),E=M.x+(~P[0].indexOf("%")?E/100*M.width:E),A=M.y+(~(P[1]||P[0]).indexOf("%")?A/100*M.height:A)),r||r!==!1&&c.smooth?(C=E-d,b=A-f,c.xOffset=m+(C*y+b*x)-C,c.yOffset=g+(C*v+b*S)-b):c.xOffset=c.yOffset=0,c.xOrigin=E,c.yOrigin=A,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[Kt]="0px 0px",l&&(Qr(l,c,"xOrigin",d,E),Qr(l,c,"yOrigin",f,A),Qr(l,c,"xOffset",m,c.xOffset),Qr(l,c,"yOffset",g,c.yOffset)),e.setAttribute("data-svg-origin",E+" "+A)},Pa=function(e,t){var n=e._gsap||new S1(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,l="px",c="deg",h=getComputedStyle(e),d=Pn(e,Kt)||"0",f,m,g,y,v,x,S,C,b,P,E,A,M,k,$,D,O,G,te,Z,ie,he,V,Q,X,U,W,R,N,J,ne,re;return f=m=g=x=S=C=b=P=E=0,y=v=1,n.svg=!!(e.getCTM&&B1(e)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(r[et]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[et]!=="none"?h[et]:"")),r.scale=r.rotate=r.translate="none"),k=sp(e,n.svg),n.svg&&(n.uncache?(X=e.getBBox(),d=n.xOrigin-X.x+"px "+(n.yOrigin-X.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),mf(e,Q||d,!!Q||n.originIsAbsolute,n.smooth!==!1,k)),A=n.xOrigin||0,M=n.yOrigin||0,k!==Ta&&(G=k[0],te=k[1],Z=k[2],ie=k[3],f=he=k[4],m=V=k[5],k.length===6?(y=Math.sqrt(G*G+te*te),v=Math.sqrt(ie*ie+Z*Z),x=G||te?ds(te,G)*Pi:0,b=Z||ie?ds(Z,ie)*Pi+x:0,b&&(v*=Math.abs(Math.cos(b*As))),n.svg&&(f-=A-(A*G+M*Z),m-=M-(A*te+M*ie))):(re=k[6],J=k[7],W=k[8],R=k[9],N=k[10],ne=k[11],f=k[12],m=k[13],g=k[14],$=ds(re,N),S=$*Pi,$&&(D=Math.cos(-$),O=Math.sin(-$),Q=he*D+W*O,X=V*D+R*O,U=re*D+N*O,W=he*-O+W*D,R=V*-O+R*D,N=re*-O+N*D,ne=J*-O+ne*D,he=Q,V=X,re=U),$=ds(-Z,N),C=$*Pi,$&&(D=Math.cos(-$),O=Math.sin(-$),Q=G*D-W*O,X=te*D-R*O,U=Z*D-N*O,ne=ie*O+ne*D,G=Q,te=X,Z=U),$=ds(te,G),x=$*Pi,$&&(D=Math.cos($),O=Math.sin($),Q=G*D+te*O,X=he*D+V*O,te=te*D-G*O,V=V*D-he*O,G=Q,he=X),S&&Math.abs(S)+Math.abs(x)>359.9&&(S=x=0,C=180-C),y=ct(Math.sqrt(G*G+te*te+Z*Z)),v=ct(Math.sqrt(V*V+re*re)),$=ds(he,V),b=Math.abs($)>2e-4?$*Pi:0,E=ne?1/(ne<0?-ne:ne):0),n.svg&&(Q=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!O1(Pn(e,et)),Q&&e.setAttribute("transform",Q))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(y*=-1,b+=x<=0?180:-180,x+=x<=0?180:-180):(v*=-1,b+=b<=0?180:-180)),t=t||n.uncache,n.x=f-((n.xPercent=f&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=m-((n.yPercent=m&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=g+l,n.scaleX=ct(y),n.scaleY=ct(v),n.rotation=ct(x)+c,n.rotationX=ct(S)+c,n.rotationY=ct(C)+c,n.skewX=b+c,n.skewY=P+c,n.transformPerspective=E+l,(n.zOrigin=parseFloat(d.split(" ")[2])||!t&&n.zOrigin||0)&&(r[Kt]=Mc(d)),n.xOffset=n.yOffset=0,n.force3D=un.force3D,n.renderTransform=n.svg?NE:$1?N1:OE,n.uncache=0,n},Mc=function(e){return(e=e.split(" "))[0]+" "+e[1]},kd=function(e,t,n){var r=It(t);return ct(parseFloat(t)+parseFloat(ei(e,"x",n+"px",r)))+r},OE=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,N1(e,t)},vi="0deg",Go="0px",Si=") ",N1=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,l=n.x,c=n.y,h=n.z,d=n.rotation,f=n.rotationY,m=n.rotationX,g=n.skewX,y=n.skewY,v=n.scaleX,x=n.scaleY,S=n.transformPerspective,C=n.force3D,b=n.target,P=n.zOrigin,E="",A=C==="auto"&&e&&e!==1||C===!0;if(P&&(m!==vi||f!==vi)){var M=parseFloat(f)*As,k=Math.sin(M),$=Math.cos(M),D;M=parseFloat(m)*As,D=Math.cos(M),l=kd(b,l,k*D*-P),c=kd(b,c,-Math.sin(M)*-P),h=kd(b,h,$*D*-P+P)}S!==Go&&(E+="perspective("+S+Si),(r||s)&&(E+="translate("+r+"%, "+s+"%) "),(A||l!==Go||c!==Go||h!==Go)&&(E+=h!==Go||A?"translate3d("+l+", "+c+", "+h+") ":"translate("+l+", "+c+Si),d!==vi&&(E+="rotate("+d+Si),f!==vi&&(E+="rotateY("+f+Si),m!==vi&&(E+="rotateX("+m+Si),(g!==vi||y!==vi)&&(E+="skew("+g+", "+y+Si),(v!==1||x!==1)&&(E+="scale("+v+", "+x+Si),b.style[et]=E||"translate(0, 0)"},NE=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,l=n.x,c=n.y,h=n.rotation,d=n.skewX,f=n.skewY,m=n.scaleX,g=n.scaleY,y=n.target,v=n.xOrigin,x=n.yOrigin,S=n.xOffset,C=n.yOffset,b=n.forceCSS,P=parseFloat(l),E=parseFloat(c),A,M,k,$,D;h=parseFloat(h),d=parseFloat(d),f=parseFloat(f),f&&(f=parseFloat(f),d+=f,h+=f),h||d?(h*=As,d*=As,A=Math.cos(h)*m,M=Math.sin(h)*m,k=Math.sin(h-d)*-g,$=Math.cos(h-d)*g,d&&(f*=As,D=Math.tan(d-f),D=Math.sqrt(1+D*D),k*=D,$*=D,f&&(D=Math.tan(f),D=Math.sqrt(1+D*D),A*=D,M*=D)),A=ct(A),M=ct(M),k=ct(k),$=ct($)):(A=m,$=g,M=k=0),(P&&!~(l+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(P=ei(y,"x",l,"px"),E=ei(y,"y",c,"px")),(v||x||S||C)&&(P=ct(P+v-(v*A+x*k)+S),E=ct(E+x-(v*M+x*$)+C)),(r||s)&&(D=y.getBBox(),P=ct(P+r/100*D.width),E=ct(E+s/100*D.height)),D="matrix("+A+","+M+","+k+","+$+","+P+","+E+")",y.setAttribute("transform",D),b&&(y.style[et]=D)},HE=function(e,t,n,r,s){var l=360,c=vt(s),h=parseFloat(s)*(c&&~s.indexOf("rad")?Pi:1),d=h-r,f=r+d+"deg",m,g;return c&&(m=s.split("_")[1],m==="short"&&(d%=l,d!==d%(l/2)&&(d+=d<0?l:-l)),m==="cw"&&d<0?d=(d+l*Oy)%l-~~(d/l)*l:m==="ccw"&&d>0&&(d=(d-l*Oy)%l-~~(d/l)*l)),e._pt=g=new Qt(e._pt,t,n,r,d,CE),g.e=f,g.u="deg",e._props.push(n),g},Uy=function(e,t){for(var n in t)e[n]=t[n];return e},zE=function(e,t,n){var r=Uy({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",l=n.style,c,h,d,f,m,g,y,v;r.svg?(d=n.getAttribute("transform"),n.setAttribute("transform",""),l[et]=t,c=Pa(n,1),Fi(n,et),n.setAttribute("transform",d)):(d=getComputedStyle(n)[et],l[et]=t,c=Pa(n,1),l[et]=d);for(h in Cr)d=r[h],f=c[h],d!==f&&s.indexOf(h)<0&&(y=It(d),v=It(f),m=y!==v?ei(n,h,d,v):parseFloat(d),g=parseFloat(f),e._pt=new Qt(e._pt,c,h,m,g-m,df),e._pt.u=v||0,e._props.push(h));Uy(c,r)};Xt("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",l=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(c){return e<2?i+c:"border"+c+i});kc[e>1?"border"+i:i]=function(c,h,d,f,m){var g,y;if(arguments.length<4)return g=l.map(function(v){return gr(c,v,d)}),y=g.join(" "),y.split(g[0]).length===5?g[0]:y;g=(f+"").split(" "),y={},l.forEach(function(v,x){return y[v]=g[x]=g[x]||g[(x-1)/2|0]}),c.init(h,y,m)}});var H1={name:"css",register:pf,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var l=this._props,c=e.style,h=n.vars.startAt,d,f,m,g,y,v,x,S,C,b,P,E,A,M,k,$;np||pf(),this.styles=this.styles||D1(e),$=this.styles.props,this.tween=n;for(x in t)if(x!=="autoRound"&&(f=t[x],!(on[x]&&w1(x,t,n,r,e,s)))){if(y=typeof f,v=kc[x],y==="function"&&(f=f.call(n,r,e,s),y=typeof f),y==="string"&&~f.indexOf("random(")&&(f=wa(f)),v)v(this,e,x,f,n)&&(k=1);else if(x.substr(0,2)==="--")d=(getComputedStyle(e).getPropertyValue(x)+"").trim(),f+="",Zr.lastIndex=0,Zr.test(d)||(S=It(d),C=It(f)),C?S!==C&&(d=ei(e,x,d,C)+C):S&&(f+=S),this.add(c,"setProperty",d,f,r,s,0,0,x),l.push(x),$.push(x,0,c[x]);else if(y!=="undefined"){if(h&&x in h?(d=typeof h[x]=="function"?h[x].call(n,r,e,s):h[x],vt(d)&&~d.indexOf("random(")&&(d=wa(d)),It(d+"")||d==="auto"||(d+=un.units[x]||It(gr(e,x))||""),(d+"").charAt(1)==="="&&(d=gr(e,x))):d=gr(e,x),g=parseFloat(d),b=y==="string"&&f.charAt(1)==="="&&f.substr(0,2),b&&(f=f.substr(2)),m=parseFloat(f),x in rr&&(x==="autoAlpha"&&(g===1&&gr(e,"visibility")==="hidden"&&m&&(g=0),$.push("visibility",0,c.visibility),Qr(this,c,"visibility",g?"inherit":"hidden",m?"inherit":"hidden",!m)),x!=="scale"&&x!=="transform"&&(x=rr[x],~x.indexOf(",")&&(x=x.split(",")[0]))),P=x in Cr,P){if(this.styles.save(x),y==="string"&&f.substring(0,6)==="var(--"&&(f=Pn(e,f.substring(4,f.indexOf(")"))),m=parseFloat(f)),E||(A=e._gsap,A.renderTransform&&!t.parseTransform||Pa(e,t.parseTransform),M=t.smoothOrigin!==!1&&A.smooth,E=this._pt=new Qt(this._pt,c,et,0,1,A.renderTransform,A,0,-1),E.dep=1),x==="scale")this._pt=new Qt(this._pt,A,"scaleY",A.scaleY,(b?Ps(A.scaleY,b+m):m)-A.scaleY||0,df),this._pt.u=0,l.push("scaleY",x),x+="X";else if(x==="transformOrigin"){$.push(Kt,0,c[Kt]),f=BE(f),A.svg?mf(e,f,0,M,0,this):(C=parseFloat(f.split(" ")[2])||0,C!==A.zOrigin&&Qr(this,A,"zOrigin",A.zOrigin,C),Qr(this,c,x,Mc(d),Mc(f)));continue}else if(x==="svgOrigin"){mf(e,f,1,M,0,this);continue}else if(x in F1){HE(this,A,x,g,b?Ps(g,b+f):f);continue}else if(x==="smoothOrigin"){Qr(this,A,"smooth",A.smooth,f);continue}else if(x==="force3D"){A[x]=f;continue}else if(x==="transform"){zE(this,f,e);continue}}else x in c||(x=Ws(x)||x);if(P||(m||m===0)&&(g||g===0)&&!wE.test(f)&&x in c)S=(d+"").substr((g+"").length),m||(m=0),C=It(f)||(x in un.units?un.units[x]:S),S!==C&&(g=ei(e,x,d,C)),this._pt=new Qt(this._pt,P?A:c,x,g,(b?Ps(g,b+m):m)-g,!P&&(C==="px"||x==="zIndex")&&t.autoRound!==!1?TE:df),this._pt.u=C||0,S!==C&&C!=="%"&&(this._pt.b=d,this._pt.r=bE);else if(x in c)LE.call(this,e,x,d,b?b+f:f);else if(x in e)this.add(e,x,d||e[x],b?b+f:f,r,s);else if(x!=="parseTransform"){Vf(x,f);continue}P||(x in c?$.push(x,0,c[x]):typeof e[x]=="function"?$.push(x,2,e[x]()):$.push(x,1,d||e[x])),l.push(x)}}k&&A1(this)},render:function(e,t){if(t.tween._time||!rp())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:gr,aliases:rr,getSetter:function(e,t,n){var r=rr[t];return r&&r.indexOf(",")<0&&(t=r),t in Cr&&t!==Kt&&(e._gsap.x||gr(e,"x"))?n&&Fy===n?t==="scale"?kE:AE:(Fy=n||{})&&(t==="scale"?ME:RE):e.style&&!jf(e.style[t])?PE:~t.indexOf("-")?EE:ep(e,t)},core:{_removeProperty:Fi,_getMatrix:sp}};Jt.utils.checkPrefix=Ws;Jt.core.getStyleSaver=D1;(function(i,e,t,n){var r=Xt(i+","+e+","+t,function(s){Cr[s]=1});Xt(e,function(s){un.units[s]="deg",F1[s]=1}),rr[r[13]]=i+","+e,Xt(n,function(s){var l=s.split(":");rr[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Xt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){un.units[i]="px"});Jt.registerPlugin(H1);var ve=Jt.registerPlugin(H1)||Jt;ve.core.Tween;class z1{constructor(e){this.radius=8,this.id=e.id,this.gameId=e.gameId,this.stat=e.stat,this.side=e.side,this.index=e.index,this.cellId=e.cellId,this.position=e.position,this.team=e.team,this.maxHp=e.maxHp,this.hp=e.maxHp,this.alive=!0,this.isRegenerated=e.isRegenerated??!1,this.sprite=this.createSprite()}createSprite(){const e=new ce,t=this.team.color;return this.drawHPSegments(e,t,this.hp),e.x=this.position.x,e.y=this.position.y,e}drawHPSegments(e,t,n){e.clear();const r=n/this.maxHp,s=this.radius*2,l=.6+r*.4;this.drawShieldOutline(e,s+4,s+4,t,l),this.drawShieldOutline(e,s+1.5,s+1.5,0,1);const c=n===3?this.lightenColor(t,1.6):n===2?this.lightenColor(t,1.3):t;this.drawShieldOutline(e,s-1,s-1,c,1),n===2?this.drawSubtleCrack(e,s-1):n===1&&this.drawSevereCracks(e,s-1)}drawSubtleCrack(e,t){const n=t/2;e.moveTo(-n*.4,-n*.6),e.lineTo(-n*.1,-n*.2),e.lineTo(0,0),e.stroke({width:1,color:0,alpha:.5})}drawSevereCracks(e,t){const n=t/2;e.moveTo(-n*.3,-n*.7),e.lineTo(-n*.15,-n*.3),e.lineTo(0,0),e.lineTo(n*.1,n*.3),e.lineTo(n*.2,n*.6),e.stroke({width:1.2,color:0,alpha:.7}),e.moveTo(n*.4,-n*.5),e.lineTo(n*.2,-n*.2),e.lineTo(n*.1,0),e.stroke({width:1,color:0,alpha:.6}),e.moveTo(-n*.5,-n*.1),e.lineTo(-n*.2,0),e.stroke({width:.8,color:0,alpha:.5})}getShieldWidthAtY(e,t){const n=t/2,r=e/n;if(r<0){const s=r+1;return t*(.7+.3*s)}else return t*(1-.6*r)}drawShieldOutline(e,t,n,r,s){const l=-n/2,c=0,h=n/2,d=t*.75,f=t,m=t*.4;e.moveTo(-d/2,l),e.bezierCurveTo(-d/2,l-.5,d/2,l-.5,d/2,l),e.bezierCurveTo(d/2+1,l+n*.15,f/2,c-n*.1,f/2,c),e.bezierCurveTo(f/2,c+n*.15,m/2+1,h-n*.2,0,h),e.bezierCurveTo(-m/2-1,h-n*.2,-f/2,c+n*.15,-f/2,c),e.bezierCurveTo(-f/2,c-n*.1,-d/2-1,l+n*.15,-d/2,l),e.fill({color:r,alpha:s})}lightenColor(e,t){const n=Math.min(255,(e>>16&255)*t),r=Math.min(255,(e>>8&255)*t),s=Math.min(255,(e&255)*t);return n<<16|r<<8|s}darkenColor(e,t){const n=(e>>16&255)*t,r=(e>>8&255)*t,s=(e&255)*t;return n<<16|r<<8|s}takeDamage(e){if(!this.alive){console.warn(` Attempted to damage dead defense dot: ${this.id}`);return}const t=this.hp;this.hp=Math.max(0,this.hp-e);const n=this.hp;console.log(` [DEFENSE DOT] ${this.id} took ${e} damage | ${t}  ${n} HP`),this.hp<=0?this.destroy():(this.updateVisuals(),this.animateDamage())}updateVisuals(){const e=this.team.color;this.drawHPSegments(this.sprite,e,this.hp);const n=.85+this.hp/this.maxHp*.15;this.sprite.scale.set(n,n)}animateDamage(){ve.timeline().to(this.sprite.scale,{x:1.3,y:1.3,duration:.1,ease:"power2.out"}).to(this.sprite.scale,{x:1,y:1,duration:.2,ease:"elastic.out(1, 0.5)"}),ve.timeline().to(this.sprite,{alpha:.3,duration:.1}).to(this.sprite,{alpha:1,duration:.2})}destroy(){this.alive=!1,console.log(` [DEFENSE DOT DESTROYED] ${this.id} | HP: 0/${this.maxHp}`),ve.timeline().to(this.sprite.scale,{x:1.3,y:1.3,duration:.1,ease:"power2.out"}).to(this.sprite,{alpha:0,duration:.25,ease:"power2.in"},"-=0.05").to(this.sprite.scale,{x:.3,y:.3,duration:.25,ease:"power2.in"},"-=0.25").call(()=>{this.sprite.visible=!1,console.log(` Defense dot animation complete: ${this.id}`)})}restore(e,t){this.hp=e,this.alive=t,t?(this.sprite.visible=!0,this.sprite.alpha=1,this.sprite.scale.set(1,1)):(this.sprite.visible=!1,this.sprite.alpha=0,this.sprite.scale.set(0,0))}getState(){return{id:this.id,hp:this.hp,alive:this.alive}}dispose(){ve.killTweensOf(this.sprite),ve.killTweensOf(this.sprite.scale),this.sprite.destroy()}}const On={cellWidth:30,cellHeight:40,defenseCellsPerSide:10,attackCellsPerSide:0,battlefieldWidth:150,statLabelWidth:60,weaponSlotWidth:30};function gf(i){return i<=0?0:Math.ceil(i/3)}function WE(i){if(i<=0)return[2,2,2,2,2];let t=2,n=2,r=2,s=2,l=2;const c=i;if(c>0){const d=c*.6,f=c*.2,m=c*.1,g=c*.05,y=c*.05,v=Math.floor(d),x=Math.floor(f),S=Math.floor(m),C=Math.floor(g),b=Math.floor(y),P=v+x+S+C+b,E=c-P,A=[{index:0,fraction:d-v,value:v},{index:1,fraction:f-x,value:x},{index:2,fraction:m-S,value:S},{index:3,fraction:g-C,value:C},{index:4,fraction:y-b,value:b}];A.sort((M,k)=>k.fraction!==M.fraction?k.fraction-M.fraction:M.index-k.index);for(let M=0;M<E;M++)A[M].value++;t+=A.find(M=>M.index===0).value,n+=A.find(M=>M.index===1).value,r+=A.find(M=>M.index===2).value,s+=A.find(M=>M.index===3).value,l+=A.find(M=>M.index===4).value}const h=10;return t=Math.min(t,h),n=Math.min(n,h),r=Math.min(r,h),s=Math.min(s,h),l=Math.min(l,h),[t,n,r,s,l]}function yf(i,e){return i.teamRecords.find(n=>n.teamId===e)?.units??0}function W1(i,e,t){const n=t-1;return`defense-${i}-${e}-${n}`}class jE{constructor(){this.health=new Map}initializeCastle(e,t,n){if(this.health.has(e)){console.warn(`[CastleHealthSystem] Castle ${e} already initialized`);return}const r={castleId:e,currentHP:n??t,maxHP:t,shield:null,damageHistory:[]};this.health.set(e,r),console.log(`[CastleHealthSystem] Initialized castle ${e}: ${r.currentHP}/${t} HP`)}getCurrentHP(e){return this.health.get(e)?.currentHP??0}getMaxHP(e){return this.health.get(e)?.maxHP??0}getShield(e){return this.health.get(e)?.shield??null}hasActiveShield(e){return this.getShield(e)?.isActive??!1}activateShield(e,t,n,r){const s=this.health.get(e);if(!s){console.error(`[CastleHealthSystem] Castle ${e} not found`);return}if(s.shield?.isActive){console.warn(`[CastleHealthSystem] Castle ${e} already has active shield`);return}s.shield={isActive:!0,currentHP:t,maxHP:t,activationThreshold:n,source:r},console.log(`[CastleHealthSystem] Shield activated for ${e}: ${t} HP (source: ${r})`)}deactivateShield(e){const t=this.health.get(e);!t||!t.shield||(console.log(`[CastleHealthSystem] Shield deactivated for ${e}`),t.shield=null)}takeDamage(e,t,n){return this._applyDamage(e,t,n)}_applyDamage(e,t,n){const r=this.health.get(e);if(!r)return console.error(`[CastleHealthSystem] Castle ${e} not found`),{totalDamage:0,shieldDamage:0,hpDamage:0,shieldBroken:!1,castleDestroyed:!1,finalHP:0,finalShieldHP:0};let s=t,l=0,c=0,h=!1;if(r.shield?.isActive){const m=Math.min(s,r.shield.currentHP);r.shield.currentHP-=m,l=m,s-=m,r.shield.currentHP<=0&&(h=!0,this.deactivateShield(e))}s>0&&(c=Math.min(s,r.currentHP),r.currentHP-=c);const d={timestamp:Date.now(),damage:t,shieldDamage:l,hpDamage:c,source:n};return r.damageHistory.push(d),{totalDamage:t,shieldDamage:l,hpDamage:c,shieldBroken:h,castleDestroyed:r.currentHP<=0,finalHP:r.currentHP,finalShieldHP:r.shield?.currentHP??0}}heal(e,t){const n=this.health.get(e);if(!n){console.error(`[CastleHealthSystem] Castle ${e} not found`);return}const r=n.currentHP;n.currentHP=Math.min(n.currentHP+t,n.maxHP);const s=n.currentHP-r;console.log(`[CastleHealthSystem] Healed ${e}: +${s} HP (${r}  ${n.currentHP})`)}healShield(e,t,n=!0){const r=this.health.get(e);if(!r){console.error(`[CastleHealthSystem] Castle ${e} not found`);return}if(!r.shield||!r.shield.isActive){console.warn(`[CastleHealthSystem] No active shield to heal for ${e}`);return}const s=r.shield.currentHP,l=r.shield.maxHP;n?(r.shield.maxHP+=t,r.shield.currentHP+=t):r.shield.currentHP=Math.min(r.shield.currentHP+t,r.shield.maxHP);const c=r.shield.currentHP-s;console.log(`[CastleHealthSystem] Shield healed for ${e}: +${c} HP (${s}/${l}  ${r.shield.currentHP}/${r.shield.maxHP})`)}getDamageHistory(e){return this.health.get(e)?.damageHistory??[]}clearDamageHistory(e){const t=this.health.get(e);t&&(t.damageHistory=[])}removeCastle(e){this.health.delete(e),console.log(`[CastleHealthSystem] Removed castle ${e}`)}getAllCastles(){return Array.from(this.health.keys())}reset(){this.health.clear(),console.log("[CastleHealthSystem] Reset all health tracking")}}const rt=new jE,GE={id:"blue-orb-shield",name:"Blue Orb Shield",description:"Protective shield that activates at HP < 3",icon:"",shieldHP:5,shieldActivationThreshold:3},UE={id:"fire-orb",name:"Fire Orb",description:"For every 5 POINTS projectiles, fire 1 bonus FIRE projectile",icon:""};class VE{constructor(e){this.sprite=null,this.isDestroyed=!1,this.rankBadge=null,this.levelBadge=null,this.nameText=null,this.hpBarContainer=null,this.hpBarBackground=null,this.hpBarFill=null,this.hpText=null,this.equippedItems={slot1:GE,slot2:UE,slot3:null},this.shieldState=null,this.shieldVisual=null,this.itemSlot1=null,this.itemSlot2=null,this.itemSlot3=null,this.onItemSlotClick=null,this.bloodOverlay=null,this.bloodSplatters=[],this.damageStates=[{hpThreshold:1,opacity:1,tint:16777215,shake:!1,particles:!1},{hpThreshold:.66,opacity:.95,tint:16772829,shake:!1,particles:!1},{hpThreshold:.33,opacity:.85,tint:16764074,shake:!0,particles:!0},{hpThreshold:0,opacity:.5,tint:8947848,shake:!0,particles:!0}],this.id=e.id,this.capperId=e.capperId,this.capperName=e.capperName,this.capperRank=e.capperRank||"KNIGHT",this.capperLevel=e.capperLevel||1,this.maxHP=e.maxHP,this.currentHP=e.currentHP,this.position=e.position,this.scale=e.scale||.3,this.boxWidth=e.boxWidth||140,this.side=e.side||"left",this.container=new Qe,this.container.position.set(this.position.x,this.position.y),rt.initializeCastle(this.id,this.maxHP,this.currentHP)}async load(){try{const e=await Zo.load("/assets/castles/castle-base.png");this.sprite=new Ls(e),this.sprite.anchor.set(.5,.5),this.sprite.scale.set(this.scale),this.sprite.position.set(0,-20),this.sprite.name="castle",this.container.addChild(this.sprite),this.createHPBar(),this.createEquippedItemIndicator(),this.updateDamageState(),console.log(` Castle ${this.id} loaded successfully`)}catch(e){console.error(` Failed to load castle ${this.id}:`,e)}}createRankBadge(){this.rankBadge=new Qe,this.rankBadge.position.set(0,-95);const e=100,t=24,n=new ce;n.rect(-e/2,0,e,t),n.fill({color:26316}),n.stroke({width:2,color:43775}),this.rankBadge.addChild(n);const r=new Ft({text:`Rank: ${this.capperLevel}`,style:{fontFamily:"Arial",fontSize:14,fontWeight:"bold",fill:43775,align:"center"}});r.anchor.set(.5,.5),r.position.set(0,t/2),this.rankBadge.addChild(r),this.container.addChild(this.rankBadge)}createCapperName(){this.nameText=new Ft({text:this.capperRank+`
`+this.capperName,style:{fontFamily:"Arial",fontSize:16,fontWeight:"bold",fill:43775,align:"center",lineHeight:20}}),this.nameText.anchor.set(.5,0),this.nameText.position.set(0,-70),this.container.addChild(this.nameText)}createHPBar(){if(!this.sprite)return;const t=this.sprite.width*.8,n=10,r=53;this.hpBarContainer=new Qe,this.hpBarContainer.position.set(0,r),this.hpBarBackground=new ce,this.hpBarBackground.rect(-t/2,0,t,n),this.hpBarBackground.fill({color:3342336}),this.hpBarContainer.addChild(this.hpBarBackground),this.hpBarFill=new ce,this.hpBarFill.rect(-t/2,0,t,n),this.hpBarFill.fill({color:65280}),this.hpBarContainer.addChild(this.hpBarFill),this.hpText=new Ft({text:`${this.currentHP}/${this.maxHP}`,style:{fontFamily:"Arial",fontSize:14,fontWeight:"bold",fill:65280,align:"center"}}),this.hpText.anchor.set(.5,0),this.hpText.position.set(0,n+2),this.hpBarContainer.addChild(this.hpText),this.container.addChild(this.hpBarContainer),this.updateHPBar()}createLevelBadge(){if(!this.sprite)return;this.levelBadge=new Qe;const e=this.sprite.width/2,t=this.side==="left"?-(e+45):e+45;this.levelBadge.position.set(t,-20);const r=60,s=50,l=8,c=new ce;c.roundRect(-r/2,-s/2,r,s,l),c.fill({color:1710638,alpha:.9}),c.stroke({width:2,color:16766720}),this.levelBadge.addChild(c);const h=new Ft({text:"LVL",style:{fontFamily:"Arial",fontSize:12,fontWeight:"bold",fill:11206570,align:"center"}});h.anchor.set(.5,.5),h.position.set(0,-12),this.levelBadge.addChild(h);const d=new Ft({text:this.capperLevel.toString(),style:{fontFamily:"Arial",fontSize:20,fontWeight:"bold",fill:16766720,align:"center"}});d.anchor.set(.5,.5),d.position.set(0,8),this.levelBadge.addChild(d),this.container.addChild(this.levelBadge)}createEquippedItemIndicator(){if(!this.sprite)return;const t=this.side==="left"?-135:105,n=-85,r=30,s=5,l=[this.equippedItems.slot1,this.equippedItems.slot2,this.equippedItems.slot3];for(let c=0;c<3;c++){const h=n+c*(r+s),d=new Qe;d.position.set(t,h);const f=new ce;f.roundRect(0,0,r,r,4),f.fill({color:859955}),f.stroke({width:2,color:26316}),d.addChild(f);const m=l[c];if(m)if(m.id==="blue-orb-shield"){const g=this.createBlueOrbShieldIcon(r);d.addChild(g)}else if(m.id==="fire-orb"){const g=this.createFireOrb(r);d.addChild(g)}else{const g=new Ft({text:m.icon,style:{fontSize:20,align:"center"}});g.anchor.set(.5),g.position.set(r/2,r/2),d.addChild(g)}this.container.addChild(d)}}createBlueOrbShieldIcon(e){const t=new Qe;t.position.set(e/2,e/2);const n=new ce;n.circle(0,0,15),n.fill({color:3900150,alpha:.2}),t.addChild(n);const r=new ce;r.circle(0,0,13),r.fill({color:6333946,alpha:.3}),t.addChild(r);const s=new ce;s.circle(0,0,12),s.fill({color:1981066,alpha:.4}),s.stroke({width:2.5,color:6333946,alpha:1}),t.addChild(s);const l=new ce;l.circle(0,0,9),l.stroke({width:1.5,color:9684477,alpha:.8}),t.addChild(l);const c=new ce;c.moveTo(0,-7),c.lineTo(5,-5),c.lineTo(5,3),c.lineTo(0,8),c.lineTo(-5,3),c.lineTo(-5,-5),c.closePath(),c.fill({color:16777215,alpha:.95}),c.moveTo(0,-7),c.lineTo(5,-5),c.lineTo(5,3),c.lineTo(0,8),c.lineTo(-5,3),c.lineTo(-5,-5),c.closePath(),c.stroke({width:1,color:3900150}),c.rect(-.8,-5,1.6,10),c.fill({color:3900150,alpha:.8}),c.rect(-3,-1,6,1.6),c.fill({color:3900150,alpha:.8}),t.addChild(c);const h=new ce;h.circle(-3,-4,2.5),h.fill({color:16777215,alpha:.6}),t.addChild(h);const d=new ce;return d.circle(4,-4,1.5),d.fill({color:9684477,alpha:.9}),t.addChild(d),t}createFireOrb(e){const t=new Qe;t.position.set(e/2,e/2);const n=new ce;n.circle(0,0,15),n.fill({color:16729344,alpha:.3}),t.addChild(n);const r=new ce;r.circle(0,0,13),r.fill({color:16737095,alpha:.4}),t.addChild(r);const s=new ce;s.circle(0,0,12),s.fill({color:14423100,alpha:.5}),s.stroke({width:2.5,color:16737095,alpha:1}),t.addChild(s);const l=new ce;l.circle(0,0,9),l.stroke({width:1.5,color:16753920,alpha:.8}),t.addChild(l);const c=new ce;c.moveTo(0,-6),c.bezierCurveTo(2,-4,3,-2,2,0),c.bezierCurveTo(3,2,1,4,0,6),c.bezierCurveTo(-1,4,-3,2,-2,0),c.bezierCurveTo(-3,-2,-2,-4,0,-6),c.fill({color:16766720,alpha:.95}),c.moveTo(0,-6),c.bezierCurveTo(2,-4,3,-2,2,0),c.bezierCurveTo(3,2,1,4,0,6),c.bezierCurveTo(-1,4,-3,2,-2,0),c.bezierCurveTo(-3,-2,-2,-4,0,-6),c.stroke({width:.5,color:16753920}),t.addChild(c);const h=new ce;h.circle(-3,-3,2.5),h.fill({color:16777215,alpha:.7}),t.addChild(h);const d=new ce;d.circle(4,-4,1.5),d.fill({color:16766720,alpha:.9}),t.addChild(d);const f=new ce;return f.circle(3,4,1.2),f.fill({color:16753920,alpha:.8}),t.addChild(f),t}createItemSlots(){if(!this.sprite)return;const e=80,t=35,n=8,r=-78/2;this.itemSlot1=this.createItemSlot(r,e,t,1),this.container.addChild(this.itemSlot1),this.itemSlot2=this.createItemSlot(r+t+n,e,t,2),this.container.addChild(this.itemSlot2)}createItemSlot(e,t,n,r){const s=new Qe;s.position.set(e,t);const l=new ce;return l.roundRect(0,0,n,n,4),l.fill({color:859955}),l.stroke({width:2,color:26316}),s.addChild(l),s.eventMode="static",s.cursor="pointer",s.on("pointerover",()=>{l.clear(),l.roundRect(0,0,n,n,4),l.fill({color:1718874}),l.stroke({width:2,color:43775})}),s.on("pointerout",()=>{l.clear(),l.roundRect(0,0,n,n,4),l.fill({color:859955}),l.stroke({width:2,color:26316})}),s.on("pointerdown",()=>{this.onItemSlotClick&&this.onItemSlotClick(r)}),s}updateHPBar(){if(console.log(` [Castle.updateHPBar] Called for castle ${this.id}, currentHP=${this.currentHP}, maxHP=${this.maxHP}`),!this.hpBarFill){console.error(` [Castle.updateHPBar] Missing hpBarFill for castle ${this.id}`);return}if(!this.sprite){console.error(` [Castle.updateHPBar] Missing sprite for castle ${this.id}`);return}if(!this.hpText){console.error(` [Castle.updateHPBar] Missing hpText for castle ${this.id}`);return}const e=this.getHPPercentage(),t=this.sprite.width,n=t*.8;console.log(` [Castle.updateHPBar] hpPercent=${e.toFixed(2)}, castleWidth=${t.toFixed(1)}, barWidth=${n.toFixed(1)}`),this.hpBarFill.clear(),this.hpBarFill.rect(-n/2,0,n*e,10);let r;e>.6?r=65280:e>.3?r=16776960:r=16711680,this.hpBarFill.fill({color:r});const s=this.hpText.text;this.hpText.text=`${this.currentHP}/${this.maxHP}`,this.hpText.style.fill=r,console.log(` [Castle.updateHPBar] HP bar updated! Text: "${s}"  "${this.hpText.text}", color=${r.toString(16)}, hpPercent=${e.toFixed(2)}`)}takeDamage(e){if(this.isDestroyed)return;console.log(` takeDamage called: damage=${e}, currentHP=${this.currentHP}`);const t=rt.getCurrentHP(this.id),n=t-e;!rt.hasActiveShield(this.id)&&(t<3||n<3)&&(console.log(" Shield activation condition met! Checking for shield items..."),this.checkAndActivateShield());const r=rt.takeDamage(this.id,e);console.log(" Damage result:",r),this.currentHP=r.finalHP,r.shieldBroken?this.deactivateShield():rt.hasActiveShield(this.id)&&this.updateShieldVisual(),this.addBloodSplatter(),this.flashDamage(),this.updateDamageState(),this.updateHPBar(),r.castleDestroyed&&this.destroy()}checkAndActivateShield(){console.log(" checkAndActivateShield called"),console.log(" Equipped items:",this.equippedItems);const e=[this.equippedItems.slot1,this.equippedItems.slot2,this.equippedItems.slot3];for(const t of e){if(console.log(" Checking item:",t),!t||t.shieldHP===void 0||t.shieldActivationThreshold===void 0){console.log(" Item is not a shield or missing properties");continue}console.log(" Found shield item! Activating..."),this.activateShield(t);return}console.log(" No shield items found in equipped slots")}heal(e){this.isDestroyed||(rt.heal(this.id,e),this.currentHP=rt.getCurrentHP(this.id),this.updateDamageState(),this.updateHPBar())}getHPPercentage(){return this.currentHP/this.maxHP}updateDamageState(){if(!this.sprite)return;const e=this.getHPPercentage();let t=this.damageStates[0];for(const n of this.damageStates)e<=n.hpThreshold&&(t=n);this.sprite.alpha=t.opacity,this.sprite.tint=t.tint,this.updateBloodOverlay(e),t.shake&&this.applyShake(),t.particles}flashDamage(){if(!this.sprite)return;const e=this.sprite.tint;this.sprite.tint=16737894,setTimeout(()=>{this.sprite&&(this.sprite.tint=e)},80)}applyShake(){if(!this.sprite)return;const e=3,t=200,n=this.sprite.x,r=this.sprite.y,s=Date.now(),l=()=>{Date.now()-s<t&&this.sprite?(this.sprite.x=n+(Math.random()-.5)*e,this.sprite.y=r+(Math.random()-.5)*e,requestAnimationFrame(l)):this.sprite&&(this.sprite.x=n,this.sprite.y=r)};l()}destroy(){if(this.isDestroyed=!0,this.sprite){const e=()=>{this.sprite&&this.sprite.alpha>0&&(this.sprite.alpha-=.02,requestAnimationFrame(e))};e()}console.log(` Castle ${this.id} destroyed!`)}cleanup(){this.sprite&&(this.sprite.destroy(),this.sprite=null),this.container&&this.container.destroy({children:!0})}getBounds(){return this.sprite?.getBounds()||null}setPosition(e,t){this.position={x:e,y:t},this.container.position.set(e,t)}equipItem(e,t){this.equippedItems[t]=e,this.updateItemSlotVisual(t,e),e.shieldHP!==void 0&&e.shieldActivationThreshold!==void 0&&console.log(` Shield item equipped: ${e.name} (activates at HP < ${e.shieldActivationThreshold})`),console.log(` Equipped ${e.name} to ${t}`)}unequipItem(e){const t=this.equippedItems[e];t&&(this.equippedItems[e]=null,this.updateItemSlotVisual(e,null),this.shieldState&&this.shieldState.sourceItem.id===t.id&&this.deactivateShield(),console.log(` Unequipped ${t.name} from ${e}`))}updateItemSlotVisual(e,t){const n=e==="slot1"?this.itemSlot1:this.itemSlot2;if(!n)return;const r=n.children.find(s=>s.label==="item-icon");if(r&&n.removeChild(r),t){const s=new Ft({text:t.icon,style:{fontSize:24,align:"center"}});s.anchor.set(.5),s.position.set(17.5,17.5),s.label="item-icon",n.addChild(s)}}activateShield(e){if(console.log(" activateShield called with item:",e),e.shieldHP===void 0||e.shieldActivationThreshold===void 0){console.log(" Item missing shield properties!");return}rt.activateShield(this.id,e.shieldHP,e.shieldActivationThreshold,e.id),this.shieldState={isActive:!0,currentHP:e.shieldHP,maxHP:e.shieldHP,sourceItem:e},console.log(" Shield state created:",this.shieldState),console.log(" Creating shield visual..."),this.createShieldVisual(),console.log(` Shield activated! ${this.shieldState.currentHP}/${this.shieldState.maxHP} HP`)}deactivateShield(){this.shieldState&&(console.log(" Shield deactivated!"),rt.deactivateShield(this.id),this.shieldState=null,this.shieldVisual&&(this.container.removeChild(this.shieldVisual),this.shieldVisual=null))}createShieldVisual(){if(console.log(` Creating shield visual (${this.shieldState?.currentHP}/${this.shieldState?.maxHP} HP)`),this.shieldVisual&&this.container.removeChild(this.shieldVisual),this.shieldVisual=new Qe,this.shieldVisual.visible=!0,this.shieldVisual.alpha=1,this.shieldVisual.position.set(0,41),this.shieldState&&this.sprite){const t=this.sprite.width*.8,n=10,r=this.shieldState.currentHP/this.shieldState.maxHP,s=new ce;s.rect(-t/2,0,t,n),s.fill({color:1981066,alpha:.8}),this.shieldVisual.addChild(s);const l=new ce;l.rect(-t/2,0,t*r,n),l.fill({color:3900150,alpha:1}),l.label="shield-fill",this.shieldVisual.addChild(l);const c=new ce;c.rect(-t/2,0,t,n),c.stroke({width:1,color:6333946,alpha:1}),this.shieldVisual.addChild(c);const h=new Ft({text:`${this.shieldState.currentHP}`,style:{fontSize:10,fontWeight:"bold",fill:6333946,align:"left"}});h.anchor.set(0,.5),h.position.set(t/2+3,n/2),h.label="shield-hp-text",this.shieldVisual.addChild(h),this.createBlueOrbShield()}this.container.addChild(this.shieldVisual),console.log(" Shield visual created and added to container"),this.animateShield()}createBlueOrbShield(){if(!this.sprite||!this.shieldVisual)return;const e=70,t=0,n=-60,r=new ce;r.circle(t,n,e+15),r.fill({color:3900150,alpha:.1}),r.circle(t,n,e+8),r.fill({color:6333946,alpha:.15}),r.circle(t,n,e),r.fill({color:9684477,alpha:.2}),r.circle(t,n,e-5),r.stroke({width:3,color:3900150,alpha:.6});const s=15;for(let l=-3;l<=3;l++)for(let c=-3;c<=3;c++){const h=t+c*s*1.5,d=l*s*Math.sqrt(3)+c%2*s*Math.sqrt(3)/2+n;Math.sqrt((h-t)*(h-t)+(d-n)*(d-n))<e-10&&this.drawHexagon(r,h,d,s*.4,6333946,.3)}r.label="blue-orb-shield",this.shieldVisual.addChild(r)}drawHexagon(e,t,n,r,s,l){const c=[];for(let h=0;h<6;h++){const d=Math.PI/3*h;c.push(t+r*Math.cos(d)),c.push(n+r*Math.sin(d))}e.poly(c),e.stroke({width:1,color:s,alpha:l})}animateShield(){if(!this.shieldVisual)return;const e=Date.now(),t=()=>{if(!this.shieldVisual||!this.shieldState?.isActive)return;const n=Date.now()-e,r=.9+Math.sin(n/300)*.1;this.shieldVisual.alpha=r,requestAnimationFrame(t)};t()}updateShieldVisual(){if(!this.shieldVisual||!this.sprite)return;const e=rt.getShield(this.id);if(!e||!e.isActive){console.warn(" updateShieldVisual called but no active shield in CastleHealthSystem");return}this.shieldState&&(this.shieldState.currentHP=e.currentHP,this.shieldState.maxHP=e.maxHP);const n=this.sprite.width*.8,r=10,s=e.currentHP/e.maxHP,l=this.shieldVisual.children.find(h=>h.label==="shield-fill");l&&(l.clear(),l.rect(-n/2,0,n*s,r),l.fill({color:3900150,alpha:1}));const c=this.shieldVisual.children.find(h=>h.label==="shield-hp-text");c&&(c.text=`${e.currentHP}`)}getEquippedItems(){return{...this.equippedItems}}getShieldState(){return this.shieldState?{...this.shieldState}:null}getCurrentHP(){return this.currentHP}getMaxHP(){return this.maxHP}addBloodSplatter(){if(!this.sprite)return;const e=new ce,t=(Math.random()-.5)*this.sprite.width*.5,n=(Math.random()-.5)*this.sprite.height*.5,r=2+Math.random()*4,s=9109504;e.circle(0,0,r),e.fill({color:s,alpha:.4});const l=2+Math.floor(Math.random()*3);for(let d=0;d<l;d++){const f=(Math.random()-.5)*r*2,m=(Math.random()-.5)*r*2,g=r*(.2+Math.random()*.3);e.circle(f,m,g),e.fill({color:s,alpha:.3})}e.position.set(t,n),e.label="blood-splatter",this.container.addChildAt(e,0),this.bloodSplatters.push(e),e.alpha=0;const c=Date.now(),h=()=>{const d=Date.now()-c,f=Math.min(d/150,1);e.alpha=f*.5,f<1&&requestAnimationFrame(h)};h()}updateBloodOverlay(e){if(!this.sprite||(this.bloodOverlay&&(this.container.removeChild(this.bloodOverlay),this.bloodOverlay=null),e>=1))return;this.bloodOverlay=new ce;const n=(1-e)*.5,r=11141120;this.bloodOverlay.rect(-this.sprite.width/2,-this.sprite.height/2,this.sprite.width,this.sprite.height),this.bloodOverlay.fill({color:r,alpha:n}),this.bloodOverlay.label="blood-overlay",this.container.addChild(this.bloodOverlay),console.log(` Blood overlay updated: ${(n*100).toFixed(0)}% intensity (HP: ${(e*100).toFixed(0)}%)`)}}class qE{constructor(){this.logs=[],this.maxLogs=500,this.enabled=!1}enable(){this.enabled=!0,console.log(" [DebugLogger] Enabled - capturing logs...")}disable(){this.enabled=!1,console.log(" [DebugLogger] Disabled")}clear(){this.logs=[],console.log(" [DebugLogger] Logs cleared")}log(e,t,n){if(!this.enabled)return;const r={timestamp:Date.now(),type:e,message:t,data:n};this.logs.push(r),this.logs.length>this.maxLogs&&this.logs.shift()}getReport(e){const t=[];t.push("=".repeat(80)),t.push("BATTLE BETS DEBUG REPORT"),t.push("=".repeat(80)),t.push(`Generated: ${new Date().toISOString()}`),t.push(`Total Logs: ${this.logs.length}`),e&&t.push(`Battle ID: ${e}`),t.push("=".repeat(80)),t.push("");const n=this.logs.reduce((r,s)=>(r[s.type]||(r[s.type]=[]),r[s.type].push(s),r),{});for(const[r,s]of Object.entries(n))t.push(`
${"=".repeat(80)}`),t.push(`${r.toUpperCase()} (${s.length} logs)`),t.push("=".repeat(80)),s.forEach(l=>{const c=new Date(l.timestamp).toISOString().split("T")[1];t.push(`[${c}] ${l.message}`),l.data&&t.push(`  Data: ${JSON.stringify(l.data,null,2)}`)});return t.push(`
`+"=".repeat(80)),t.push("END OF REPORT"),t.push("=".repeat(80)),t.join(`
`)}getLogsJSON(){return JSON.stringify(this.logs,null,2)}}const Rt=new qE;class YE{constructor(){this.battles=new Map,this.containers=new Map}setContainer(e,t){this.containers.set(t,e)}async addCastle(e,t){const n=this.containers.get(e);if(!n)return console.error(` CastleManager: Container not set for battle ${e}`),null;let r=this.battles.get(e);if(r||(r={},this.battles.set(e,r)),r[t.id])return console.warn(` Castle ${t.id} already exists in battle ${e}`),r[t.id];const s=new VE({id:t.id,capperId:t.capperId,capperName:t.capperName||"Unknown",capperRank:t.capperRank,capperLevel:t.capperLevel,position:t.position||{x:0,y:0},maxHP:t.maxHP,currentHP:t.currentHP,scale:t.scale,boxWidth:t.boxWidth,side:t.side});return await s.load(),n.addChild(s.container),r[t.id]=s,console.log(` Castle ${t.id} added to scene for battle ${e}`),s}getCastle(e,t){const n=this.battles.get(e);return n?n[t]:void 0}damageCastle(e,t,n){const r=`Called with battleId=${e}, castleId=${t}, damage=${n}`;console.log(` [CastleManager.damageCastle] ${r}`),Rt.log("castle-manager",`damageCastle: ${r}`);const s=this.getCastle(e,t);if(s){const l=`Castle found! Calling takeDamage(${n})`;console.log(` [CastleManager.damageCastle] ${l}`),Rt.log("castle-manager",l,{battleId:e,castleId:t,damage:n,castleHP:s.currentHP}),s.takeDamage(n)}else{const l=`Castle NOT FOUND for battleId=${e}, castleId=${t}`;console.error(` [CastleManager.damageCastle] ${l}`),Rt.log("castle-manager",`ERROR: ${l}`);const c=Array.from(this.battles.keys());console.error("   Available battles:",c),Rt.log("castle-manager",`Available battles: ${JSON.stringify(c)}`);const h=this.battles.get(e);if(h){const d=Object.keys(h);console.error(`   Available castles in battle ${e}:`,d),Rt.log("castle-manager",`Available castles in battle ${e}: ${JSON.stringify(d)}`)}}}healCastle(e,t,n){const r=this.getCastle(e,t);r&&r.heal(n)}removeCastle(e,t){const n=this.battles.get(e);if(!n)return;const r=n[t];r&&(r.cleanup(),delete n[t],console.log(` Castle ${t} removed from battle ${e}`))}clearBattle(e){const t=this.battles.get(e);t&&(Object.values(t).forEach(r=>r.cleanup()),this.battles.delete(e));const n=this.containers.get(e);n&&(n.children.filter(r=>r.name==="castle").forEach(r=>n.removeChild(r)),this.containers.delete(e)),console.log(` All castles cleared for battle ${e}`)}clear(){this.battles.forEach((e,t)=>{Object.values(e).forEach(n=>n.cleanup()),console.log(` Cleared castles for battle ${t}`)}),this.battles.clear(),this.containers.clear(),console.log(" All castles cleared")}getAllCastles(e){const t=this.battles.get(e);return t?Object.values(t):[]}}const qt=new YE;class XE{constructor(){this.cellCache=new Map,this.stats=["pts","reb","ast","stl","3pt"],this.layout=this.calculateLayout(),this.initializeCellCache()}calculateLayout(){const e=On,t=200,n=e.statLabelWidth*2+e.weaponSlotWidth*2+e.defenseCellsPerSide*e.cellWidth*2+e.attackCellsPerSide*e.cellWidth*2+e.battlefieldWidth,s=n+240,c=(s-n)/2,h=c+e.statLabelWidth,d=h+e.weaponSlotWidth,f=d+e.defenseCellsPerSide*e.cellWidth,m=f+e.attackCellsPerSide*e.cellWidth,g=m+e.battlefieldWidth,y=g,v=y+e.attackCellsPerSide*e.cellWidth,x=v+e.defenseCellsPerSide*e.cellWidth,S=x+e.weaponSlotWidth,C=0,b=s-t;return{leftCastleBoxStart:C,leftStatLabelStart:c,leftWeaponSlotStart:h,leftDefenseStart:d,leftAttackStart:f,battlefieldStart:m,battlefieldEnd:g,rightAttackStart:y,rightDefenseStart:v,rightWeaponSlotStart:x,rightStatLabelStart:S,rightCastleBoxStart:b,castleBoxWidth:t,cellWidth:e.cellWidth,cellHeight:e.cellHeight,statLabelWidth:e.statLabelWidth,weaponSlotWidth:e.weaponSlotWidth,battlefieldWidth:e.battlefieldWidth,defenseCells:e.defenseCellsPerSide,attackCells:e.attackCellsPerSide}}initializeCellCache(){for(let e=0;e<5;e++){const t=this.stats[e];this.createWeaponSlotCell(e,t,"left");for(let n=0;n<this.layout.defenseCells;n++)this.createDefenseCell(e,n,t,"left");for(let n=0;n<this.layout.attackCells;n++)this.createAttackCell(e,n,t,"left");for(let n=0;n<this.layout.attackCells;n++)this.createAttackCell(e,n,t,"right");for(let n=0;n<this.layout.defenseCells;n++)this.createDefenseCell(e,n,t,"right");this.createWeaponSlotCell(e,t,"right")}console.log(` GridManager initialized with ${this.cellCache.size} cells`)}createWeaponSlotCell(e,t,n){const r=e*this.layout.cellHeight,s=n==="left"?this.layout.leftWeaponSlotStart:this.layout.rightWeaponSlotStart,l={id:`weapon-${t}-${n}`,type:"weapon-slot",zone:n==="left"?"left-weapon-slot":"right-weapon-slot",coordinate:{row:e,column:0,zone:n==="left"?"left-weapon-slot":"right-weapon-slot"},position:{x:s+this.layout.weaponSlotWidth/2,y:r+this.layout.cellHeight/2},bounds:{x:s,y:r,width:this.layout.weaponSlotWidth,height:this.layout.cellHeight},stat:t,side:n};this.cellCache.set(l.id,l)}createDefenseCell(e,t,n,r){const s=e*this.layout.cellHeight;let l;if(r==="left")l=this.layout.leftDefenseStart+t*this.layout.cellWidth;else{const h=this.layout.defenseCells-1-t;l=this.layout.rightDefenseStart+h*this.layout.cellWidth}const c={id:`defense-${n}-${r}-${t}`,type:"defense",zone:r==="left"?"left-defense":"right-defense",coordinate:{row:e,column:t,zone:r==="left"?"left-defense":"right-defense"},position:{x:l+this.layout.cellWidth/2,y:s+this.layout.cellHeight/2},bounds:{x:l,y:s,width:this.layout.cellWidth,height:this.layout.cellHeight},stat:n,side:r,index:t};this.cellCache.set(c.id,c)}createAttackCell(e,t,n,r){const s=e*this.layout.cellHeight,l=r==="left"?this.layout.leftAttackStart+t*this.layout.cellWidth:this.layout.rightAttackStart+t*this.layout.cellWidth,c={id:`attack-${n}-${r}-${t}`,type:"attack",zone:r==="left"?"left-attack":"right-attack",coordinate:{row:e,column:t,zone:r==="left"?"left-attack":"right-attack"},position:{x:l+this.layout.cellWidth/2,y:s+this.layout.cellHeight/2},bounds:{x:l,y:s,width:this.layout.cellWidth,height:this.layout.cellHeight},stat:n,side:r,index:t};this.cellCache.set(c.id,c)}getCell(e){return this.cellCache.get(e)}getWeaponSlotPosition(e,t){const n=`weapon-${e}-${t}`,r=this.cellCache.get(n);return r?r.position:(console.error(` Weapon slot cell not found: ${n}`),{x:0,y:0})}getDefenseCellPosition(e,t,n){const r=`defense-${e}-${t}-${n}`,s=this.cellCache.get(r);return s?s.position:(console.error(` Defense cell not found: ${r}`),{x:0,y:0})}getBattlefieldCenter(){return{x:this.layout.battlefieldStart+this.layout.battlefieldWidth/2,y:5*this.layout.cellHeight/2}}getCastleBoxPosition(e){const t=this.layout.leftStatLabelStart,r=this.layout.rightStatLabelStart+this.layout.statLabelWidth+t,s=20,l=e==="left"?t/2+s:r-t/2-s,c=5*this.layout.cellHeight/2;return{x:l,y:c}}getDefenseCells(e,t){const n=[];for(let r=0;r<this.layout.defenseCells;r++){const s=`defense-${e}-${t}-${r}`,l=this.cellCache.get(s);l&&n.push(l)}return n}getDefenseCellAtPosition(e,t,n,r){console.log(` [GRID SEARCH] Looking for cell at X=${e.toFixed(1)} Y=${t.toFixed(1)} stat=${n} side=${r}`);for(let s=0;s<this.layout.defenseCells;s++){const l=`defense-${n}-${r}-${s}`,c=this.cellCache.get(l);if(!c){console.log(`   Cell ${l} not found in cache!`);continue}if(console.log(`   Checking ${l}: X[${c.bounds.x.toFixed(1)}-${(c.bounds.x+c.bounds.width).toFixed(1)}] Y[${c.bounds.y}-${c.bounds.y+c.bounds.height}]`),e>=c.bounds.x&&e<=c.bounds.x+c.bounds.width&&t>=c.bounds.y&&t<=c.bounds.y+c.bounds.height)return console.log(`   [GRID SEARCH] FOUND! Position is in cell ${l}`),c}return console.log(`   [GRID SEARCH] NOT FOUND! No cell contains X=${e.toFixed(1)} Y=${t.toFixed(1)}`),null}getLayout(){return{...this.layout}}getCellWidth(){return this.layout.cellWidth}getCellHeight(){return this.layout.cellHeight}debugLogCells(){console.log(" Grid Manager - All Cells:"),this.cellCache.forEach((e,t)=>{console.log(`  ${t}:`,e.position)})}}const it=new XE,Ur=On;function j1(i,e,t){const n=t-1;return it.getDefenseCellPosition(i,e,n)}function _f(){return Ur.statLabelWidth*2+Ur.weaponSlotWidth*2+Ur.defenseCellsPerSide*Ur.cellWidth*2+Ur.attackCellsPerSide*Ur.cellWidth*2+Ur.battlefieldWidth+240}function xf(){return 5*Ur.cellHeight}class QE{constructor(){this.subscriptions=new Map,this.nextId=0}on(e,t,n){const r=`sub_${this.nextId++}`;return this.subscriptions.set(r,{id:r,eventType:e,listener:t,gameId:n}),console.log(` [EventEmitter] Subscribed to ${e}${n?` (game: ${n})`:""}`),r}off(e){const t=this.subscriptions.get(e);t&&(this.subscriptions.delete(e),console.log(` [EventEmitter] Unsubscribed from ${t.eventType}`))}async emit(e){const{type:t,payload:n}=e,r=n.gameId;console.log(` [EventEmitter] Emitting ${t}${r?` (game: ${r})`:""}`);const s=Array.from(this.subscriptions.values()).filter(l=>!(l.eventType!==t||l.gameId&&l.gameId!==r));console.log(` [EventEmitter] Found ${s.length} listeners for ${t}`),await Promise.all(s.map(async l=>{try{await l.listener(n)}catch(c){console.error(` [EventEmitter] Error in listener for ${t}:`,c)}}))}clear(){const e=this.subscriptions.size;this.subscriptions.clear(),console.log(` [EventEmitter] Cleared ${e} subscriptions`)}clearGame(e){const t=[];this.subscriptions.forEach((n,r)=>{n.gameId===e&&t.push(r)}),t.forEach(n=>this.subscriptions.delete(n)),console.log(` [EventEmitter] Cleared ${t.length} subscriptions for game ${e}`)}getSubscriptionCount(){return this.subscriptions.size}getSubscriptionsByType(e){return Array.from(this.subscriptions.values()).filter(t=>t.eventType===e)}}const ta=new QE;class KE{constructor(){this.items=new Map,this.effectRegistrations=new Map}registerEffect(e,t){this.effectRegistrations.set(e,t),console.log(` [ItemEffectRegistry] Registered effect for ${e}`)}async activateItem(e,t,n){console.log(" [ItemEffectRegistry] activateItem called:",{gameId:e,side:t,itemId:n.itemId,rolls:n.rolls});const r=`${e}_${t}_${n.itemId}_${Date.now()}`,s={instanceId:r,gameId:e,side:t,itemId:n.itemId,rolls:n.rolls,qualityTier:n.qualityTier,counters:new Map,subscriptionIds:[]};this.items.set(r,s),console.log(" [ItemEffectRegistry] Item stored in registry:",r);const l=this.effectRegistrations.get(n.itemId);if(console.log(` [ItemEffectRegistry] Effect function lookup for ${n.itemId}:`,l?"FOUND":"NOT FOUND"),!l)return console.warn(` [ItemEffectRegistry] No effect registered for ${n.itemId}`),r;const c={itemInstanceId:r,gameId:e,side:t,rolls:n.rolls,qualityTier:n.qualityTier};return console.log(` [ItemEffectRegistry] Calling effect function for ${n.itemId}...`),await l(c),console.log(` [ItemEffectRegistry] Activated ${n.itemId} (${r})`),r}deactivateItem(e){const t=this.items.get(e);if(!t){console.warn(` [ItemEffectRegistry] Item not found: ${e}`);return}t.subscriptionIds.forEach(n=>{ta.off(n)}),this.items.delete(e),console.log(` [ItemEffectRegistry] Deactivated ${t.itemId} (${e})`)}deactivateGame(e){const t=[];this.items.forEach((n,r)=>{n.gameId===e&&t.push(r)}),t.forEach(n=>this.deactivateItem(n)),console.log(` [ItemEffectRegistry] Deactivated ${t.length} items for game ${e}`)}getCounter(e,t){return this.items.get(e)?.counters.get(t)??0}setCounter(e,t,n){const r=this.items.get(e);r&&r.counters.set(t,n)}incrementCounter(e,t,n=1){const s=this.getCounter(e,t)+n;return this.setCounter(e,t,s),s}resetCounter(e,t){this.setCounter(e,t,0)}getActiveItems(){return Array.from(this.items.values())}}const Ce=new KE;function ZE(i){const{min:e,max:t,step:n}=i,r=e+Math.random()*(t-e);return n?Math.round(r/n)*n:Math.round(r*10)/10}function JE(i,e){const t=Object.keys(i);if(t.length===0)return 50;let n=0;for(const r of t){const s=i[r],l=e[r];if(!l)continue;const c=(s-l.min)/(l.max-l.min)*100;n+=c}return n/t.length}function eA(i){return i>=85?"Masterwork":i>=60?"Honed":i>=25?"Balanced":"Warped"}function G1(i){const e={};for(const[r,s]of Object.entries(i.rollRanges))e[r]=ZE(s);const t=JE(e,i.rollRanges),n=eA(t);return console.log(` [ItemRollSystem] Rolled ${i.name}:`,{rolls:e,qualityScore:t.toFixed(1),qualityTier:n}),{itemId:i.id,rolls:e,qualityTier:n,qualityScore:t}}class tA{constructor(){this.listeners=new Map,this.battleListeners=new Map}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}onBattle(e,t,n){this.battleListeners.has(e)||this.battleListeners.set(e,new Map);const r=this.battleListeners.get(e);r.has(t)||r.set(t,new Set),r.get(t).add(n)}off(e,t){const n=this.listeners.get(e);n&&n.delete(t)}offBattle(e,t,n){const r=this.battleListeners.get(e);if(r){const s=r.get(t);s&&s.delete(n)}}emit(e,t){const n=this.listeners.get(e);n&&n.forEach(l=>{try{l(t)}catch(c){console.error(`[EventBus] Error in global handler for ${e}:`,c)}});const r=t.battleId,s=this.battleListeners.get(r);if(s){const l=s.get(e);l&&l.forEach(c=>{try{c(t)}catch(h){console.error(`[EventBus] Error in battle handler for ${e} (battle ${r}):`,h)}})}}clearBattle(e){this.battleListeners.delete(e),console.log(`[EventBus] Cleared all listeners for battle ${e}`)}clearAll(){this.listeners.clear(),this.battleListeners.clear(),console.log("[EventBus] Cleared all listeners")}getListenerCount(e){if(e){const t=this.listeners.get(e)?.size||0;let n=0;return this.battleListeners.forEach(r=>{n+=r.get(e)?.size||0}),t+n}else{let t=0;return this.listeners.forEach(n=>t+=n.size),this.battleListeners.forEach(n=>{n.forEach(r=>t+=r.size)}),t}}}const Ze=new tA;class vs{constructor(){this.app=null,this.container=null,this.apps=new Map,this.containers=new Map}static getInstance(){return vs.instance||(vs.instance=new vs),vs.instance}setApp(e,t){t&&this.apps.set(t,e),this.app=e,console.log(` PixiManager: App reference set${t?` for battle ${t}`:""}`)}getApp(e){if(e){const t=this.apps.get(e)||null;if(t)return t}return this.app}setContainer(e,t){t&&this.containers.set(t,e),this.container=e,console.log(` PixiManager: Container reference set${t?` for battle ${t}`:""}`)}getContainer(e){return e?this.containers.get(e)||null:this.container}addSprite(e,t,n){const r=this.getContainer(n);if(!r){console.error(" PixiManager: No container set! Cannot add sprite.");return}t&&(e.name=t),r.addChild(e),console.log(` PixiManager: Added sprite ${t||e.name||"unnamed"} to container${n?` for battle ${n}`:""}`)}removeSprite(e,t){const n=this.getContainer(t);if(!n){console.error(" PixiManager: No container set! Cannot remove sprite.");return}n.removeChild(e)}clearBattle(e){const t=this.containers.get(e)||null,n=this.apps.get(e)||null;t&&(this.containers.delete(e),this.container===t&&(this.container=null)),n&&(this.apps.delete(e),this.app===n&&(this.app=null)),console.log(` PixiManager: Cleared references for battle ${e}`)}reset(){this.apps.clear(),this.containers.clear(),this.app=null,this.container=null,console.log(" PixiManager: Reset all apps and containers")}}const Pt=vs.getInstance(),nA=Object.freeze(Object.defineProperty({__proto__:null,pixiManager:Pt},Symbol.toStringTag,{value:"Module"}));function U1(i,e,t,n){console.log(` [ShieldHeal] Creating heal animation: ${e}  ${t} (+${n} HP)`);const s=xe.getState().getBattle(i)?.defenseDots.get(e);if(!s){console.warn(` [ShieldHeal] Defense orb ${e} not found in store`);return}const l=qt.getCastle(i,t);if(!l){console.warn(` [ShieldHeal] Castle ${t} not found`);return}const c=s.sprite.x,h=s.sprite.y,d=l.container.x,f=l.container.y-50;console.log(` [ShieldHeal] Defense orb side: ${s.side}, Castle ID: ${t}`),console.log(` [ShieldHeal] Battle ID: ${i}`),console.log(` [ShieldHeal] Orb local pos: (${c}, ${h})`),console.log(` [ShieldHeal] Castle container pos: (${d}, ${f})`),console.log(` [ShieldHeal] Animation path: (${c}, ${h})  (${d}, ${f})`);const m=new ce,g=2792847,y=6147261;m.circle(0,0,18),m.fill({color:g,alpha:.5}),m.circle(0,0,12),m.fill({color:y,alpha:.7}),m.circle(0,0,6),m.fill({color:16777215,alpha:.9}),m.position.set(c,h),m.zIndex=1e4,Pt.addSprite(m,"shield-heal-orb",i),ve.timeline().to(m.position,{x:d,y:f,duration:1,ease:"power1.inOut",onUpdate:function(){const v=this.progress(),x=40;m.position.y=h+(f-h)*v-Math.sin(v*Math.PI)*x}}).to(m.scale,{x:1.3,y:1.3,duration:.4,yoyo:!0,repeat:1,ease:"sine.inOut"},0).to(m.scale,{x:2,y:2,duration:.15,ease:"power2.out"}).to(m,{alpha:0,duration:.15,ease:"power2.in",onComplete:()=>{Pt.removeSprite(m,i),m.destroy(),l.updateShieldVisual(),rA(i,d,f,n),console.log(" [ShieldHeal] Animation complete")}},"-=0.1")}function rA(i,e,t,n){const r=new Ft({text:`+${n} HP `,style:{fontFamily:"Arial Black, Arial",fontSize:18,fontWeight:"900",fill:65280,stroke:{color:0,width:3},dropShadow:{color:65280,blur:4,alpha:.8,distance:0}}});r.anchor.set(.5),r.position.set(e,t-40),r.zIndex=10001,Pt.addSprite(r,"shield-heal-text",i),ve.timeline().to(r.position,{y:t-30,duration:1.5,ease:"power2.out"}).to(r,{alpha:0,duration:.5,ease:"power2.in",onComplete:()=>{Pt.removeSprite(r,i),r.destroy()}},"-=0.5")}const js={id:"LAL_def_ironman_armor",team:"LAL",teamName:"Los Angeles Lakers",slot:"defense",name:'AC "Ironman" Armor',description:"Castle shield that starts with 5 to 15 HP and gains +1 to 3 HP every time a defense orb is destroyed, then is gone for the matchup once it breaks.",icon:"",rollRanges:{startShieldHp:{min:5,max:15,step:1},hpPerDestroyedOrb:{min:1,max:3,step:1}}};function iA(i){const{itemInstanceId:e,gameId:t,side:n,rolls:r}=i,{startShieldHp:s,hpPerDestroyedOrb:l}=r;console.log(` [IronmanArmor] REGISTERING EFFECT for ${n} side in game ${t}`),console.log(` [IronmanArmor] Start HP: ${s}, +${l} per orb destroyed`),Ze.on("BATTLE_START",c=>{if(c.gameId!==t||c.side!==n)return;console.log(` [IronmanArmor] Creating shield for ${n} with ${s} HP`);const h=`${t}-${n}`;rt.activateShield(h,s,0,"LAL_def_ironman_armor");const d=qt.getCastle(t,h);d&&d.activateShield({id:"LAL_def_ironman_armor",name:'AC "Ironman" Armor',description:"Castle shield",icon:"",shieldHP:s,shieldActivationThreshold:0}),console.log(` [IronmanArmor] Shield created with ${s} HP!`),Ce.setCounter(e,"shieldId",1),Ce.setCounter(e,"shieldActive",1)}),Ze.on("DEFENSE_ORB_DESTROYED",c=>{if(console.log(" [IronmanArmor] DEFENSE_ORB_DESTROYED event received!",c),c.gameId!==t){console.log(` [IronmanArmor] Wrong gameId: ${c.gameId} !== ${t}`);return}if(c.side!==n){console.log(` [IronmanArmor] Wrong side: ${c.side} !== ${n}`);return}const h=`${t}-${n}`,d=rt.getShield(h);if(!d||!d.isActive){console.log(" [IronmanArmor] Shield not active (broken or doesn't exist), ignoring orb destruction");return}console.log(` [IronmanArmor] SHIELD SHOULD HEAL NOW! Defense orb destroyed on ${n} ${c.lane}, adding +${l} HP to shield (current: ${d.currentHP}/${d.maxHP})`);const f=d.currentHP<d.maxHP;rt.healShield(h,l,!1);const m=qt.getCastle(t,h);m&&f&&(m.updateShieldVisual(),U1(t,c.orbId,h,l));const g=Ce.incrementCounter(e,"totalHpGained",l);console.log(` [IronmanArmor] Shield healed by +${l} HP! Total HP gained: ${g}`)}),Ze.on("SHIELD_BROKEN",c=>{c.gameId===t&&c.side===n&&(console.log(` [IronmanArmor] Shield broken on ${n}!`),Ce.setCounter(e,"shieldActive",0))}),console.log(` [IronmanArmor] Effect registered for ${n} (${e})`)}Ce.registerEffect(js.id,iA);console.log(` [IronmanArmor] Item effect registered: ${js.id}`);class sA{constructor(){this.collisionEvents=[],this.maxEvents=10}logCollisionCheck(e,t,n,r){this.collisionEvents.push({time:new Date().toLocaleTimeString(),type:r?"HIT":n?"MISS":"CHECK",projectileId:`${e.stat}-${e.id.split("-").slice(-2).join("-")}`,cellId:t,orbFound:n,posX:Math.round(e.position.x)}),this.collisionEvents.length>this.maxEvents&&this.collisionEvents.shift()}generateSnapshot(e,t,n){const r=[],s=e||"unknown",l=s.includes("-")?s.split("-")[0]:s;r.push(" COLLISION DEBUG SNAPSHOT"),r.push(`Game: ${l} | ${new Date().toLocaleTimeString()}`),r.push(""),r.push(" DEFENSE ORBS:");const c=["pts","reb","ast","stl","3pt"],h=["left","right"],d=[];h.forEach(y=>{const v=y==="left"?"L":"R",x=[];c.forEach(S=>{const C=[];for(let b=0;b<10;b++){const P=`defense-${S}-${y}-${b}`,E=Array.from(n.values()).find(A=>A.cellId===P);E&&E.alive&&(C.push(`${b}:${E.hp}`),d.length<3&&d.push(`grid[${P}]orb[${E.cellId}]`))}C.length>0&&x.push(`${S}[${C.join(",")}]`)}),x.length>0&&r.push(`  ${v}: ${x.join(" | ")}`)}),d.length>0&&r.push(`  Sample IDs: ${d.join(" | ")}`),r.push("");const f=Array.from(t.values()).filter(y=>y.side==="left"&&!y.collided),m=Array.from(t.values()).filter(y=>y.side==="right"&&!y.collided);r.push(` PROJECTILES: LR:${f.length} | RL:${m.length}`),[...f.slice(0,3),...m.slice(0,3)].forEach(y=>{const v=y.side==="left"?"right":"left",x=it.getDefenseCellAtPosition(y.position.x,y.position.y,y.stat,v),S=y.id.split("-").slice(-2).join("-");r.push(`  ${S}: X=${Math.round(y.position.x)} Y=${Math.round(y.position.y)} ${y.stat} ${x?`in[${x.id.split("-").slice(-2).join("-")}]`:"no-cell"}`)}),r.push(""),r.push(" SAMPLE CELLS:");const g=["pts","reb"];try{g.forEach(y=>{const v=it.getDefenseCells(y,"left"),x=it.getDefenseCells(y,"right"),S=v.length>0?v[0]:null,C=x.length>0?x[0]:null;S&&r.push(`  ${y}-L-0: X[${Math.round(S.bounds.x)}-${Math.round(S.bounds.x+S.bounds.width)}] Y[${Math.round(S.bounds.y)}-${Math.round(S.bounds.y+S.bounds.height)}]`),C&&r.push(`  ${y}-R-0: X[${Math.round(C.bounds.x)}-${Math.round(C.bounds.x+C.bounds.width)}] Y[${Math.round(C.bounds.y)}-${Math.round(C.bounds.y+C.bounds.height)}]`)})}catch(y){r.push(`   Error getting cells: ${y}`)}return r.push(""),r.push(" EVENTS:"),this.collisionEvents.slice(-5).forEach(y=>{const v=y.cellId?y.cellId.split("-").slice(-2).join("-"):"null",x=y.type==="HIT"?"":y.type==="MISS"?"":"";r.push(`  ${x} ${y.projectileId} X=${y.posX} cell=${v} orb=${y.orbFound}`)}),r.join(`
`)}clear(){this.collisionEvents=[]}}const Vy=new sA;class oA{constructor(){this.activeProjectiles=new Map,this.battleDefenseHitHandlers=new Map,this.battleDefenseDotSources=new Map}registerBattle(e,t,n){this.battleDefenseDotSources.set(e,t),this.battleDefenseHitHandlers.set(e,n)}unregisterBattle(e){this.battleDefenseDotSources.delete(e),this.battleDefenseHitHandlers.delete(e)}registerProjectile(e){this.activeProjectiles.set(e.id,e),e.onCollisionCheck=t=>this.checkCollisions(t)}unregisterProjectile(e){this.activeProjectiles.delete(e)}getDebugSnapshot(e){const t=this.battleDefenseDotSources.get(e)??this.getDefenseDotsFromStore,n=t?t():new Map;return Vy.generateSnapshot(e,this.activeProjectiles,n)}checkCollisions(e){if(e.typeConfig.canCollideWithProjectiles){const v=e.side==="left"?"right":"left";for(const[x,S]of this.activeProjectiles){if(x===e.id||S.collided||S.stat!==e.stat||S.side!==v)continue;let C=!1;e.side==="left"?C=e.position.x>=S.position.x:C=e.position.x<=S.position.x;const b=Math.abs(e.position.x-S.position.x),P=e.typeConfig.collisionRadius+S.typeConfig.collisionRadius,E=b<=P;if(C||E)return S.collided=!0,S.collidedWith="projectile",S.terminateFromCollision(),console.log(` [PROJECTILE COLLISION] ${e.id} (X=${e.position.x.toFixed(1)})  ${S.id} (X=${S.position.x.toFixed(1)})`),Ze.emit("PROJECTILE_COLLISION",{side:e.side,opponentSide:S.side,quarter:1,battleId:e.gameId,gameId:e.gameId,projectileId:e.id,otherProjectileId:S.id,lane:e.stat}),Ze.emit("PROJECTILE_COLLISION",{side:S.side,opponentSide:e.side,quarter:1,battleId:S.gameId,gameId:S.gameId,projectileId:S.id,otherProjectileId:e.id,lane:S.stat}),"projectile"}}const t=e.side==="left"?"right":"left",n=it.getLayout(),r=n.leftDefenseStart,s=r+n.defenseCells*n.cellWidth,l=n.rightDefenseStart,c=l+n.defenseCells*n.cellWidth;let h=!1;if(e.side==="left"?h=e.position.x>=l&&e.position.x<=c:h=e.position.x>=r&&e.position.x<=s,!h)return null;const d=this.calculateDefenseCellIndex(e.position.x,t);if(d===null)return console.warn(` Projectile ${e.id} in defense zone but no cell index found at X=${e.position.x.toFixed(1)}`),null;const f=`${e.gameId}-defense-${e.stat}-${t}-${d}`,m=this.battleDefenseDotSources.get(e.gameId)??this.getDefenseDotsFromStore;if(!m)return console.warn(` getDefenseDotsFromStore callback not set for gameId=${e.gameId}!`),null;const g=m();if(g.size===0)return console.warn(` [COLLISION] Empty defense dots map for gameId=${e.gameId}! Did registration expire?`),null;const y=g.get(f);if(y&&y.alive){console.log(` [COLLISION!] Projectile ${e.id} hit defense orb ${y.id} at cell index ${d}`),Vy.logCollisionCheck(e,y.cellId,!0,!0);const v=y.hp,x=this.battleDefenseHitHandlers.get(e.gameId)??this.onDefenseDotHit;x?x(y.id,e.typeConfig.damage):console.error(` [COLLISION] onDefenseDotHit callback NOT SET for gameId=${e.gameId}!`);const S=y.hp,C=S===0?" DESTROYED":`${S}/${y.maxHp} HP remaining`;if(console.log(` [DEFENSE HIT] ${e.id}  ${y.id} | ${v}  ${S} HP | ${C}`),S===0){const b=y.side,P=b==="left"?"right":"left",E={side:b,opponentSide:P,quarter:1,battleId:e.gameId,gameId:e.gameId,lane:e.stat,orbId:y.id,destroyedByProjectileId:e.id};console.log(` [CollisionManager] EMITTING DEFENSE_ORB_DESTROYED for ${b} side:`,E),Ze.emit("DEFENSE_ORB_DESTROYED",E),Ze.emit("OPPONENT_ORB_DESTROYED",{side:P,opponentSide:b,quarter:1,battleId:e.gameId,gameId:e.gameId,lane:e.stat,orbId:y.id,destroyedByProjectileId:e.id})}return"defense"}return null}calculateDefenseCellIndex(e,t){const n=it.getLayout(),r=n.cellWidth;if(t==="left"){const s=n.leftDefenseStart+n.defenseCells*r;if(e<n.leftDefenseStart||e>=s)return null;const l=Math.floor((e-n.leftDefenseStart)/r);return Math.min(l,n.defenseCells-1)}else{const s=n.rightDefenseStart+n.defenseCells*r;if(e<n.rightDefenseStart||e>=s)return null;const l=e-n.rightDefenseStart,c=Math.floor(l/r),h=n.defenseCells-1-c;return Math.max(0,Math.min(h,n.defenseCells-1))}}clear(){this.activeProjectiles.clear(),this.battleDefenseDotSources.clear(),this.battleDefenseHitHandlers.clear()}getDebugInfo(){let e=0;if(this.getDefenseDotsFromStore)e=this.getDefenseDotsFromStore().size;else for(const t of this.battleDefenseDotSources.values())e+=t().size;return{projectileCount:this.activeProjectiles.size,defenseDotCount:e}}}const Zt=new oA,V1={pts:{id:"rapid-bullets",name:"Rapid Fire Bullets",stat:"pts",shape:"bullet",size:{width:12,height:5},color:16739125,glowColor:16747610,trailColor:16755319,baseSpeed:3,damage:1,behavior:"straight",collisionRadius:15,rapidFire:!1,rapidFireCount:1,canCollideWithProjectiles:!0},reb:{id:"heavy-bullets",name:"Heavy Bullets",stat:"reb",shape:"bullet",size:{width:14,height:6},color:5164484,glowColor:7265749,trailColor:9367013,baseSpeed:3,damage:1,behavior:"straight",collisionRadius:18,rapidFire:!1,rapidFireCount:1,canCollideWithProjectiles:!0},ast:{id:"precision-bullets",name:"Precision Bullets",stat:"ast",shape:"bullet",size:{width:10,height:4},color:16234289,glowColor:16369487,trailColor:16504685,baseSpeed:3,damage:1,behavior:"straight",collisionRadius:12,rapidFire:!1,rapidFireCount:1,canCollideWithProjectiles:!0},stl:{id:"stl-bullets",name:"Steal Bullets",stat:"stl",shape:"bullet",size:{width:12,height:5},color:16726072,glowColor:16734296,trailColor:16742520,baseSpeed:3,damage:1,behavior:"straight",collisionRadius:15,rapidFire:!1,rapidFireCount:1,canCollideWithProjectiles:!0},"3pt":{id:"3pt-bullets",name:"3-Point Bullets",stat:"3pt",shape:"bullet",size:{width:12,height:5},color:54015,glowColor:3399935,trailColor:6745855,baseSpeed:3,damage:1,behavior:"straight",collisionRadius:15,rapidFire:!1,rapidFireCount:1,canCollideWithProjectiles:!0}};function Rc(i){return V1[i]}class aA{constructor(e){this.active=!0,this.collided=!1,this.collidedWith=null,this.speedMultiplier=1,this.radius=4,this.animation=null,this.animationResolver=null,this.id=e.id,this.gameId=e.gameId,this.stat=e.stat,this.side=e.side,this.position={...e.startPosition},this.targetPosition=e.targetPosition,this.typeConfig=e.typeConfig,this.baseSpeed=e.typeConfig.baseSpeed,this.sprite=this.createSprite()}reset(e){this.id=e.id,this.gameId=e.gameId,this.stat=e.stat,this.side=e.side,this.position={...e.startPosition},this.targetPosition=e.targetPosition,this.typeConfig=e.typeConfig,this.baseSpeed=e.typeConfig.baseSpeed,this.active=!0,this.collided=!1,this.collidedWith=null,this.speedMultiplier=1,this.onCollisionCheck=void 0,this.sprite.x=e.startPosition.x,this.sprite.y=e.startPosition.y,this.sprite.alpha=1,this.sprite.visible=!0,this.sprite.scale.set(1,1),this.setRotation(),this.animation&&(this.animation.kill(),this.animation=null),ve.killTweensOf(this.sprite),ve.killTweensOf(this.sprite.scale)}cleanup(){this.animation&&(this.animation.kill(),this.animation=null),ve.killTweensOf(this.sprite),ve.killTweensOf(this.sprite.scale),this.sprite.visible=!1,this.active=!1,this.sprite.parent&&this.sprite.parent.removeChild(this.sprite)}createSprite(){const e=new Qe,{width:t,height:n}=this.typeConfig.size,r=new ce;r.roundRect(-t/2-2,-n/2-2,t+4,n+4,3),r.fill({color:this.typeConfig.glowColor,alpha:.5});const s=new ce;s.roundRect(-t/2-1,-n/2-1,t+2,n+2,2),s.fill({color:this.typeConfig.glowColor,alpha:.7});const l=new ce;l.roundRect(-t/2,-n/2,t,n,2),l.fill({color:this.typeConfig.color,alpha:1});const c=new ce;return c.roundRect(-t/2+2,-n/2+1,t-4,n/2,1),c.fill({color:16777215,alpha:.5}),e.addChild(r),e.addChild(s),e.addChild(l),e.addChild(c),e.x=this.position.x,e.y=this.position.y,e}calculateFlightDuration(e,t=30){const n=e/t,r=this.baseSpeed*this.speedMultiplier,s=n/r;return Math.max(.1,s)}getEffectiveSpeed(){return this.baseSpeed*this.speedMultiplier}setSpeedMultiplier(e){this.speedMultiplier=Math.max(.1,e)}async animateToTarget(){return new Promise(e=>{this.animationResolver=e;const t=this.targetPosition.x-this.position.x,n=this.targetPosition.y-this.position.y,r=Math.sqrt(t*t+n*n),l=this.calculateFlightDuration(r,30);this.animation=ve.timeline().to(this.sprite,{x:this.targetPosition.x,y:this.targetPosition.y,duration:l,ease:"none",callbackScope:this,onUpdate:()=>{if(this.position.x=this.sprite.x,this.position.y=this.sprite.y,!this.collided&&this.onCollisionCheck){const c=this.onCollisionCheck(this);c&&(this.collided=!0,this.collidedWith=c,this.animation&&this.animation.kill(),this.createImpactEffect(),e())}}}).call(()=>{this.collided||this.createImpactEffect(),e()})})}terminateFromCollision(){this.animation&&(this.animation.kill(),this.animation=null),this.createImpactEffect(),this.animationResolver&&(this.animationResolver(),this.animationResolver=null)}createImpactEffect(){const e=new ce;e.circle(0,0,15),e.fill({color:this.typeConfig.color,alpha:.6}),e.circle(0,0,8),e.fill({color:this.typeConfig.glowColor,alpha:.8}),e.x=this.sprite.x,e.y=this.sprite.y,this.sprite.parent&&this.sprite.parent.addChild(e),ve.timeline().to(e.scale,{x:2,y:2,duration:.3,ease:"power2.out"}).to(e,{alpha:0,duration:.2},"-=0.1").call(()=>{e.destroy()})}dispose(){this.animation&&(this.animation.kill(),this.animation=null),ve.killTweensOf(this.sprite),ve.killTweensOf(this.sprite.scale),this.sprite.parent&&this.sprite.parent.removeChild(this.sprite),this.sprite.destroy({children:!0}),this.active=!1}createBasicShape(e){const{width:t,height:n}=this.typeConfig.size,{color:r,glowColor:s}=this.typeConfig,l=new ce;l.roundRect(-t/2-2,-n/2-2,t+4,n+4,3),l.fill({color:s,alpha:.3}),e.addChild(l);const c=new ce;c.roundRect(-t/2-1,-n/2-1,t+2,n+2,2),c.fill({color:s,alpha:.5}),e.addChild(c);const h=new ce;h.roundRect(-t/2,-n/2,t,n,2),h.fill({color:r,alpha:1}),h.stroke({width:1.5,color:16777215,alpha:.6}),e.addChild(h);const d=new ce;d.roundRect(-t/2+2,-n/2+1,t-4,n/2,1),d.fill({color:16777215,alpha:.4}),e.addChild(d)}addPulseAnimation(){ve.to(this.sprite.scale,{x:1.15,y:1.15,duration:.3,repeat:-1,yoyo:!0,ease:"sine.inOut"})}getAngleToTarget(){const e=this.targetPosition.x-this.position.x,t=this.targetPosition.y-this.position.y;return Math.atan2(t,e)}setRotation(){this.side==="left"?this.sprite.rotation=0:this.sprite.rotation=Math.PI}}class Ic{static create(e){const t=Rc(e.stat),n={...e,typeConfig:t};return new aA(n)}static createRapidFire(e){const t=Rc(e.stat);if(!t.rapidFire||!t.rapidFireCount)return[Ic.create(e)];const n=[],r=t.rapidFireCount,s=3;for(let l=0;l<r;l++){const c=(l-(r-1)/2)*s,h={...e,id:`${e.id}-${l}`,startPosition:{x:e.startPosition.x,y:e.startPosition.y+c},targetPosition:{x:e.targetPosition.x,y:e.targetPosition.y+c}};n.push(Ic.create(h))}return n}}class Ss{constructor(){this.pools=new Map,this.active=new Set,this.POOL_SIZE=50}static getInstance(){return Ss.instance||(Ss.instance=new Ss),Ss.instance}acquire(e){const t=e.typeConfig.name;let n=this.pools.get(t);n||(n=[],this.pools.set(t,n));let r;return n.length>0?(r=n.pop(),r.reset(e),console.log(` Reused ${t} projectile from pool (${n.length} remaining)`)):(r=Ic.create(e),console.log(` Created new ${t} projectile (pool empty)`)),this.active.add(r),r}release(e){if(!this.active.has(e)){console.warn(" Attempted to release projectile not in active set");return}this.active.delete(e);const t=e.typeConfig.name;let n=this.pools.get(t);n||(n=[],this.pools.set(t,n)),n.length<this.POOL_SIZE?(e.cleanup(),n.push(e),console.log(` Returned ${t} to pool (${n.length}/${this.POOL_SIZE})`)):(e.dispose(),console.log(` Pool full, destroyed ${t}`))}getStats(){const e={};let t=0,n=this.active.size;return this.pools.forEach((r,s)=>{const l=Array.from(this.active).filter(c=>c.typeConfig.name===s).length;e[s]={pooled:r.length,active:l},t+=r.length}),{total:{pooled:t,active:n},byType:e}}clear(){this.pools.forEach(e=>{e.forEach(t=>t.dispose())}),this.active.forEach(e=>e.dispose()),this.pools.clear(),this.active.clear(),console.log(" Projectile pool cleared")}getActiveCount(){return this.active.size}getPooledCount(){let e=0;return this.pools.forEach(t=>{e+=t.length}),e}}const Gs=Ss.getInstance();class lA{constructor(){this.nodes=new Map,this.FIRE_INTERVAL=500}getNodeKey(e,t,n){return`${e}-${t}-${n}`}getNodeState(e,t,n){const r=this.getNodeKey(e,t,n);return this.nodes.has(r)||this.nodes.set(r,{queue:[],isProcessing:!1,lastFireTime:0}),this.nodes.get(r)}enqueueProjectile(e,t,n,r,s="ITEM",l){const c=this.getNodeState(e,t,n),h={gameId:e,side:t,lane:n,source:s,itemId:l,fireFn:r};c.queue.push(h),console.log(` [AttackNodeQueue] Enqueued projectile for ${t} ${n.toUpperCase()} (Queue: ${c.queue.length}, Source: ${s})`),c.isProcessing||this.processQueue(e,t,n)}async processQueue(e,t,n){const r=this.getNodeState(e,t,n);if(!r.isProcessing){for(r.isProcessing=!0;r.queue.length>0;){const l=Date.now()-r.lastFireTime;if(l<this.FIRE_INTERVAL&&r.lastFireTime>0){const h=this.FIRE_INTERVAL-l;console.log(` [AttackNodeQueue] Waiting ${h}ms before next projectile from ${t} ${n.toUpperCase()}`),await new Promise(d=>setTimeout(d,h))}const c=r.queue.shift();c&&(console.log(` [AttackNodeQueue] Firing projectile from ${t} ${n.toUpperCase()} (${r.queue.length} remaining in queue)`),c.fireFn().catch(h=>{console.error(" [AttackNodeQueue] Error firing projectile:",h)}),r.lastFireTime=Date.now())}r.isProcessing=!1,console.log(` [AttackNodeQueue] Queue empty for ${t} ${n.toUpperCase()}`)}}clearGame(e){const t=[];this.nodes.forEach((n,r)=>{r.startsWith(e)&&t.push(r)}),t.forEach(n=>this.nodes.delete(n)),console.log(` [AttackNodeQueue] Cleared ${t.length} attack node queues for game ${e}`)}getQueueLength(e,t,n){return this.getNodeState(e,t,n).queue.length}}const Us=new lA,ti={id:"STARTER_wpn_shortsword",team:"STARTER",teamName:"Starter Equipment",slot:"weapon",name:"Shortsword",description:"Every 3 to 8 projectiles fired from the PTS row, fire 1 to 3 projectiles from the REB, AST, STL, 3PT rows. +10% to +90% speed bonus to PTS projectiles and one random stat.",icon:"",rollRanges:{ptsThreshold:{min:3,max:8,step:1},bonusProjectiles:{min:1,max:3,step:1},ptsSpeedBoost:{min:10,max:90,step:1},bonusStatSpeedBoost:{min:10,max:90,step:1},bonusStat:{min:0,max:3,step:1}}};function cA(i){const{itemInstanceId:e,gameId:t,side:n,rolls:r}=i,{ptsThreshold:s,bonusProjectiles:l,ptsSpeedBoost:c,bonusStatSpeedBoost:h}=r,d=["reb","ast","stl","3pt"],f=r.bonusStat||0,m=d[f];console.log(` [Shortsword] REGISTERING EFFECT for ${n} side in game ${t}`),console.log(` [Shortsword] PTS Threshold: ${s}, Bonus Projectiles: ${l}`),console.log(` [Shortsword] Speed Boosts: PTS +${c}%, ${m.toUpperCase()} +${h}%`),Ce.setCounter(e,"ptsFired",0),Ze.on("PROJECTILE_FIRED",g=>{if(g.gameId!==t||g.side!==n||g.lane!=="pts"||g.source==="ITEM")return;const y=Ce.incrementCounter(e,"ptsFired",1);if(console.log(` [Shortsword] PTS projectile fired! Count: ${y}/${s}`),y>=s){console.log(` [Shortsword] THRESHOLD REACHED! Queueing ${l} bonus projectiles from each stat row!`),Ce.setCounter(e,"ptsFired",0);const v=["reb","ast","stl","3pt"];v.forEach(C=>{for(let b=0;b<l;b++)Us.enqueueProjectile(t,n,C,()=>uA(t,n,C),"ITEM",ti.id)});const x=l*v.length,S=Ce.incrementCounter(e,"totalBonusProjectiles",x);console.log(` [Shortsword] Queued ${x} bonus projectiles! Total bonus projectiles: ${S}`)}}),Ze.on("PROJECTILE_FIRED",g=>{if(g.gameId!==t||g.side!==n)return;const v=xe.getState().battles.get(t)?.projectiles.find(x=>x.id===g.projectileId);if(!v){console.log(` [Shortsword] Could not find projectile ${g.projectileId} in store for game ${t}`);return}if(g.lane==="pts"){const x=1+c/100;v.setSpeedMultiplier(x),console.log(` [Shortsword] Applied +${c}% speed boost to PTS projectile (multiplier: ${x})`)}if(g.lane===m){const x=1+h/100;v.setSpeedMultiplier(x),console.log(` [Shortsword] Applied +${h}% speed boost to ${m.toUpperCase()} projectile (multiplier: ${x})`)}}),console.log(` [Shortsword] Effect registered for ${n} (${e})`)}async function uA(i,e,t){console.log(` [Shortsword] Firing bonus projectile from ${t.toUpperCase()} on ${e} side`);const n=xe.getState(),r=e==="left"?"right":"left",s=it.getWeaponSlotPosition(t,e),l=it.getWeaponSlotPosition(t,r),c=`shortsword-${t}-${e}-${Date.now()}`,h=Rc(t),d={id:c,gameId:i,stat:t,side:e,startPosition:s,targetPosition:l,typeConfig:h},f=Gs.acquire(d);f.onCollisionCheck=m=>Zt.checkCollisions(m),Zt.registerProjectile(f),n.addProjectile(i,f),Pt.addSprite(f.sprite,"projectile",i),console.log(` [Shortsword] Fired bonus projectile from ${t.toUpperCase()}`),Ze.emit("PROJECTILE_FIRED",{side:e,opponentSide:r,quarter:1,battleId:i,gameId:i,lane:t,projectileId:c,source:"ITEM",isExtraFromItem:!0,itemId:ti.id}),await new Promise(m=>setTimeout(m,50)),console.log(` [Shortsword] Animating bonus projectile ${c} with speed multiplier: ${f.speedMultiplier}`),await f.animateToTarget(),f.sprite.visible=!1,f.collidedWith==="defense"?console.log(" [Shortsword] Bonus projectile hit defense dot"):f.collidedWith||(n.applyDamageToCapperHP(i,r,1),console.log(" [Shortsword] Bonus projectile hit weapon slot - 1 HP damage")),Pt.removeSprite(f.sprite),n.removeProjectile(i,f.id),Zt.unregisterProjectile(f.id),Gs.release(f)}Ce.registerEffect(ti.id,cA);console.log(` [Shortsword] Item effect registered: ${ti.id}`);const ni={id:"CHA_pwr_hornets_nest",team:"CHA",teamName:"Charlotte Hornets",slot:"power",name:"Hornets' Nest",description:"When a defense orb is destroyed, fire 1-3 retaliatory projectiles from that row. If it's the last orb in that row, fire an additional 1-5 projectiles.",icon:"",rollRanges:{retaliationSize:{min:1,max:3,step:1},lastOrbBonus:{min:1,max:5,step:1}}};function hA(i){const{itemInstanceId:e,gameId:t,side:n,rolls:r}=i,{retaliationSize:s,lastOrbBonus:l}=r;console.log(` [HornetsNest] REGISTERING EFFECT for ${n} side in game ${t}`),console.log(` [HornetsNest] Retaliation: ${s} projectiles, Last-Orb Bonus: +${l}`),Ze.on("DEFENSE_ORB_DESTROYED",c=>{if(c.gameId!==t||c.side!==n)return;const h=c.lane;console.log(` [HornetsNest] Defense orb destroyed in ${h.toUpperCase()} row! Firing retaliation...`);const d=xe.getState().battles.get(t);if(!d){console.error(` [HornetsNest] Battle not found: ${t}`);return}const f=Array.from(d.defenseDots.values()).filter(v=>v.stat===h&&v.side===n&&v.alive).length,m=f===0;console.log(` [HornetsNest] Remaining orbs in ${h}: ${f} (isLastOrb: ${m})`);let g=s;m&&(g+=l,console.log(` [HornetsNest] LAST ORB DESTROYED! Firing ${s} + ${l} = ${g} projectiles!`));for(let v=0;v<g;v++)Us.enqueueProjectile(t,n,h,()=>dA(t,n,h),"ITEM",ni.id);const y=Ce.incrementCounter(e,"totalRetaliationFired",g);console.log(` [HornetsNest] Queued ${g} retaliation projectiles! Total fired: ${y}`)}),console.log(` [HornetsNest] Effect registered for ${n} (${e})`)}async function dA(i,e,t){console.log(` [HornetsNest] Firing retaliation projectile from ${t.toUpperCase()} on ${e}`);const n=xe.getState(),r=e==="left"?"right":"left",s=it.getWeaponSlotPosition(t,e),l=it.getWeaponSlotPosition(t,r),c=`hornets-${t}-${e}-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,h=Rc(t),d={id:c,gameId:i,stat:t,side:e,startPosition:s,targetPosition:l,typeConfig:h},f=Gs.acquire(d);f.onCollisionCheck=m=>Zt.checkCollisions(m),Zt.registerProjectile(f),n.addProjectile(i,f),Pt.addSprite(f.sprite,"projectile",i),Ze.emit("PROJECTILE_FIRED",{side:e,opponentSide:r,quarter:1,battleId:i,gameId:i,lane:t,projectileId:c,source:"ITEM",isExtraFromItem:!0,itemId:ni.id}),await new Promise(m=>setTimeout(m,50)),await f.animateToTarget(),f.sprite.visible=!1,f.collidedWith||(n.applyDamageToCapperHP(i,r,1),console.log(" [HornetsNest] Retaliation hit castle - 1 HP damage!")),Pt.removeSprite(f.sprite),n.removeProjectile(i,f.id),Zt.unregisterProjectile(f.id),Gs.release(f)}Ce.registerEffect(ni.id,hA);console.log(` [HornetsNest] Item effect registered: ${ni.id}`);const fA=10181046,Vs={id:"WAS_def_wizards_watchtower",team:"WAS",teamName:"Washington Wizards",slot:"defense",name:"Wizard's Watchtower",description:"Castle shield (5-15 HP, heals +1 per orb destroyed) plus enchants the last defense orb in each row with +1-3 bonus HP and a purple glow.",icon:"",rollRanges:{startShieldHp:{min:5,max:15,step:1},orbBonusHP:{min:1,max:3,step:1}}};function pA(i,e=fA){const t=new ce,n=24;for(let r=3;r>=1;r--){const s=n+r*3,l=.2/r,c=-s/2,h=s*.75,d=s,f=s/2;t.moveTo(-h/2,c),t.bezierCurveTo(-h/2,c-.5,h/2,c-.5,h/2,c),t.bezierCurveTo(h/2+1,c+s*.15,d/2,-s*.05,d/2,0),t.bezierCurveTo(d/2,s*.15,s*.2+1,f-s*.2,0,f),t.bezierCurveTo(-s*.2-1,f-s*.2,-d/2,s*.15,-d/2,0),t.bezierCurveTo(-d/2,-s*.05,-h/2-1,c+s*.15,-h/2,c),t.stroke({width:2,color:e,alpha:l})}return t.x=i.x,t.y=i.y,t.name="wizard-glow",t}function mA(i){const{itemInstanceId:e,gameId:t,side:n,rolls:r}=i,{startShieldHp:s,orbBonusHP:l}=r,c=1;console.log(` [WizardsWatchtower] REGISTERING EFFECT for ${n} side in game ${t}`),console.log(` [WizardsWatchtower] Shield: ${s} HP, +${c} per orb | Orb Buff: +${l} HP to last orbs`),Ze.on("BATTLE_START",h=>{if(h.gameId!==t||h.side!==n)return;console.log(` [WizardsWatchtower] Creating shield for ${n} with ${s} HP`);const d=`${t}-${n}`;rt.activateShield(d,s,0,"WAS_def_wizards_watchtower");const f=qt.getCastle(t,d);f&&f.activateShield({id:"WAS_def_wizards_watchtower",name:"Wizard's Watchtower",description:"Castle shield with orb enchantment",icon:"",shieldHP:s,shieldActivationThreshold:0}),console.log(` [WizardsWatchtower] Shield created with ${s} HP!`),Ce.setCounter(e,"shieldId",1),Ce.setCounter(e,"shieldActive",1),console.log(` [WizardsWatchtower] Buffing last orbs for ${n} with +${l} HP each`);const m=xe.getState().battles.get(t);if(!m){console.error(` [WizardsWatchtower] Battle not found: ${t}`);return}const g=["pts","reb","ast","stl","3pt"];let y=0;g.forEach(v=>{const x=Array.from(m.defenseDots.values()).filter(b=>b.stat===v&&b.side===n&&b.alive).sort((b,P)=>P.index-b.index);if(x.length===0){console.log(` [WizardsWatchtower] No orbs in ${v} lane for ${n}`);return}const S=x[0],C=S.hp;if(S.hp+=l,S.maxHp=Math.max(S.maxHp,S.hp),console.log(` [WizardsWatchtower] Buffed ${v} last orb: ${C}  ${S.hp} HP (+${l})`),S.isWizardBuffed=!0,S.sprite&&S.sprite.parent){const b=pA(S.sprite);S.sprite.parent.addChild(b),S._wizardGlow=b}y++}),Ce.setCounter(e,"orbsBuffed",y),Ce.setCounter(e,"totalOrbBonusHP",y*l),console.log(` [WizardsWatchtower] Buffed ${y} orbs with +${l} HP each (total: +${y*l} HP)`)}),Ze.on("DEFENSE_ORB_DESTROYED",h=>{if(h.gameId!==t||h.side!==n)return;const d=`${t}-${n}`,f=rt.getShield(d);if(!f||!f.isActive){console.log(" [WizardsWatchtower] Shield not active, ignoring orb destruction");return}console.log(` [WizardsWatchtower] Defense orb destroyed, adding +${c} HP to shield`);const m=f.currentHP<f.maxHP;rt.healShield(d,c,!1);const g=qt.getCastle(t,d);g&&m&&(g.updateShieldVisual(),U1(t,h.orbId,d,c));const y=Ce.incrementCounter(e,"totalShieldHpGained",c);console.log(` [WizardsWatchtower] Shield healed by +${c} HP! Total: ${y}`)}),Ze.on("SHIELD_BROKEN",h=>{h.gameId===t&&h.side===n&&(console.log(` [WizardsWatchtower] Shield broken on ${n}!`),Ce.setCounter(e,"shieldActive",0))}),console.log(` [WizardsWatchtower] Effect registered for ${n} (${e})`)}Ce.registerEffect(Vs.id,mA);console.log(` [WizardsWatchtower] Item effect registered: ${Vs.id}`);class q1{constructor(e){this.maxHp=20,this.alive=!0,this.lastDeflectTime=0,this.deflectCooldown=1e3,this.patrolTween=null,this.patrolSpeed=2e3,this.collisionRadius=20,this.id=e.id,this.gameId=e.gameId,this.side=e.side,this.hp=e.hp??this.maxHp,this.teamColor=e.teamColor,this.position=this.calculateStartPosition(),this.sprite=new Qe,this.knightGraphics=this.createKnightGraphics(),this.sprite.addChild(this.knightGraphics),this.sprite.x=this.position.x,this.sprite.y=this.position.y,console.log(` [KnightDefender] Created for ${this.side} at (${this.position.x}, ${this.position.y})`)}calculateStartPosition(){const e=it.getLayout(),t=On.cellHeight,n=(e.battlefieldStart+e.battlefieldEnd)/2,r=30,s=this.side==="left"?n-r:n+r,l=t*2+t/2;return{x:s,y:l}}createKnightGraphics(){const e=new ce,t=24,n=this.teamColor;e.ellipse(0,4,t*.6,t*.35),e.fill({color:n,alpha:1});const r=this.side==="left"?t*.4:-t*.4;e.ellipse(r,-2,t*.2,t*.15),e.fill({color:n,alpha:1}),e.ellipse(0,-8,t*.25,t*.35),e.fill({color:n,alpha:1}),e.circle(0,-18,t*.18),e.fill({color:n,alpha:1});const s=this.side==="left"?1:-1;return e.moveTo(0,-12),e.lineTo(s*t*.8,-25),e.stroke({width:2,color:n,alpha:1}),e.circle(s*t*.8,-25,3),e.fill({color:13421772,alpha:1}),e.circle(0,0,t*.8),e.stroke({width:2,color:this.teamColor,alpha:.3}),e}startPatrol(){this.patrol()}patrol(){if(!this.alive)return;const e=On.cellHeight,t=e/2,n=e*4+e/2,r=t+Math.random()*(n-t),l=Math.abs(r-this.position.y)/(n-t)*this.patrolSpeed/1e3;this.patrolTween=ve.to(this.sprite,{y:r,duration:Math.max(.5,l),ease:"sine.inOut",onUpdate:()=>{this.position.y=this.sprite.y},onComplete:()=>{ve.delayedCall(.3+Math.random()*.5,()=>this.patrol())}})}canDeflect(){return Date.now()-this.lastDeflectTime>=this.deflectCooldown}deflect(){this.lastDeflectTime=Date.now(),console.log(` [KnightDefender] ${this.id} DEFLECTED a projectile!`),ve.timeline().to(this.sprite,{alpha:.3,duration:.05}).to(this.sprite,{alpha:1,duration:.1}),ve.timeline().to(this.sprite.scale,{x:1.3,y:1.3,duration:.1,ease:"power2.out"}).to(this.sprite.scale,{x:1,y:1,duration:.2,ease:"elastic.out(1, 0.5)"})}takeDamage(e=1){if(!this.alive)return;const t=this.hp;this.hp=Math.max(0,this.hp-e),console.log(` [KnightDefender] ${this.id} took ${e} damage | ${t}  ${this.hp} HP`),this.hp<=0?this.destroy():ve.timeline().to(this.knightGraphics,{alpha:.5,duration:.1}).to(this.knightGraphics,{alpha:1,duration:.15})}destroy(){this.alive=!1,console.log(` [KnightDefender] ${this.id} DESTROYED!`),this.patrolTween&&this.patrolTween.kill(),ve.timeline().to(this.sprite.scale,{x:1.5,y:1.5,duration:.15,ease:"power2.out"}).to(this.sprite,{alpha:0,duration:.3,ease:"power2.in"},"-=0.1").to(this.sprite.scale,{x:.5,y:.5,duration:.3},"-=0.3").call(()=>{this.sprite.visible=!1})}checkCollision(e,t,n=5){if(!this.alive)return!1;const r=e-this.position.x,s=t-this.position.y;return Math.sqrt(r*r+s*s)<this.collisionRadius+n}handleProjectileHit(){return this.alive?this.canDeflect()?(this.deflect(),!0):(this.takeDamage(1),!0):!1}dispose(){this.patrolTween&&this.patrolTween.kill(),ve.killTweensOf(this.sprite),ve.killTweensOf(this.sprite.scale),ve.killTweensOf(this.knightGraphics),this.sprite.destroy({children:!0})}}const gA=Object.freeze(Object.defineProperty({__proto__:null,KnightDefender:q1},Symbol.toStringTag,{value:"Module"})),qs={id:"MED_pwr_knight_defender",team:"MED",teamName:"Medieval",slot:"power",name:"Knight Defender",description:"Summons a knight that patrols the battlefield, deflecting enemy projectiles. Can deflect once per second; hits during cooldown deal damage. 20 HP.",icon:"",rollRanges:{}},vf=new Map;function qy(i,e){console.log(` [KnightDefender] Spawning knight for ${e} in game ${i}`);const t=xe.getState().battles.get(i);if(!t)return console.error(` [KnightDefender] No battle found for ${i}`),null;const r=(e==="left"?t.game.leftTeam:t.game.rightTeam).color,s=new q1({id:`knight-${i}-${e}`,gameId:i,side:e,teamColor:r});vf.set(`${i}-${e}`,s);const l=Pt.getContainer(i);if(l)l.addChild(s.sprite),console.log(` [KnightDefender] Added knight sprite to container at position (${s.position.x}, ${s.position.y})`);else return console.error(` [KnightDefender] No container found for ${i}`),null;return s.startPatrol(),console.log(" [KnightDefender] Knight spawned and patrolling!"),s}function yA(i){const{itemInstanceId:e,gameId:t,side:n}=i;console.log(` [KnightDefender] REGISTERING EFFECT for ${n} side in game ${t}`);const r=vf.get(`${t}-${n}`);if(r&&r.alive){console.log(` [KnightDefender] Knight already exists for ${n} in ${t}, skipping spawn`);return}console.log(" [KnightDefender] Spawning knight immediately on equip..."),qy(t,n),Ze.on("BATTLE_START",s=>{if(s.gameId!==t||s.side!==n)return;const l=vf.get(`${t}-${n}`);if(l&&l.alive){console.log(" [KnightDefender] Knight already exists on BATTLE_START, skipping");return}qy(t,n)}),console.log(` [KnightDefender] Effect registered for ${n} (${e})`)}Ce.registerEffect(qs.id,yA);console.log(` [KnightDefender] Item effect registered: ${qs.id}`);const _A=[js,ti,ni,Vs,qs];function xA(i){return _A.find(e=>e.id===i)??null}function Vr(i){const e=xA(i);return e?G1(e):(console.error(` [ItemTestUtils] Item definition not found: ${i}`),null)}const xe=Ew()(Mw((i,e)=>({battles:new Map,getBattle:t=>e().battles.get(t),initializeBattle:(t,n)=>{console.log(`[Multi-Game Store] Initializing battle: ${t}`);const r={game:n,currentQuarter:0,capperHP:new Map,defenseDots:new Map,projectiles:[],isBattleInProgress:!1,completedQuarters:[]};i(s=>{const l=new Map(s.battles);return l.set(t,r),{battles:l}}),e().initializeCapperHP(t),e().initializeDefenseDots(t),vA(t,n)},initializeCapperHP:t=>{const n=e().battles.get(t);if(!n){console.warn(`[Multi-Game Store] Battle not found: ${t}`);return}const{game:r}=n,s=new Map,l=20;s.set("left",{currentHP:l,maxHP:l}),s.set("right",{currentHP:l,maxHP:l}),i(c=>{const h=new Map(c.battles),d=h.get(t);return d&&(d.capperHP=s),{battles:h}}),console.log(`[Multi-Game Store] Initialized HP for ${t}:`),console.log(`  ${r.leftCapper.name}: ${l} HP (fixed)`),console.log(`  ${r.rightCapper.name}: ${l} HP (fixed)`)},initializeDefenseDots:t=>{const n=e().battles.get(t);if(!n){console.warn(`[Multi-Game Store] Battle not found: ${t}`);return}const{game:r}=n,s=new Map,l=["pts","reb","ast","stl","3pt"];["left","right"].forEach(h=>{const d=h==="left"?r.leftTeam:r.rightTeam,f=h==="left"?r.leftCapper:r.rightCapper,m=yf(f,d.id),g=gf(m),y=WE(g),v={pts:y[0],reb:y[1],ast:y[2],stl:y[3],"3pt":y[4]};console.log(`[Multi-Game Store] ${f.name} has ${m} units on ${d.abbreviation} = ${g} defense dots`),console.log("[Multi-Game Store] Distribution:",v),l.forEach(x=>{const S=v[x];console.log(`[Multi-Game Store] Creating ${S} dots for ${x} on ${h} side`);for(let C=1;C<=S;C++){const b=x==="3pt",P=W1(x,h,C),E=`${t}-${P}`,A=j1(x,h,C);console.log(`[Multi-Game Store]   Cell #${C}: ID=${P}, X=${A.x.toFixed(1)}, Y=${A.y.toFixed(1)}`);const M=new z1({id:E,gameId:t,stat:x,side:h,index:C-1,cellId:P,position:A,team:d,maxHp:3,isRegenerated:b});s.set(E,M)}})}),i(h=>{const d=new Map(h.battles),f=d.get(t);return f&&(f.defenseDots=s),{battles:d}}),console.log(`[Multi-Game Store] Initialized ${s.size} defense dots for ${t}`)},addProjectile:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&(l.projectiles=[...l.projectiles,n]),{battles:s}})},removeProjectile:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&(l.projectiles=l.projectiles.filter(c=>c.id!==n)),{battles:s}})},applyDamageToCapperHP:(t,n,r)=>{const s=`Called with battleId=${t}, side=${n}, damage=${r}`;console.log(` [applyDamageToCapperHP] ${s}`),Rt.log("store-hp",`applyDamageToCapperHP: ${s}`);const l=e().battles.get(t);if(!l){const m=`No battle found for battleId=${t}`;console.error(` [applyDamageToCapperHP] ${m}`),Rt.log("store-hp",`ERROR: ${m}`);return}const c=l.capperHP.get(n);if(!c){const m=`No HP tracking found for ${t}-${n}`;console.warn(` [applyDamageToCapperHP] ${m}`),Rt.log("store-hp",`WARNING: ${m}`);return}const h=`Current HP for ${n}: ${c.currentHP}/${c.maxHP}`;console.log(` [applyDamageToCapperHP] ${h}`),Rt.log("store-hp",h);const d=Math.max(0,c.currentHP-r),f=c.currentHP-d;if(f>0){const m=n==="left"?l.game.leftCapper.name:l.game.rightCapper.name,g=`${m} HP: ${c.currentHP}  ${d} (-${f})`;if(console.log(` [Multi-Game Store] ${g}`),Rt.log("store-hp",g,{battleId:t,side:n,oldHP:c.currentHP,newHP:d,actualDamage:f}),d===0){const x=`${m} HAS BEEN DEFEATED!`;console.log(` [Multi-Game Store] ${x}`),Rt.log("store-hp",x)}i(x=>{const S=new Map(x.battles),C=S.get(t);if(C){const b=new Map(C.capperHP);b.set(n,{currentHP:d,maxHP:c.maxHP}),C.capperHP=b;const P=`HP updated in store for ${n}: ${d}/${c.maxHP}`;console.log(` [applyDamageToCapperHP] ${P}`),Rt.log("store-hp",P)}return{battles:S}});const y=`${t}-${n}`;qt.damageCastle(t,y,f);const v=`Called castleManager.damageCastle(battleId=${t}, castleId=${y}, damage=${f})`;console.log(` [applyDamageToCapperHP] ${v}`),Rt.log("store-hp",v)}else{const m="No actual damage applied (already at 0 HP or invalid damage)";console.log(` [applyDamageToCapperHP] ${m}`),Rt.log("store-hp",m)}},applyDamage:(t,n,r)=>{const s=e().battles.get(t);if(!s)return;const l=s.defenseDots.get(n);if(!l){console.warn(`[Multi-Game Store] Defense dot not found: ${n}`);return}l.takeDamage(r),i(c=>{const h=new Map(c.battles),d=h.get(t);return d&&(d.defenseDots=new Map(d.defenseDots)),{battles:h}})},setCurrentQuarter:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&(l.currentQuarter=n),{battles:s}})},updateScore:(t,n,r)=>{i(s=>{const l=new Map(s.battles),c=l.get(t);return c&&(c.game.leftScore=n,c.game.rightScore=r),{battles:l}})},updateGameStatus:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&(l.game.status=n),{battles:s}})},setBattleInProgress:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&(l.isBattleInProgress=n),{battles:s}})},markQuarterComplete:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);return l&&!l.completedQuarters.includes(n)&&(l.completedQuarters=[...l.completedQuarters,n]),{battles:s}})},updateBattle:(t,n)=>{i(r=>{const s=new Map(r.battles),l=s.get(t);if(l){const c=n(l);s.set(t,c)}return{battles:s}})},resetBattle:t=>{const n=e().battles.get(t);n&&(n.defenseDots.forEach(r=>r.dispose()),n.projectiles.forEach(r=>r.dispose()),Us.clearGame(t),i(r=>{const s=new Map(r.battles);return s.delete(t),{battles:s}}))},resetAllBattles:()=>{e().battles.forEach((n,r)=>{n.defenseDots.forEach(s=>s.dispose()),n.projectiles.forEach(s=>s.dispose()),Us.clearGame(r)}),i({battles:new Map})}}),{name:"BattleBets-MultiGameStore"}));async function vA(i,e){console.log(` [Items] Activating equipped items for battle ${i}`),console.log(" [Items] Left capper equipped items:",JSON.stringify(e.leftCapper.equippedItems)),console.log(" [Items] Right capper equipped items:",JSON.stringify(e.rightCapper.equippedItems));const t=e.leftCapper.equippedItems;if(t){if(t.slot1){const r=Vr(t.slot1);r&&(await Ce.activateItem(i,"left",r),console.log(` [Items] Activated ${t.slot1} on LEFT slot1`))}if(t.slot2){const r=Vr(t.slot2);r&&(await Ce.activateItem(i,"left",r),console.log(` [Items] Activated ${t.slot2} on LEFT slot2`))}if(t.slot3){const r=Vr(t.slot3);r&&(await Ce.activateItem(i,"left",r),console.log(` [Items] Activated ${t.slot3} on LEFT slot3`))}}const n=e.rightCapper.equippedItems;if(n){if(n.slot1){const r=Vr(n.slot1);r&&(await Ce.activateItem(i,"right",r),console.log(` [Items] Activated ${n.slot1} on RIGHT slot1`))}if(n.slot2){const r=Vr(n.slot2);r&&(await Ce.activateItem(i,"right",r),console.log(` [Items] Activated ${n.slot2} on RIGHT slot2`))}if(n.slot3){const r=Vr(n.slot3);r&&(await Ce.activateItem(i,"right",r),console.log(` [Items] Activated ${n.slot3} on RIGHT slot3`))}}console.log(` [Items] All equipped items activated for battle ${i}`)}function SA(i){const e=_f(),t=xf(),n=On.cellWidth,r=On.cellHeight,s=On.statLabelWidth,l=On.weaponSlotWidth,c=On.defenseCellsPerSide,h=On.attackCellsPerSide,d=On.battlefieldWidth,f=s*2+l*2+c*n*2+h*n*2+d,g=(e-f)/2,y=g+s,v=y+l,x=v+c*n,S=x+h*n,b=S+d,P=b+h*n,E=P+c*n,A=E+l,M=[{name:"PTS",id:"pts",value:34,color:16739125,glowColor:16747610},{name:"REB",id:"reb",value:12,color:5164484,glowColor:7265749},{name:"AST",id:"ast",value:6,color:16234289,glowColor:16369487},{name:"STL",id:"stl",value:8,color:16726072,glowColor:16734296},{name:"3PT",id:"3pt",value:4,color:54015,glowColor:3399935}];for(let k=0;k<5;k++){const $=k*r,D=M[k];fs(i,y,$,l,r,"weapon",D.color);for(let O=0;O<c;O++){const G=v+O*n;fs(i,G,$,n,r,"defense",D.color)}for(let O=0;O<h;O++){const G=x+O*n;fs(i,G,$,n,r,"attack",D.color)}for(let O=0;O<h;O++){const G=b+O*n;fs(i,G,$,n,r,"attack",D.color)}for(let O=0;O<c;O++){const G=c-1-O,te=P+G*n;fs(i,te,$,n,r,"defense",D.color)}fs(i,E,$,l,r,"weapon",D.color)}wA(i,S,0,d,t),M.forEach((k,$)=>{const D=$*r+r/2;CA(i,k,D,g,s,A)}),M.forEach((k,$)=>{const D=$*r+r/2;Yy(i,y+l/2,D,k.color,k.id,"left"),Yy(i,E+l/2,D,k.color,k.id,"right")})}function fs(i,e,t,n,r,s,l){const c=new ce;c.rect(e+2,t+2,n-2,r-2),c.fill({color:0,alpha:.3}),i.addChild(c);const h=new ce;h.rect(e,t,n,r),s==="weapon"?h.fill({color:1712946}):s==="defense"?h.fill({color:1710638}):h.fill({color:1976901}),s==="weapon"?h.stroke({width:2,color:3368652,alpha:.8}):h.stroke({width:2,color:2767454,alpha:.9}),i.addChild(h);const d=new ce;d.rect(e+2,t+1,n-4,2),d.fill({color:16777215,alpha:.08}),i.addChild(d);const f=new ce;f.rect(e+3,t,n-6,3),s==="weapon"?f.fill({color:5605631,alpha:.3}):f.fill({color:l,alpha:.15}),i.addChild(f);const m=new ce;m.rect(e+2,t+r-2,n-4,2),m.fill({color:0,alpha:.15}),i.addChild(m)}function wA(i,e,t,n,r){const s=new ce;s.rect(e+4,t+4,n-8,r-8),s.fill({color:0,alpha:.4}),i.addChild(s);const l=new ce;l.rect(e,t,n,r),l.fill({color:856343}),l.stroke({width:3,color:3159613,alpha:.8}),i.addChild(l);const c=new ce;c.rect(e+4,t+4,n-8,r-8),c.stroke({width:2,color:1909031,alpha:.6}),i.addChild(c);const h=e+n/2,d=new ce;d.moveTo(h,t),d.lineTo(h,t+r),d.stroke({width:8,color:3159613,alpha:.4}),i.addChild(d);const f=new ce;f.moveTo(h,t),f.lineTo(h,t+r),f.stroke({width:3,color:5264989,alpha:1}),i.addChild(f)}function Yy(i,e,t,n,r,s){const c=new Qe;c.label=`weapon-ball-${r}-${s}`,c.x=e,c.y=t;const h=new ce;h.circle(0,0,14),h.fill({color:n,alpha:.3}),c.addChild(h);const d=new ce;d.circle(0,0,10),d.fill({color:n,alpha:.9}),c.addChild(d);const f=new ce;f.circle(-3,-3,10/3),f.fill({color:16777215,alpha:.6}),c.addChild(f);const m=new ce;m.circle(0,0,10),m.stroke({width:2,color:16777215,alpha:.4}),c.addChild(m),i.addChild(c)}function CA(i,e,t,n,r,s,l,c){const h=new Ft({text:e.name,style:{fontFamily:"Arial Black, Arial",fontSize:12,fontWeight:"bold",fill:e.color,stroke:{color:0,width:3},dropShadow:{color:e.glowColor,blur:4,alpha:.7,distance:0}}});h.anchor.set(1,.5),h.x=n+r-5,h.y=t-10,i.addChild(h);const d=new Ft({text:"0",style:{fontFamily:"Arial Black, Arial",fontSize:18,fontWeight:"bold",fill:16777215,stroke:{color:0,width:3},dropShadow:{color:e.color,blur:5,alpha:.9,distance:0}}});d.anchor.set(1,.5),d.x=n+r-5,d.y=t+10,d.label=`stat-value-${e.id}-left`,i.addChild(d);const f=new Ft({text:e.name,style:{fontFamily:"Arial Black, Arial",fontSize:12,fontWeight:"bold",fill:e.color,stroke:{color:0,width:3},dropShadow:{color:e.glowColor,blur:4,alpha:.7,distance:0}}});f.anchor.set(0,.5),f.x=s+5,f.y=t-10,i.addChild(f);const m=new Ft({text:"0",style:{fontFamily:"Arial Black, Arial",fontSize:18,fontWeight:"bold",fill:16777215,stroke:{color:0,width:3},dropShadow:{color:e.color,blur:5,alpha:.9,distance:0}}});m.anchor.set(0,.5),m.x=s+5,m.y=t+10,m.label=`stat-value-${e.id}-right`,i.addChild(m)}function Uo(i){if(!i)return 0;const e=new Date().getTime(),t=new Date(i).getTime();return Math.max(0,t-e)}function Vo(i){const e=Math.floor(i/1e3),t=Math.floor(e/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function bA(i){const{status:e,gameStartTime:t,q1EndTime:n,q2EndTime:r,halftimeEndTime:s,q3EndTime:l,q4EndTime:c,canvasWidth:h,canvasHeight:d}=i;let f="",m="",g=!1;switch(e){case"scheduled":g=!1;break;case"q1_pending":if(n){const A=Uo(n);A>0&&(f="Q1 BATTLE IN",m=Vo(A),g=!0)}break;case"q2_pending":if(r){const A=Uo(r);A>0&&(f="Q2 BATTLE IN",m=Vo(A),g=!0)}break;case"halftime":if(s){const A=Uo(s);A>0&&(f="HALFTIME",m=Vo(A),g=!0)}break;case"q3_pending":if(l){const A=Uo(l);A>0&&(f="Q3 BATTLE IN",m=Vo(A),g=!0)}break;case"q4_pending":if(c){const A=Uo(c);A>0&&(f="Q4 BATTLE IN",m=Vo(A),g=!0)}break;case"q1_complete":g=!1;break;case"q2_complete":g=!1;break;case"q3_complete":g=!1;break;case"q4_complete":g=!1;break;case"final":f="FINAL",g=!0;break;case"complete":f="BATTLE COMPLETE",g=!0;break;default:g=!1;break}if(!g)return null;const y=new Qe;y.label="battle-status-overlay";const v=new ce;v.rect(0,0,h,d),v.fill({color:0,alpha:.7}),y.addChild(v);const x=600,S=m?180:120,C=(h-x)/2,b=(d-S)/2,P=new ce;P.roundRect(C,b,x,S,16),P.fill({color:16777215}),y.addChild(P);const E=new Ft({text:f,style:{fontFamily:"Arial Black, Arial",fontSize:48,fontWeight:"900",fill:0,align:"center",letterSpacing:0}});if(E.anchor.set(.5),E.x=h/2,E.y=m?b+50:d/2,y.addChild(E),m){const A=new Ft({text:m,style:{fontFamily:"Arial Black, Arial",fontSize:64,fontWeight:"900",fill:0,align:"center"}});A.anchor.set(.5),A.x=h/2,A.y=b+120,y.addChild(A)}return y}function Xy(i,e){const t=i.children.find(r=>r.label==="battle-status-overlay");t&&(i.removeChild(t),t.destroy({children:!0}));const n=bA(e);n&&i.addChild(n)}class ws{constructor(){this.containers=new Map,this.originalPositions=new Map,this.shakingBattles=new Set}static getInstance(){return ws.instance||(ws.instance=new ws),ws.instance}setContainer(e,t){this.containers.set(t,e),this.originalPositions.set(t,{x:e.x,y:e.y}),console.log(` ScreenShake: Container set for battle ${t}`)}shake(e,t="medium",n){const r=this.containers.get(e),s=this.originalPositions.get(e);if(!r||!s||this.shakingBattles.has(e))return;const l={small:3,medium:6,large:12},c={small:.3,medium:.4,large:.6},h=l[t],d=n??c[t];this.shakingBattles.add(e),console.log(` Screen shake for battle ${e}: ${t} (magnitude: ${h}, duration: ${d}s)`);const f=ve.timeline({onComplete:()=>{this.shakingBattles.delete(e)}});f.to(r,{x:s.x+ve.utils.random(-h,h),y:s.y+ve.utils.random(-h,h),duration:.05,ease:"power2.out"}),f.to(r,{x:s.x+ve.utils.random(-h,h)*.6,y:s.y+ve.utils.random(-h,h)*.6,duration:.05}),f.to(r,{x:s.x+ve.utils.random(-h,h)*.3,y:s.y+ve.utils.random(-h,h)*.3,duration:.05}),f.to(r,{x:s.x,y:s.y,duration:d-.15,ease:"elastic.out(1, 0.3)"})}reset(e){const t=this.containers.get(e),n=this.originalPositions.get(e);!t||!n||(ve.killTweensOf(t),t.x=n.x,t.y=n.y,this.shakingBattles.delete(e))}clearBattle(e){this.reset(e),this.containers.delete(e),this.originalPositions.delete(e),console.log(` ScreenShake: Cleared references for battle ${e}`)}}const Sf=ws.getInstance();function TA(){try{const i=document.createElement("canvas"),e=i.getContext("webgl2")||i.getContext("webgl")||i.getContext("experimental-webgl");if(!e)return{supported:!1,error:"WebGL is not supported by your browser or device. Please use a modern browser like Chrome, Firefox, or Edge."};if(!(e instanceof WebGLRenderingContext||e instanceof WebGL2RenderingContext))return{supported:!1,error:"WebGL context could not be created."};const t=e instanceof WebGL2RenderingContext,n=t?"WebGL 2.0":"WebGL 1.0",r=e.getExtension("WEBGL_debug_renderer_info"),s=r?e.getParameter(r.UNMASKED_VENDOR_WEBGL):"Unknown",l=r?e.getParameter(r.UNMASKED_RENDERER_WEBGL):"Unknown";if(!t){const h=["OES_texture_float","OES_element_index_uint"];for(const d of h)if(!e.getExtension(d))return{supported:!1,error:`Required WebGL extension "${d}" is not available. Your device may not support advanced graphics features.`}}const c=e.getParameter(e.MAX_TEXTURE_SIZE);return c<2048?{supported:!1,error:`WebGL max texture size (${c}) is too small. Minimum required: 2048.`}:(console.log(" WebGL Support Detected:",{version:n,vendor:s,renderer:l,maxTextureSize:c}),{supported:!0,details:{version:n,vendor:s,renderer:l}})}catch(i){return console.error("WebGL detection error:",i),{supported:!1,error:"Failed to initialize WebGL context. Your browser or device may not support hardware acceleration."}}}function PA(i){return{pts:16739125,reb:5164484,ast:16234289,stl:16726072,"3pt":54015}[i]||16777215}async function Qy(i,e){return new Promise(t=>{const{stat:n,side:r,value:s}=e,l=`stat-value-${n}-${r}`,c=i.children.find(m=>m.name===l);if(!c){console.warn(` Could not find stat value text: ${l}`),t();return}const h=parseInt(c.text)||0,d=h+s;console.log(` Animating ${n} ${r}: ${h}  ${d} (+${s})`);const f={value:h};ve.to(f,{value:d,duration:1.5,ease:"power2.out",onUpdate:()=>{const m=Math.floor(f.value);c.text=m.toString()},onComplete:()=>{c.text=d.toString(),ve.timeline().to(c.scale,{x:1.2,y:1.2,duration:.2,ease:"power2.out"}).to(c.scale,{x:1,y:1,duration:.3,ease:"elastic.out(1, 0.5)",onComplete:t})}})})}async function Ky(i,e){return new Promise(t=>{const n=PA(e),r=i.scale.x,s=new ce;s.circle(0,0,20),s.fill({color:n,alpha:0}),i.addChild(s);const l=ve.timeline({onComplete:()=>{i.removeChild(s),s.destroy(),t()}});l.to(s,{alpha:.6,duration:.3,ease:"power2.out"}),l.to(s.scale,{x:1.5,y:1.5,duration:.3,ease:"power2.out"},"<"),l.to(s,{alpha:0,duration:.2}),l.to(s,{alpha:.6,duration:.3,ease:"power2.out"}),l.to(s.scale,{x:1.5,y:1.5,duration:.3,ease:"power2.out"},"<"),l.to(s,{alpha:0,duration:.2}),l.to(i.scale,{x:r*1.3,y:r*1.3,duration:.3,ease:"power2.out"},"-=0.4"),l.to(i.scale,{x:r,y:r,duration:.3,ease:"elastic.out(1, 0.5)"}),console.log(`    Weapon activation animation started: ${e}`)})}function Zy(i,e,t){const n=`weapon-ball-${e}-${t}`,r=s=>{for(const l of s.children){if(l.name===n&&l instanceof Qe)return l;if(l instanceof Qe){const c=r(l);if(c)return c}}return null};return r(i)}function ac(i,e){const s=25+["points","reb","ast","fire","shield"].indexOf(i)*50,l=60,c=30,h=30,d=30,f=400;let m;return e==="left"?m=l/2:m=l+c+5*h+4*d+f+4*d+5*h+c+l-l/2,{x:m,y:s}}async function EA(i){const t=xe.getState().getBattle(i);if(!t)return;const n=t.game;console.log(`
 SHIELD REGENERATION ACTIVATING...`);const r=["left","right"],s=["pts","reb","ast"];for(const l of r){const c=l==="left"?n.leftTeam:n.rightTeam,h=l==="left"?n.leftCapper:n.rightCapper,d=Array.from(t.defenseDots.values()).filter(f=>f.side===l&&f.stat==="shield"&&f.alive);if(d.length===0){console.log(`    ${h.name} has no SHIELD dots - no regeneration`);continue}console.log(`    ${h.name} has ${d.length} SHIELD dots - regenerating...`);for(const f of s)await AA(i,f,l,c)}console.log(` Shield regeneration complete!
`)}async function AA(i,e,t,n){const s=xe.getState().getBattle(i);if(!s)return;const l=Array.from(s.defenseDots.values()).filter(g=>g.side===t&&g.stat===e&&g.alive).sort((g,y)=>g.index-y.index);let c;if(l.length===0)c=1,console.log(`       ${e.toUpperCase()} row is dead - resurrecting at cell 1`);else{if(c=l[l.length-1].index+2,c>10){console.log(`       ${e.toUpperCase()} row is full (10 cells) - cannot regenerate`);return}console.log(`       ${e.toUpperCase()} regenerating gold dot at cell ${c}`)}const h=W1(e,t,c),d=`${i}-${h}-regen-${Date.now()}`,f=j1(e,t,c),m=new z1({id:d,gameId:i,stat:e,side:t,index:c-1,cellId:h,position:f,team:n,maxHp:3,isRegenerated:!0});xe.setState(g=>{const y=g.getBattle(i);if(!y)return g;const v=new Map(g.battles),x=new Map(y.defenseDots);return x.set(d,m),v.set(i,{...y,defenseDots:x}),{battles:v}},!1,"regenerateDefenseDot"),await kA(m)}async function kA(i){return new Promise(e=>{if(!i.sprite){e();return}i.sprite.alpha=0,i.sprite.scale.set(.1),ve.timeline().to(i.sprite,{alpha:1,duration:.3,ease:"power2.out"}).to(i.sprite.scale,{x:1.5,y:1.5,duration:.2,ease:"back.out"},"<").to(i.sprite.scale,{x:1,y:1,duration:.2,ease:"elastic.out"}).call(()=>{ve.to(i.sprite,{alpha:.7,duration:.5,yoyo:!0,repeat:2,ease:"sine.inOut"}),e()})})}function MA(){console.log(`
 ===== GRID POSITION DEBUG =====
`);const i=["pts","reb","ast","stl","3pt"];console.log(" WEAPON SLOT POSITIONS:"),i.forEach(n=>{const r=it.getWeaponSlotPosition(n,"left"),s=it.getWeaponSlotPosition(n,"right");console.log(`  ${n.toUpperCase()}: LEFT=${r.x.toFixed(1)}, RIGHT=${s.x.toFixed(1)}`)}),console.log(`
 DEFENSE CELL POSITIONS (Cell #1 and #10):`),i.forEach(n=>{const r=it.getDefenseCellPosition(n,"left",0),s=it.getDefenseCellPosition(n,"left",9),l=it.getDefenseCellPosition(n,"right",0),c=it.getDefenseCellPosition(n,"right",9);console.log(`  ${n.toUpperCase()} LEFT:  Cell#1=${r.x.toFixed(1)}, Cell#10=${s.x.toFixed(1)}`),console.log(`  ${n.toUpperCase()} RIGHT: Cell#1=${l.x.toFixed(1)}, Cell#10=${c.x.toFixed(1)}`)});const e=it.getBattlefieldCenter();console.log(`
 BATTLEFIELD CENTER: X=${e.x.toFixed(1)}`);const t=it.getLayout();console.log(`
 GRID LAYOUT:`),console.log(`  Left Weapon Slot Start: ${t.leftWeaponSlotStart.toFixed(1)}`),console.log(`  Left Defense Start: ${t.leftDefenseStart.toFixed(1)}`),console.log(`  Battlefield Start: ${t.battlefieldStart.toFixed(1)}`),console.log(`  Battlefield End: ${t.battlefieldEnd.toFixed(1)}`),console.log(`  Right Defense Start: ${t.rightDefenseStart.toFixed(1)}`),console.log(`  Right Weapon Slot Start: ${t.rightWeaponSlotStart.toFixed(1)}`),console.log(`
 ===== END GRID DEBUG =====
`)}async function RA(i,e,t,n){try{console.log(`[Quarter Stats] Fetching real data for ${i} Q${e}...`);const r=await fetch(`/api/battle-bets/sync-quarter-stats?gameId=${i}&quarter=${e}`);if(!r.ok)return console.warn(`[Quarter Stats] API returned ${r.status}, falling back to random stats`),null;const s=await r.json();if(!s.success||!s.quarterStats)return console.warn("[Quarter Stats] No quarter stats in response, falling back to random stats"),null;const l=s.quarterStats,c={points:l.leftScore||0,rebounds:Gr(l.leftPlayers,"rebounds"),assists:Gr(l.leftPlayers,"assists"),steals:Gr(l.leftPlayers,"steals")||Math.floor(Math.random()*3)+1,threePointers:Gr(l.leftPlayers,"threePointers")},h={points:l.rightScore||0,rebounds:Gr(l.rightPlayers,"rebounds"),assists:Gr(l.rightPlayers,"assists"),steals:Gr(l.rightPlayers,"steals")||Math.floor(Math.random()*3)+1,threePointers:Gr(l.rightPlayers,"threePointers")};return console.log(`[Quarter Stats] Real data fetched: ${t} ${c.points}-${h.points} ${n}`),{left:c,right:h}}catch(r){return console.error("[Quarter Stats] Failed to fetch real stats:",r),null}}function Gr(i,e){return!i||!Array.isArray(i)?0:i.reduce((t,n)=>t+(n[e]||0),0)}async function Jy(i,e){console.log(`
 Q${e} START (battleId=${i})`);const t=xe.getState();t.setBattleInProgress(i,!0),console.log(` Battle animation started for Q${e}`),e===1&&(MA(),console.log(` [EventEmitter] Emitting BATTLE_START events for battle ${i}`),Ze.emit("BATTLE_START",{side:"left",opponentSide:"right",quarter:1,battleId:i,gameId:i}),Ze.emit("BATTLE_START",{side:"right",opponentSide:"left",quarter:1,battleId:i,gameId:i}),await ta.emit({type:"BATTLE_START",payload:{side:"left",opponentSide:"right",quarter:1,battleId:i,gameId:i}}),await ta.emit({type:"BATTLE_START",payload:{side:"right",opponentSide:"left",quarter:1,battleId:i,gameId:i}}));const n=t.getBattle(i);if(!n)return console.error(`[simulateQuarter] No battle found for id=${i}`),t.setBattleInProgress(i,!1),gc(e);const r=i;Zt.registerBattle(r,()=>{const C=xe.getState().getBattle(i)?.defenseDots??new Map;return Math.random()<.01&&console.log(` [Collision Callback] getDots for ${i}: ${C.size} dots`),C},(x,S)=>{xe.getState().applyDamage(i,x,S)}),console.log(` Collision manager callbacks configured for battle ${i}`);let s;const l=n.game.id||n.game.gameId;if(l&&l.includes("-")){console.log(` Attempting to fetch real quarter stats from MySportsFeeds for game ${l}...`);const x=await RA(l,e,n.game.leftTeam.abbreviation,n.game.rightTeam.abbreviation);x?(s=x,console.log(` Using REAL MySportsFeeds data for Q${e}`)):(s=gc(e),console.log(` MySportsFeeds data unavailable, using RANDOM stats for Q${e}`))}else s=gc(e),console.log(` No real game ID found, using RANDOM stats for Q${e}`);console.log(` ${n.game.leftTeam.abbreviation}: PTS=${s.left.points} REB=${s.left.rebounds} AST=${s.left.assists} STL=${s.left.steals} 3PM=${s.left.threePointers}`),console.log(` ${n.game.rightTeam.abbreviation}: PTS=${s.right.points} REB=${s.right.rebounds} AST=${s.right.assists} STL=${s.right.steals} 3PM=${s.right.threePointers}`);const h=n.game.leftScore||0,d=n.game.rightScore||0,f=h+s.left.points,m=d+s.right.points;t.updateScore(i,f,m),console.log(` SCORE UPDATE: ${n.game.leftTeam.abbreviation} ${f} - ${m} ${n.game.rightTeam.abbreviation}`);const g=e>1?{pts:0,reb:0,ast:0,blk:0,stl:0,threesMade:0}:null;Ze.emit("QUARTER_START",{side:"left",opponentSide:"right",quarter:e,battleId:i,gameId:r,prevQuarterStats:g}),Ze.emit("QUARTER_START",{side:"right",opponentSide:"left",quarter:e,battleId:i,gameId:r,prevQuarterStats:g}),console.log(` [EventEmitter] Emitting QUARTER_START events for Q${e}`),await ta.emit({type:"QUARTER_START",payload:{side:"left",opponentSide:"right",quarter:e,battleId:i,gameId:r,prevQuarterStats:g}}),await ta.emit({type:"QUARTER_START",payload:{side:"right",opponentSide:"left",quarter:e,battleId:i,gameId:r,prevQuarterStats:g}});try{const x=[ms(i,r,"pts",s.left.points,s.right.points,s.left.points*3,s.right.points*3),ms(i,r,"reb",s.left.rebounds,s.right.rebounds,s.left.rebounds*3,s.right.rebounds*3),ms(i,r,"ast",s.left.assists,s.right.assists,s.left.assists*3,s.right.assists*3),ms(i,r,"stl",s.left.steals,s.right.steals,s.left.steals*3,s.right.steals*3),ms(i,r,"3pt",s.left.threePointers,s.right.threePointers,s.left.threePointers*3,s.right.threePointers*3)];if((await Promise.all(x)).some(C=>C===!1))return console.log(" Battle ended during quarter simulation"),s}catch(x){console.error(" Error during stat row firing:",x?.message||x)}try{await EA(i)}catch(x){console.error(" Regen error:",x?.message||x)}console.log(` Q${e} COMPLETE (battleId=${i})
`);const y=n.capperHP.get("left")?.currentHP??0,v=n.capperHP.get("right")?.currentHP??0;return Ze.emit("QUARTER_END",{side:"left",opponentSide:"right",quarter:e,battleId:i,gameId:r,score:{self:y,opponent:v},quarterStats:{pts:s.left.points,reb:s.left.rebounds,ast:s.left.assists,blk:0,stl:s.left.steals,threesMade:s.left.threePointers}}),Ze.emit("QUARTER_END",{side:"right",opponentSide:"left",quarter:e,battleId:i,gameId:r,score:{self:v,opponent:y},quarterStats:{pts:s.right.points,reb:s.right.rebounds,ast:s.right.assists,blk:0,stl:s.right.steals,threesMade:s.right.threePointers}}),t.setBattleInProgress(i,!1),t.markQuarterComplete(i,e),console.log(` Battle animation complete for Q${e}`),s}function e_(i,e){return it.getWeaponSlotPosition(i,e)}function IA(i){return V1[i]}function t_(i){const e={1:{pts:[25,35],reb:[9,14],ast:[5,9],stl:[1,4],tpm:[2,5]},2:{pts:[23,33],reb:[8,13],ast:[4,8],stl:[1,4],tpm:[2,5]},3:{pts:[24,34],reb:[8,13],ast:[4,8],stl:[1,4],tpm:[2,6]},4:{pts:[22,36],reb:[7,12],ast:[4,8],stl:[1,4],tpm:[2,6]}},t=e[i]||e[1];return{points:Math.floor(Math.random()*(t.pts[1]-t.pts[0]+1))+t.pts[0],rebounds:Math.floor(Math.random()*(t.reb[1]-t.reb[0]+1))+t.reb[0],assists:Math.floor(Math.random()*(t.ast[1]-t.ast[0]+1))+t.ast[0],steals:Math.floor(Math.random()*(t.stl[1]-t.stl[0]+1))+t.stl[0],threePointers:Math.floor(Math.random()*(t.tpm[1]-t.tpm[0]+1))+t.tpm[0]}}function gc(i){return{left:t_(i),right:t_(i)}}function Dc(i){return new Promise(e=>setTimeout(e,i))}async function DA(i){if(!xe.getState().getBattle(i)){console.warn(`[MultiBattleDebug] Battle not found for id=${i}`);return}const n=i;console.log(`
 [MultiBattleDebug] Starting debug simulation for battle ${i}`),Zt.registerBattle(n,()=>xe.getState().getBattle(i)?.defenseDots??new Map,(s,l)=>{xe.getState().applyDamage(i,s,l)});const r=["pts","reb","ast","stl","3pt"];for(let s=1;s<=4;s++){const l=gc(s);console.log(`[MultiBattleDebug] Q${s} stats for ${i}:`,{left:l.left,right:l.right});const c=r.map(async d=>{const f=n_(d,l.left),m=n_(d,l.right);return f===0&&m===0?!0:await ms(i,n,d,f,m)});if((await Promise.all(c)).some(d=>d===!1)){console.log(` [MultiBattleDebug] Battle ended during Q${s} for ${i}`),Zt.unregisterBattle(n);return}s<4&&(console.log(` [MultiBattleDebug] Pause between Q${s} and Q${s+1} for ${i}`),await Dc(1500))}console.log(` [MultiBattleDebug] Full 4-quarter debug simulation complete for battle ${i}`),Zt.unregisterBattle(n)}function n_(i,e){let t=0;switch(i){case"pts":t=e.points;break;case"reb":t=e.rebounds;break;case"ast":t=e.assists;break;case"stl":t=e.steals;break;case"3pt":t=e.threePointers;break;default:t=0}return t*2}async function ms(i,e,t,n,r,s,l){const c=t.toUpperCase(),h=s??n,d=l??r;console.log(` [MultiBattleDebug] ${c}: L${n} vs R${r} (projectiles: L${h} vs R${d})`);const f=Pt.getContainer(i);if(!f)return console.warn(`[MultiBattleDebug] No container registered for battle ${i}`),!0;try{const b=[];n>0&&b.push(Qy(f,{stat:t,side:"left",value:n,rowY:ac(t,"left").y,labelX:ac(t,"left").x})),r>0&&b.push(Qy(f,{stat:t,side:"right",value:r,rowY:ac(t,"right").y,labelX:ac(t,"right").x})),await Promise.all(b)}catch(b){console.error(" [MultiBattleDebug] Error during stat counter animation:",b?.message||b)}try{const b=Zy(f,t,"left"),P=Zy(f,t,"right"),E=[];n>0&&b&&E.push(Ky(b,t)),r>0&&P&&E.push(Ky(P,t)),await Promise.all(E)}catch(b){console.error(" [MultiBattleDebug] Error during weapon activation:",b?.message||b)}console.log(` [MultiBattleDebug] Queueing ${h} left and ${d} right projectiles for ${c}`);for(let b=0;b<h;b++){const P=b;Us.enqueueProjectile(e,"left",t,()=>r_(i,e,t,"left",P),"BASE")}for(let b=0;b<d;b++){const P=b;Us.enqueueProjectile(e,"right",t,()=>r_(i,e,t,"right",P),"BASE")}const m=Math.max(h,d),g=m*500;console.log(` [MultiBattleDebug] Waiting ${g}ms for ${m} projectiles to launch from queues`),await Dc(g),console.log(" [MultiBattleDebug] Waiting for projectiles to complete their flight..."),await Dc(2e3);const v=xe.getState().getBattle(i);if(!v)return!0;const x=v.capperHP.get("left")?.currentHP??0,S=v.capperHP.get("right")?.currentHP??0,C=x>0&&S>0;return C||console.log(` [MultiBattleDebug] Castle destroyed after ${c} row (LHP=${x}, RHP=${S})`),C}async function r_(i,e,t,n,r){const s=e_(t,n),l=n==="left"?"right":"left",c=e_(t,l),h=`multi-${i}-${t}-${n}-${r}-${Date.now()}`,d={id:h,gameId:e,stat:t,side:n,startPosition:s,targetPosition:c,typeConfig:IA(t)},f=Gs.acquire(d);f.onCollisionCheck=m=>Zt.checkCollisions(m),Zt.registerProjectile(f),xe.getState().addProjectile(i,f),Pt.addSprite(f.sprite,"projectile",i),Ze.emit("PROJECTILE_FIRED",{side:n,opponentSide:l,quarter:1,battleId:i,gameId:e,lane:t,projectileId:h,source:"BASE",isExtraFromItem:!1}),await new Promise(m=>setTimeout(m,50)),console.log(` [QuarterSim] Animating projectile ${h} with speed multiplier: ${f.speedMultiplier}`),await f.animateToTarget(),f.sprite.visible=!1,console.log(` [Attack Node Check] Projectile ${f.id} finished - collidedWith: ${f.collidedWith||"NONE"}`),f.collidedWith?f.collidedWith==="defense"?(console.log(` [Defense Hit] Projectile ${f.id} was blocked by defense orb`),Sf.shake(i,"medium")):f.collidedWith==="projectile"&&console.log(` [Projectile Collision] Projectile ${f.id} collided with another projectile`):(console.log(` [CASTLE DAMAGE] Projectile ${f.id} hit attack node! Damaging ${l} castle HP by 1`),xe.getState().applyDamageToCapperHP(i,l,1),Sf.shake(i,"large")),$A(i,f.sprite.x,f.sprite.y,f.typeConfig.color),await Dc(150),Pt.removeSprite(f.sprite,i),xe.getState().removeProjectile(i,f.id),Zt.unregisterProjectile(f.id),Gs.release(f)}function $A(i,e,t,n){const r=Pt.getContainer(i);if(!r)return;const s=new ce,l=20;s.moveTo(-l,-l),s.lineTo(l,l),s.moveTo(l,-l),s.lineTo(-l,l),s.stroke({width:4,color:16777215,alpha:.9}),s.circle(0,0,l),s.fill({color:n,alpha:.3}),s.x=e,s.y=t,r.addChild(s),ve.timeline().to(s.scale,{x:1.5,y:1.5,duration:.2,ease:"power2.out"}).to(s,{alpha:0,duration:.3},"-=0.1").call(()=>{s.destroy()})}const Y1=({battleId:i,index:e=0})=>{const[t,n]=ye.useState(!1),[r,s]=ye.useState(""),[l,c]=ye.useState(!0),[h,d]=ye.useState([]),[f,m]=ye.useState([]),g=xe(k=>k.getBattle(i));if(console.log(` QuarterDebugControls rendered: battleId=${i}, index=${e}, position=${e===0?"LEFT":"RIGHT"}`),!g)return null;const y=g.currentQuarter,v=g.game.status||"SCHEDULED",x=g.capperHP.get("left")?.currentHP??0,S=g.capperHP.get("right")?.currentHP??0,C=g.game.awayTeam?.abbreviation||"L",b=g.game.homeTeam?.abbreviation||"R",P=async()=>{if(!t){n(!0),s("Starting game...");try{console.log(` [PreGame] Deactivating existing items for battle ${i}`),Ce.deactivateGame(i),console.log(` [PreGame] Activating equipped items for battle ${i}`);const k=xe.getState().getBattle(i),$=k?.game?.leftCapper?.equippedItems,D=k?.game?.rightCapper?.equippedItems;if(console.log(" [PreGame] Left equipped items:",$),console.log(" [PreGame] Right equipped items:",D),$)for(const Z of["slot1","slot2","slot3"]){const ie=$[Z];if(ie){const he=typeof ie=="string"?Vr(ie):ie;he&&(await Ce.activateItem(i,"left",he),console.log(` [PreGame] Activated ${he.itemId} on LEFT ${Z}`))}}if(D)for(const Z of["slot1","slot2","slot3"]){const ie=D[Z];if(ie){const he=typeof ie=="string"?Vr(ie):ie;he&&(await Ce.activateItem(i,"right",he),console.log(` [PreGame] Activated ${he.itemId} on RIGHT ${Z}`))}}console.log(" [PreGame] All items activated!"),xe.getState().updateGameStatus(i,"1Q"),xe.getState().setCurrentQuarter(i,1),s(" Simulating Q1..."),await Jy(i,1);const O=xe.getState().getBattle(i),G=O?.capperHP.get("left")?.currentHP??0,te=O?.capperHP.get("right")?.currentHP??0;if(G<=0||te<=0){xe.getState().updateGameStatus(i,"FINAL");const Z=G>0?"LEFT":"RIGHT";s(` Q1 complete - ${Z} WINS!`)}else s(" Q1 complete")}catch(k){console.error("Failed to start game:",k),s(" Failed to start game")}finally{n(!1)}}},E=async()=>{if(!t){n(!0);try{const k=y+1;if(x<=0||S<=0){s(" Game already over - castle destroyed"),n(!1);return}if(k>4){s(" Q4 complete - need OT logic"),n(!1);return}s(` Simulating Q${k}...`),xe.getState().setCurrentQuarter(i,k);const $={1:"1Q",2:"2Q",3:"3Q",4:"4Q"};xe.getState().updateGameStatus(i,$[k]),await Jy(i,k);const D=xe.getState().getBattle(i),O=D?.capperHP.get("left")?.currentHP??0,G=D?.capperHP.get("right")?.currentHP??0;if(O<=0||G<=0){xe.getState().updateGameStatus(i,"FINAL");const te=O>0?"LEFT":"RIGHT";s(` Q${k} complete - ${te} WINS!`)}else s(` Q${k} complete`)}catch(k){console.error("Failed to force quarter:",k),s(" Failed to simulate quarter")}finally{n(!1)}}},A=()=>{if(!t){n(!0),s("Resetting game...");try{xe.getState().setCurrentQuarter(i,0),xe.getState().updateGameStatus(i,"SCHEDULED"),xe.getState().initializeCapperHP(i),xe.getState().initializeDefenseDots(i),s(" Game reset to SCHEDULED")}catch(k){console.error("Failed to reset game:",k),s(" Failed to reset game")}finally{n(!1)}}},M=e===0?{left:"20px"}:{right:"20px"};return B.jsxs("div",{className:"quarter-debug-controls",style:{position:"fixed",bottom:"20px",...M,zIndex:9999},children:[B.jsxs("div",{className:"debug-header",children:[B.jsxs("h3",{children:[" ",C," vs ",b," - Control #",e+1]}),B.jsxs("div",{className:"debug-status",children:[B.jsx("span",{className:"status-badge",children:v}),B.jsxs("span",{className:"quarter-badge",children:["Q",y]})]})]}),B.jsx("div",{className:"debug-info",children:B.jsxs("div",{className:"hp-display",children:[B.jsxs("div",{className:"hp-bar left",children:[B.jsx("span",{className:"hp-label",children:"LEFT HP:"}),B.jsx("span",{className:"hp-value",children:x})]}),B.jsxs("div",{className:"hp-bar right",children:[B.jsx("span",{className:"hp-label",children:"RIGHT HP:"}),B.jsx("span",{className:"hp-value",children:S})]})]})}),B.jsxs("div",{className:"debug-actions",children:[v==="SCHEDULED"&&B.jsx("button",{className:"debug-btn start-btn",onClick:P,disabled:t,children:" Start Game ( Q1)"}),v!=="SCHEDULED"&&v!=="FINAL"&&B.jsxs("button",{className:"debug-btn force-btn",onClick:E,disabled:t||y>=4,children:[" Force Q",y+1]}),B.jsx("button",{className:"debug-btn reset-btn",onClick:A,disabled:t,children:" Reset Game"})]}),r&&B.jsx("div",{className:"debug-feedback",children:r})]})},LA=({battleId:i,game:e,status:t="scheduled",gameStartTime:n,q1EndTime:r,q2EndTime:s,halftimeEndTime:l,q3EndTime:c,q4EndTime:h,winner:d=null,autoStart:f=!1})=>{const m=ye.useRef(null),g=ye.useRef(null),y=ye.useRef(null),v=ye.useRef(!1),[x,S]=ye.useState(null),[C,b]=ye.useState(!1),P=xe($=>$.initializeBattle),E=xe($=>$.getBattle);if(ye.useEffect(()=>{const $=TA();S($),$.supported||console.error(" WebGL not supported:",$.error)},[]),ye.useEffect(()=>{if(!x?.supported||!m.current||g.current)return;let $=null,D=!0;return(async()=>{try{if(console.log(`[BattleCanvas] Initializing battle: ${i}`),$=new px,await $.init({width:_f(),height:xf(),background:658970,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),!D||!m.current){$.destroy(!0);return}$.canvas&&m.current.appendChild($.canvas);const O=new Qe;$.stage.addChild(O),y.current=O,Pt.setApp($,i),Pt.setContainer(O,i),Sf.setContainer(O,i),SA(O),qt.setContainer(O,i),P(i,e),b(!0),await qt.addCastle(i,{id:`${i}-left`,capperId:e.leftCapper.id,capperName:e.leftCapper.name,capperRank:"KNIGHT",capperLevel:e.leftCapper.level,position:it.getCastleBoxPosition("left"),maxHP:20,currentHP:20,scale:.25,boxWidth:140,side:"left"}),await qt.addCastle(i,{id:`${i}-right`,capperId:e.rightCapper.id,capperName:e.rightCapper.name,capperRank:"KNIGHT",capperLevel:e.rightCapper.level,position:it.getCastleBoxPosition("right"),maxHP:20,currentHP:20,scale:.25,boxWidth:140,side:"right"}),g.current=$,console.log(` [BattleCanvas] Battle initialized: ${i}`)}catch(O){console.error(` [BattleCanvas] Failed to initialize battle ${i}:`,O)}})(),()=>{if(D=!1,console.log(`[BattleCanvas] Cleaning up battle: ${i}`),qt.clearBattle(i),Pt.clearBattle(i),$)try{$.destroy(!0)}catch(O){console.warn("Error destroying PixiJS app:",O)}g.current=null,y.current=null}},[x,i,P]),ye.useEffect(()=>{if(!y.current||!C)return;const $=E(i);if(!$)return;const D=y.current;D.children.filter(O=>O.label==="defense-dot").forEach(O=>D.removeChild(O)),$.defenseDots.forEach(O=>{O.sprite.label="defense-dot",(O.alive||O.sprite.visible)&&D.addChild(O.sprite)}),D.children.filter(O=>O.label==="projectile").forEach(O=>D.removeChild(O)),$.projectiles.forEach(O=>{O.sprite.label="projectile",O.active&&D.addChild(O.sprite)})},[i,E,C]),ye.useEffect(()=>{f&&C&&(v.current||(v.current=!0,console.log(` [BattleCanvas] Auto-starting simulation for battle ${i}`),DA(i).catch($=>{console.error(`[BattleCanvas] Debug battle simulation failed for ${i}:`,$)})))},[i,f,C]),ye.useEffect(()=>{if(!y.current||!C)return;const $=y.current,D=_f(),O=xf();e.rightCapper&&e.rightCapper.id,Xy($,{status:t,gameStartTime:n??null,q1EndTime:r??null,q2EndTime:s??null,halftimeEndTime:l??null,q3EndTime:c??null,q4EndTime:h??null,canvasWidth:D,canvasHeight:O});const G=setInterval(()=>{Xy($,{status:t,gameStartTime:n??null,q1EndTime:r??null,q2EndTime:s??null,halftimeEndTime:l??null,q3EndTime:c??null,q4EndTime:h??null,canvasWidth:D,canvasHeight:O})},1e3);return()=>clearInterval(G)},[t,n,r,s,l,c,h,d,C,e.rightCapper]),ye.useEffect(()=>{if(!y.current||!C)return;y.current;const $=xe.getState().getBattle(i);$?.currentQuarter,$?.isBattleInProgress,$?.completedQuarters},[i,e.status,n,r,s,c,h,C]),x&&!x.supported)return B.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px] bg-slate-950 text-white p-8 rounded-lg",children:[B.jsx("div",{className:"text-6xl mb-4",children:""}),B.jsx("h2",{className:"text-2xl font-bold text-red-500 mb-2",children:"WebGL Not Supported"}),B.jsx("p",{className:"text-gray-400 text-center max-w-md",children:x.error})]});const A=typeof window<"u"&&new URLSearchParams(window.location.search).get("debug")==="1",[M,k]=ye.useState(A);return B.jsxs("div",{className:"relative w-full h-full",children:[B.jsx("div",{ref:m,className:"flex justify-center items-center w-full h-full"}),B.jsx("button",{onClick:()=>k(!M),style:{position:"fixed",top:"20px",right:"20px",background:M?"linear-gradient(135deg, #4ecdc4 0%, #44a8a0 100%)":"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)",color:"#fff",border:"2px solid #fff",borderRadius:"8px",padding:"10px 20px",fontSize:"14px",fontWeight:"700",cursor:"pointer",zIndex:1e4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",transition:"all 0.2s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseEnter:$=>{$.currentTarget.style.transform="translateY(-2px)",$.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.5)"},onMouseLeave:$=>{$.currentTarget.style.transform="translateY(0)",$.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.4)"},children:M?" DEBUG ON":" DEBUG"}),M&&B.jsx(Y1,{battleId:i})]})};var i_=g_();const BA=({game:i,gameStartTime:e,q1EndTime:t,q2EndTime:n,q3EndTime:r,q4EndTime:s})=>{const[l,c]=ye.useState(!1),[h,d]=ye.useState(!1),[f,m]=ye.useState({top:0,left:0}),[g,y]=ye.useState({top:0,left:0}),v=ye.useRef(null),x=ye.useRef(null),[S,C]=ye.useState({main:"SCHEDULED"}),P=xe(U=>U.getBattle)(i.id),E=P?.currentQuarter??0,A=P?.isBattleInProgress??!1,M=P?.completedQuarters??[];let k=null;E===1&&t?k=t:E===2&&n?k=n:E===3&&r?k=r:E===4&&s&&(k=s);const $=i.leftCapper.teamRecords.find(U=>U.teamId===i.leftTeam.id),D=i.rightCapper.teamRecords.find(U=>U.teamId===i.rightTeam.id),O=yf(i.leftCapper,i.leftTeam.id),G=yf(i.rightCapper,i.rightTeam.id),te=gf(O),Z=gf(G),ie=i.spread||0,he=-ie,V=i.leftScore||0,Q=i.rightScore||0;ye.useEffect(()=>{const U=()=>{if(A&&E){C({main:`Q${E}`,subtitle:"In Progress",subtitleColor:"#ff9f43"});return}const R=i.status||"SCHEDULED";switch(R){case"SCHEDULED":if(e){const J=X(e);C(J?{main:J,subtitleColor:"#4ecdc4"}:{main:"Starting Soon"})}else C({main:"Starting Soon"});break;case"1Q":case"2Q":case"3Q":case"4Q":const N=parseInt(R[0]);if(k){const J=X(k);C(J?{main:`Q${N}`,subtitle:J,subtitleColor:"#4ecdc4"}:{main:`Q${N}`})}else C({main:`Q${N}`});break;case"OT":case"OT2":case"OT3":case"OT4":C({main:R});break;case"FINAL":C({main:"FINAL"});break;default:C({main:R})}};U();const W=setInterval(U,1e3);return()=>clearInterval(W)},[i.status,e,E,k,A,M]);const X=U=>{const W=Date.now(),N=new Date(U).getTime()-W;if(N<=0)return null;const J=Math.floor(N/(1e3*60*60)),ne=Math.floor(N%(1e3*60*60)/(1e3*60)),re=Math.floor(N%(1e3*60)/1e3);return J>0?`${J}h ${ne}m`:ne>0?`${ne}m ${re}s`:`${re}s`};return B.jsxs("div",{className:"game-info-bar",children:[B.jsxs("div",{className:"capper-section left",children:[B.jsx("div",{className:"capper-icon",children:B.jsx("div",{className:"icon-circle",children:i.leftCapper.leaderboardRank})}),B.jsx("div",{className:"capper-name",children:i.leftCapper.name}),B.jsxs("div",{className:"pick-box",style:{borderColor:i.leftTeam.colorHex,boxShadow:`0 0 10px ${i.leftTeam.colorHex}80`},children:[B.jsx("span",{className:"pick-team",children:i.leftTeam.abbreviation}),B.jsxs("span",{className:"pick-spread",style:{color:i.leftTeam.colorHex},children:[ie>0?"+":"",ie]})]}),B.jsx("div",{className:"units-box",style:{borderColor:i.leftTeam.colorHex,boxShadow:`0 0 10px ${i.leftTeam.colorHex}80`},ref:v,onMouseEnter:U=>{const W=U.currentTarget.getBoundingClientRect();m({top:W.top-8,left:W.left+W.width/2}),c(!0)},onMouseLeave:()=>c(!1),children:B.jsxs("span",{className:"units-value",style:{color:i.leftTeam.colorHex},children:[O>0?"+":"",O.toFixed(1)]})}),l&&i_.createPortal(B.jsxs("div",{className:"units-tooltip",style:{top:`${f.top}px`,left:`${f.left}px`},children:[B.jsx("div",{children:B.jsxs("strong",{children:[i.leftCapper.name,"'s ",i.leftTeam.abbreviation," Spread Record"]})}),B.jsxs("div",{children:[$?.wins||0,"W - ",$?.losses||0,"L - ",$?.pushes||0,"P"]}),B.jsxs("div",{children:[O>0?"+":"",O.toFixed(1)," units  3 = ",B.jsxs("strong",{children:[te," defense orbs"]})]})]}),document.body)]}),B.jsxs("div",{className:"score-section",children:[B.jsxs("div",{className:"game-info",children:[i.gameDate||"TBD"," | ",i.gameTime||""]}),B.jsxs("div",{className:"team-score",children:[B.jsx("span",{className:"team-abbr",children:i.leftTeam.abbreviation}),B.jsx("span",{className:"score-value",children:V})]}),B.jsxs("div",{className:"game-status-dynamic",children:[B.jsx("div",{className:"status-main",children:S.main}),S.subtitle&&B.jsx("div",{className:"status-subtitle",style:{color:S.subtitleColor||"#4ecdc4"},children:S.subtitle})]}),B.jsxs("div",{className:"team-score",children:[B.jsx("span",{className:"score-value",children:Q}),B.jsx("span",{className:"team-abbr",children:i.rightTeam.abbreviation})]})]}),B.jsxs("div",{className:"capper-section right",children:[B.jsx("div",{className:"units-box",style:{borderColor:i.rightTeam.colorHex,boxShadow:`0 0 10px ${i.rightTeam.colorHex}80`},ref:x,onMouseEnter:U=>{const W=U.currentTarget.getBoundingClientRect();y({top:W.top-8,left:W.left+W.width/2}),d(!0)},onMouseLeave:()=>d(!1),children:B.jsxs("span",{className:"units-value",style:{color:i.rightTeam.colorHex},children:[G>0?"+":"",G.toFixed(1)]})}),h&&i_.createPortal(B.jsxs("div",{className:"units-tooltip",style:{top:`${g.top}px`,left:`${g.left}px`},children:[B.jsx("div",{children:B.jsxs("strong",{children:[i.rightCapper.name,"'s ",i.rightTeam.abbreviation," Spread Record"]})}),B.jsxs("div",{children:[D?.wins||0,"W - ",D?.losses||0,"L - ",D?.pushes||0,"P"]}),B.jsxs("div",{children:[G>0?"+":"",G.toFixed(1)," units  3 = ",B.jsxs("strong",{children:[Z," defense orbs"]})]})]}),document.body),B.jsxs("div",{className:"pick-box",style:{borderColor:i.rightTeam.colorHex,boxShadow:`0 0 10px ${i.rightTeam.colorHex}80`},children:[B.jsx("span",{className:"pick-team",children:i.rightTeam.abbreviation}),B.jsxs("span",{className:"pick-spread",style:{color:i.rightTeam.colorHex},children:[he>0?"+":"",he]})]}),B.jsx("div",{className:"capper-name",children:i.rightCapper.name}),B.jsx("div",{className:"capper-icon",children:B.jsx("div",{className:"icon-circle",children:i.rightCapper.leaderboardRank})})]})]})};function FA(i){switch(i){case"Masterwork":return"#FFD700";case"Honed":return"#9370DB";case"Balanced":return"#4169E1";case"Warped":return"#808080";default:return"#FFFFFF"}}function OA(i,e){if(!i.rollRanges||!e)return"Balanced";const t=Object.keys(i.rollRanges);let n=0,r=0;for(const l of t){const c=i.rollRanges[l],h=e[l];if(h!==void 0){const d=c.max-c.min,f=h-c.min;n+=f,r+=d}}const s=r>0?n/r*100:50;return s>=90?"Masterwork":s>=65?"Honed":s>=35?"Balanced":"Warped"}const X1=({item:i,rolls:e,quality:t})=>{const n=t||(e?OA(i,e):"Balanced"),r=FA(n);console.log(" [ItemTooltip] Rendering tooltip:",{item:i.name,quality:n,rolls:e});const s=(l,c,h)=>{const d=c===h.max;switch(l){case"startShieldHp":return{label:"Shield Strength",prefix:d?" ":""};case"hpPerDestroyedOrb":return{label:"Shield Regeneration per Orb Destroyed",prefix:"+"};case"ptsThreshold":return{label:"Pts Threshold",prefix:"+"};case"bonusProjectiles":return{label:"Bonus Projectiles",prefix:"+"};case"ptsSpeedBoost":return{label:"Projectile Speed for PTS stat row",prefix:"+"};case"bonusStatSpeedBoost":const f=["REB","AST","STL","3PT"],m=e?.bonusStat||0;return{label:`Projectile Speed for ${f[m]} stat row`,prefix:"+"};case"bonusStat":return{label:"",prefix:""};default:return{label:l.replace(/([A-Z])/g," $1").replace(/^./,v=>v.toUpperCase()).trim(),prefix:"+"}}};return B.jsxs("div",{className:"item-tooltip","data-quality":n,children:[B.jsx("div",{className:"tooltip-name",style:{color:r},children:i.name}),B.jsxs("div",{className:"tooltip-quality",style:{color:r},children:[n," ",i.slot.charAt(0).toUpperCase()+i.slot.slice(1)]}),B.jsx("div",{className:"tooltip-divider"}),B.jsxs("div",{className:"tooltip-team",children:[i.icon," ",i.teamName]}),B.jsx("div",{className:"tooltip-divider"}),i.rollRanges&&e&&B.jsx("div",{className:"tooltip-stats",children:Object.entries(i.rollRanges).map(([l,c])=>{const h=e[l],d=h===c.max,f=h===c.min,{label:m,prefix:g}=s(l,h,c);if(l==="bonusStat"||!m)return null;const y=l==="ptsSpeedBoost"||l==="bonusStatSpeedBoost"?"%":"";return B.jsxs("div",{className:"tooltip-stat-bullet",children:[B.jsx("span",{className:"bullet",children:""}),B.jsxs("span",{className:"stat-text",children:[B.jsxs("span",{className:`stat-value ${d?"max-roll":f?"min-roll":""}`,children:[g,h,y]})," ",m,B.jsxs("span",{className:"stat-range",children:[" (",c.min,y,"-",c.max,y,")"]})]})]},l)})}),B.jsx("div",{className:"tooltip-divider"}),B.jsx("div",{className:"tooltip-flavor",children:i.description}),n==="Masterwork"&&B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"tooltip-divider-thin"}),B.jsxs("div",{className:"tooltip-socket",children:[B.jsx("span",{className:"socket-icon",children:""})," Empty Socket"]})]}),B.jsx("div",{className:"tooltip-divider-thin"}),B.jsxs("div",{className:"tooltip-footer",children:[B.jsx("div",{className:"tooltip-footer-item",children:"Item Level: 1"}),B.jsx("div",{className:"tooltip-footer-item",children:"Requires Level: 1"})]})]})},NA={[js.id]:js,[ti.id]:ti,[ni.id]:ni,[Vs.id]:Vs,[qs.id]:qs},HA=i=>i&&NA[i]||null,s_=({battleId:i,side:e,onSlotClick:t})=>{const[n,r]=ye.useState(!1),[s,l]=ye.useState(null),c=xe(C=>C.getBattle(i)),d=(c?.game.status||"SCHEDULED")==="SCHEDULED",f=e==="left"?c?.game.leftCapper.equippedItems||{slot1:null,slot2:null,slot3:null}:c?.game.rightCapper.equippedItems||{slot1:null,slot2:null,slot3:null};ye.useEffect(()=>{const C=b=>{b.detail.side===e&&(console.log(` Fire Orb pulsing on ${e} side!`),r(!0),setTimeout(()=>r(!1),2e3))};return window.addEventListener("fire-orb-activated",C),()=>window.removeEventListener("fire-orb-activated",C)},[e]);const m=[{num:1,type:"DEFENSE",icon:"",slotKey:"slot1"},{num:2,type:"POWER",icon:"",slotKey:"slot2"},{num:3,type:"WEAPON",icon:"",slotKey:"slot3"}],g=C=>{console.log(" Slot clicked:",{battleId:i,side:e,slotNum:C,isPreGame:d,hasCallback:!!t}),d&&t?t(e,C):d?t||console.log(" No onSlotClick callback provided"):console.log(" Cannot change items - game already started")},y=(C,b,P)=>{const E=C.currentTarget.getBoundingClientRect();l({item:b,rolls:P.rolls,quality:P.qualityTier,x:E.right+10,y:E.top})},v=()=>{l(null)},x=()=>B.jsxs("svg",{width:"45",height:"45",viewBox:"0 0 45 45",style:{filter:"drop-shadow(0 0 8px rgba(59, 130, 246, 0.6))",display:"block",margin:"0 auto"},children:[B.jsx("circle",{cx:"22.5",cy:"22.5",r:"15",fill:"rgba(59, 130, 246, 0.2)"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"13",fill:"rgba(96, 165, 250, 0.3)"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"12",fill:"rgba(30, 58, 138, 0.4)",stroke:"rgba(96, 165, 250, 1.0)",strokeWidth:"2.5"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"9",fill:"none",stroke:"rgba(147, 197, 253, 0.8)",strokeWidth:"1.5"}),B.jsx("path",{d:"M 22.5 15.5 L 27.5 17.5 L 27.5 25.5 L 22.5 30.5 L 17.5 25.5 L 17.5 17.5 Z",fill:"rgba(255, 255, 255, 0.95)",stroke:"rgba(59, 130, 246, 1.0)",strokeWidth:"1"}),B.jsx("rect",{x:"21.7",y:"17.5",width:"1.6",height:"10",fill:"rgba(59, 130, 246, 0.8)"}),B.jsx("rect",{x:"19.5",y:"21.5",width:"6",height:"1.6",fill:"rgba(59, 130, 246, 0.8)"}),B.jsx("circle",{cx:"19.5",cy:"18.5",r:"2.5",fill:"rgba(255, 255, 255, 0.6)"}),B.jsx("circle",{cx:"26.5",cy:"18.5",r:"1.5",fill:"rgba(147, 197, 253, 0.9)"})]}),S=()=>B.jsxs("svg",{width:"45",height:"45",viewBox:"0 0 45 45",style:{filter:"drop-shadow(0 0 8px rgba(255, 99, 71, 0.6))",display:"block",margin:"0 auto"},children:[B.jsx("circle",{cx:"22.5",cy:"22.5",r:"15",fill:"rgba(255, 69, 0, 0.3)"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"13",fill:"rgba(255, 99, 71, 0.4)"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"12",fill:"rgba(220, 20, 60, 0.5)",stroke:"rgba(255, 99, 71, 1.0)",strokeWidth:"2.5"}),B.jsx("circle",{cx:"22.5",cy:"22.5",r:"9",fill:"none",stroke:"rgba(255, 165, 0, 0.8)",strokeWidth:"1.5"}),B.jsx("path",{d:"M 22.5 16.5 Q 24.5 18.5 25.5 20.5 Q 26.5 22.5 25.5 24.5 Q 26.5 26.5 24.5 28.5 Q 23.5 29.5 22.5 30.5 Q 21.5 29.5 20.5 28.5 Q 18.5 26.5 19.5 24.5 Q 18.5 22.5 19.5 20.5 Q 20.5 18.5 22.5 16.5 Z",fill:"rgba(255, 215, 0, 0.95)",stroke:"rgba(255, 165, 0, 1.0)",strokeWidth:"0.5"}),B.jsx("circle",{cx:"19.5",cy:"19.5",r:"2.5",fill:"rgba(255, 255, 255, 0.7)"}),B.jsx("circle",{cx:"26.5",cy:"18.5",r:"1.5",fill:"rgba(255, 215, 0, 0.9)"}),B.jsx("circle",{cx:"25.5",cy:"26.5",r:"1.2",fill:"rgba(255, 165, 0, 0.8)"})]});return B.jsxs("div",{className:`inventory-bar ${e}`,children:[m.map(C=>{const b=f[C.slotKey],P=typeof b=="object"?b:null,E=typeof b=="string"?b:P?.itemId||null,A=E?HA(E):null,M=!A,$=E==="fire-orb"&&n;return B.jsx("div",{className:`inventory-slot ${M?"inventory-slot-empty":"inventory-slot-equipped"} ${d?"inventory-slot-clickable":""}`,onClick:()=>g(C.num),onMouseEnter:D=>{!M&&A&&P&&y(D,A,P)},onMouseLeave:v,style:{cursor:d?"pointer":"default"},children:M?B.jsx("div",{className:"slot-icon-empty",children:C.icon}):B.jsx("div",{className:`slot-icon-equipped ${$?"fire-orb-pulsing":""}`,children:A.id==="blue-orb-shield"?x():A.id==="fire-orb"?S():A.icon})},C.num)}),s&&B.jsx("div",{style:{position:"fixed",left:`${s.x}px`,top:`${s.y}px`,zIndex:10001,pointerEvents:"none"},children:B.jsx(X1,{item:s.item,rolls:s.rolls,quality:s.quality})})]})},ks=[],zA=console.log;console.log=(...i)=>{zA(...i);const e=i.map(r=>typeof r=="string"?r:typeof r=="object"?JSON.stringify(r,null,2):String(r)).join(" "),t=["","","","","","","","","","","","","",""],n=["[ItemEffectRegistry]","[Shortsword]","[IronmanArmor]","[PreGameItemSelector]","activateItem","registerEffect"];(t.some(r=>e.includes(r))||n.some(r=>e.includes(r)))&&(ks.push({timestamp:Date.now(),message:e}),ks.length>200&&ks.shift())};function WA({battleId:i}){const[e,t]=ye.useState(!1),n=xe(s=>s.getBattle),r=async()=>{try{const s=[];s.push("=".repeat(80)),s.push("BATTLE BETS COMPREHENSIVE DEBUG REPORT"),s.push("=".repeat(80)),s.push(`Generated: ${new Date().toISOString()}`),s.push(`Battle ID: ${i}`),s.push(`User Agent: ${navigator.userAgent}`),s.push(`Current URL: ${window.location.href}`),s.push("=".repeat(80)),s.push(""),s.push(`
`+"=".repeat(80)),s.push("BUNDLE VERSION CHECK"),s.push("=".repeat(80));const l=Array.from(document.querySelectorAll('script[src*="main-"]'));l.length>0?l.forEach(g=>{s.push(`Loaded bundle: ${g.src}`)}):s.push(" No main bundle script found!"),s.push(""),console.log(" Starting debug report generation..."),s.push(`
`+"=".repeat(80)),s.push("BATTLE STATE (from multiGameStore)"),s.push("=".repeat(80));const c=n(i);c?(s.push(`Current Quarter: ${c.currentQuarter}`),s.push(`
Capper HP:`),c.capperHP.forEach((g,y)=>{s.push(`  ${y}: ${g.currentHP}/${g.maxHP}`)}),s.push(`
Active Projectiles: ${c.projectiles.length}`),s.push(`Defense Dots: ${c.defenseDots.size} stat rows`)):s.push(" Battle not found in store!"),s.push(`
`+"=".repeat(80)),s.push("CASTLE MANAGER STATE"),s.push("=".repeat(80));const h=qt.getAllCastles(i);s.push(`Castles found: ${h.length}`),h.forEach(g=>{s.push(`
Castle ID: ${g.id}`),s.push(`  Current HP: ${g.currentHP}/${g.maxHP}`),s.push(`  Side: ${g.side}`),s.push(`  Destroyed: ${g.isDestroyed}`)}),s.push(`
`+"=".repeat(80)),s.push("COLLISION MANAGER STATE"),s.push("=".repeat(80));const d=Zt.getDebugSnapshot(i);s.push(d),s.push(`
`+"=".repeat(80)),s.push("ITEM SYSTEM STATE"),s.push("=".repeat(80));try{console.log(" Getting active items...");const g=Ce.getActiveItems();console.log(" Active items:",g);const y=g.filter(v=>v.gameId===i);s.push(`Active items for this battle: ${y.length}`),y.forEach(v=>{s.push(`
Item Instance: ${v.instanceId}`),s.push(`  Item ID: ${v.itemId}`),s.push(`  Side: ${v.side}`),s.push(`  Quality: ${v.qualityTier}`),s.push(`  Rolls: ${JSON.stringify(v.rolls)}`),s.push(`  Counters: ${JSON.stringify(Array.from(v.counters.entries()))}`)})}catch(g){s.push(` Error getting active items: ${g}`),console.error("Error getting active items:",g)}try{s.push(`
`+"-".repeat(80)),s.push("SHIELD STATES (CastleHealthSystem)"),s.push("-".repeat(80));const g=`${i}-left`,y=`${i}-right`;console.log(" Getting shield states...");const v=rt.getShield(g),x=rt.getShield(y);s.push(`
LEFT Castle Shield (${g}):`),v?(s.push(`  Active: ${v.isActive}`),s.push(`  HP: ${v.currentHP}/${v.maxHP}`),s.push(`  Source: ${v.source}`),s.push(`  Activation Threshold: ${v.activationThreshold}`)):s.push("  No shield"),s.push(`
RIGHT Castle Shield (${y}):`),x?(s.push(`  Active: ${x.isActive}`),s.push(`  HP: ${x.currentHP}/${x.maxHP}`),s.push(`  Source: ${x.source}`),s.push(`  Activation Threshold: ${x.activationThreshold}`)):s.push("  No shield")}catch(g){s.push(` Error getting shield states: ${g}`),console.error("Error getting shield states:",g)}try{if(s.push(`
`+"-".repeat(80)),s.push("EQUIPPED ITEMS (Battle State)"),s.push("-".repeat(80)),console.log(" Getting equipped items from battle state..."),c){const g=c.game?.leftCapper?.equippedItems,y=c.game?.rightCapper?.equippedItems;if(s.push(`
LEFT Side Equipped Items:`),g){const v=typeof g.slot1=="object"?g.slot1?.itemId:g.slot1,x=typeof g.slot2=="object"?g.slot2?.itemId:g.slot2,S=typeof g.slot3=="object"?g.slot3?.itemId:g.slot3;s.push(`  Slot 1: ${v||"empty"}`),s.push(`  Slot 2: ${x||"empty"}`),s.push(`  Slot 3: ${S||"empty"}`)}else s.push("  No equipped items (equippedItems property not initialized)");if(s.push(`
RIGHT Side Equipped Items:`),y){const v=typeof y.slot1=="object"?y.slot1?.itemId:y.slot1,x=typeof y.slot2=="object"?y.slot2?.itemId:y.slot2,S=typeof y.slot3=="object"?y.slot3?.itemId:y.slot3;s.push(`  Slot 1: ${v||"empty"}`),s.push(`  Slot 2: ${x||"empty"}`),s.push(`  Slot 3: ${S||"empty"}`)}else s.push("  No equipped items (equippedItems property not initialized)")}}catch(g){s.push(` Error getting equipped items: ${g}`),console.error("Error getting equipped items:",g)}try{s.push(`
`+"-".repeat(80)),s.push("ITEM SAVE/ACTIVATION FLOW (Captured Console Logs)"),s.push("-".repeat(80)),s.push(""),s.push("Emoji markers explained:"),s.push("   = Item save attempt (PreGameItemSelector)"),s.push("   = fetchBattles called (App.tsx - check if items preserved)"),s.push("   = Game start (QuarterDebugControls - item activation attempt)"),s.push("   = Item successfully activated"),s.push("   = DEFENSE_ORB_DESTROYED event EMITTED (CollisionManager)"),s.push("   = DEFENSE_ORB_DESTROYED event RECEIVED (Ironman Armor listener)"),s.push("   = Shield healing attempt"),s.push("   = Defense orb destroyed"),s.push("   = Projectile collision"),s.push("   = ItemEffectRegistry registration/activation"),s.push("   = Shortsword effect logs"),s.push("   = Item effect registered"),s.push("   = Calling effect function"),s.push(""),ks.length===0?(s.push(" NO LOGS CAPTURED!"),s.push(""),s.push("This means:"),s.push("  - You may not have equipped items (no  logs)"),s.push("  - You may not have started the game (no  logs)"),s.push("  - The page may need a hard refresh (Ctrl+Shift+R)"),s.push("  - The bundle may not have loaded correctly")):(s.push(` Captured ${ks.length} logs (most recent 100 shown):`),s.push(""),ks.slice(-100).forEach(y=>{const x=new Date(y.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3});s.push(`[${x}] ${y.message}`)})),s.push(""),s.push("Diagnosis:"),s.push("  - If NO  logs: Items not being saved (PreGameItemSelector issue)"),s.push("  - If  but items empty above: Save failed or cleared by fetchBattles"),s.push("  - If items present but NO  logs: Game not started properly"),s.push("  - If  but NO  logs: Item activation failed"),s.push('  - If  but "Active items: 0": Items deactivated or wrong battle ID'),s.push("  - If active items > 0 but NO  logs: Events not firing"),s.push("  - If  but NO  logs: Shield healing logic not running")}catch(g){s.push(` Error generating item flow info: ${g}`),console.error("Error generating item flow info:",g)}s.push(`
`+"=".repeat(80)),s.push("DEBUG LOGGER CAPTURED LOGS"),s.push("=".repeat(80));const f=Rt.getReport(i);s.push(f),s.push(`
`+"=".repeat(80)),s.push("END OF COMPREHENSIVE DEBUG REPORT"),s.push("=".repeat(80));const m=s.join(`
`);console.log(" Report generated, copying to clipboard..."),console.log("Report length:",m.length,"characters");try{await navigator.clipboard.writeText(m),t(!0),setTimeout(()=>t(!1),2e3),console.log(" Comprehensive debug report copied to clipboard!")}catch(g){console.warn(" Clipboard API failed, trying fallback method...",g);const y=document.createElement("textarea");y.value=m,y.style.position="fixed",y.style.opacity="0",document.body.appendChild(y),y.select();try{const v=document.execCommand("copy");if(document.body.removeChild(y),v)t(!0),setTimeout(()=>t(!1),2e3),console.log(" Debug report copied using fallback method!");else throw new Error("execCommand failed")}catch(v){throw document.body.removeChild(y),new Error(`Both clipboard methods failed: ${g}, ${v}`)}}}catch(s){console.error(" Failed to copy debug report:",s),console.error("Error details:",s);const l=s instanceof Error?s.message:String(s);alert(`Failed to copy debug report.

Error: ${l}

Try:
1. Hard refresh (Ctrl+Shift+R)
2. Check browser console
3. Grant clipboard permissions`)}};return B.jsx("button",{onClick:r,style:{position:"fixed",top:"80px",right:"20px",zIndex:9998,padding:"12px 24px",fontSize:"14px",fontWeight:"bold",borderRadius:"8px",border:"2px solid #fff",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)",transition:"all 0.2s",background:e?"linear-gradient(135deg, #16a34a 0%, #15803d 100%)":"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",color:"white"},onMouseEnter:s=>{e||(s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.5)")},onMouseLeave:s=>{e||(s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.4)")},children:e?" Copied!":" Copy Debug"})}const Md=[js,ti,ni,Vs,qs],jA=({battleId:i,onItemsChanged:e,initialSlot:t,onClose:n})=>{const r=xe(W=>W.getBattle(i)),s=xe(W=>W.updateBattle),[l,c]=ye.useState(typeof r?.game.leftCapper.equippedItems?.slot1=="object"?r.game.leftCapper.equippedItems.slot1:null),[h,d]=ye.useState(typeof r?.game.leftCapper.equippedItems?.slot2=="object"?r.game.leftCapper.equippedItems.slot2:null),[f,m]=ye.useState(typeof r?.game.leftCapper.equippedItems?.slot3=="object"?r.game.leftCapper.equippedItems.slot3:null),[g,y]=ye.useState(typeof r?.game.rightCapper.equippedItems?.slot1=="object"?r.game.rightCapper.equippedItems.slot1:null),[v,x]=ye.useState(typeof r?.game.rightCapper.equippedItems?.slot2=="object"?r.game.rightCapper.equippedItems.slot2:null),[S,C]=ye.useState(typeof r?.game.rightCapper.equippedItems?.slot3=="object"?r.game.rightCapper.equippedItems.slot3:null),[b,P]=ye.useState(t||null),[E,A]=ye.useState(null),M=()=>{if(!r){console.error(" [PreGameItemSelector] Cannot save items - battle is null!");return}console.log(" [PreGameItemSelector] Saving equipped items to battle:",{battleId:i,left:{slot1:l,slot2:h,slot3:f},right:{slot1:g,slot2:v,slot3:S}}),console.log(" [PreGameItemSelector] Current battle state BEFORE update:",{leftCapper:r.game.leftCapper.equippedItems,rightCapper:r.game.rightCapper.equippedItems}),s(i,N=>{const J={...N,game:{...N.game,leftCapper:{...N.game.leftCapper,equippedItems:{slot1:l,slot2:h,slot3:f}},rightCapper:{...N.game.rightCapper,equippedItems:{slot1:g,slot2:v,slot3:S}}}};return console.log(" [PreGameItemSelector] Updated battle state:",{leftCapper:J.game.leftCapper.equippedItems,rightCapper:J.game.rightCapper.equippedItems}),J}),setTimeout(()=>{const N=xe.getState().getBattle(i);console.log(" [PreGameItemSelector] Battle state AFTER update (verified):",{leftCapper:N?.game.leftCapper.equippedItems,rightCapper:N?.game.rightCapper.equippedItems})},100);const W=[l,h,f].filter(Boolean).map(N=>N.itemId),R=[g,v,S].filter(Boolean).map(N=>N.itemId);e(W,R)},k=W=>{if(!b)return;const{side:R,slot:N}=b,J=Md.find(fe=>fe.id===W);if(!J)return;const ne=N===1?"defense":N===2?"power":"weapon";if(J.slot!==ne){console.error(` Cannot equip ${J.name} in ${ne} slot - item is for ${J.slot} slot`),alert(`This item can only be equipped in the ${J.slot.toUpperCase()} slot!`);return}const re=G1(J);console.log(" Item rolled and selected:",{itemId:W,side:R,slot:N,rolls:re.rolls,quality:re.qualityTier}),R==="left"?(N===1&&c(re),N===2&&d(re),N===3&&m(re)):(N===1&&y(re),N===2&&x(re),N===3&&C(re)),P(null)},$=()=>{if(!b)return;const{side:W,slot:R}=b;let N=null;if(W==="left"?(R===1&&(N=l),R===2&&(N=h),R===3&&(N=f)):(R===1&&(N=g),R===2&&(N=v),R===3&&(N=S)),W==="left"?(R===1&&c(null),R===2&&d(null),R===3&&m(null)):(R===1&&y(null),R===2&&x(null),R===3&&C(null)),R===1&&(N?.itemId==="LAL_def_ironman_armor"||N?.itemId==="WAS_def_wizards_watchtower")){const J=`${i}-${W}`;console.log(` [PreGameItemSelector] Clearing defense item from ${W} side, deactivating shield`),rt.deactivateShield(J);const ne=qt.getCastle(i,J);ne&&(ne.deactivateShield(),console.log(` [PreGameItemSelector] Shield deactivated for ${W.toUpperCase()} castle`))}P(null)},D=async()=>{console.log(" [PreGameItemSelector] SAVE AND CLOSE CLICKED!"),console.log(" [PreGameItemSelector] Saving items:",{left:{slot1:l,slot2:h,slot3:f},right:{slot1:g,slot2:v,slot3:S}});try{M(),await te(),console.log(" [PreGameItemSelector] About to call activateItemEffects()..."),await ie(),console.log(" [PreGameItemSelector] activateItemEffects() completed!"),n?.()}catch(W){console.error(" [PreGameItemSelector] Error in handleSaveAndClose:",W),alert(`Error saving items: ${W}`)}},O=(W,R)=>{const N=`${i}-${W}`,J=R.rolls.startShieldHp,ne=R.itemId==="LAL_def_ironman_armor"?'AC "Ironman" Armor':"Wizard's Watchtower",re=R.itemId==="LAL_def_ironman_armor"?"":"";console.log(` [PreGameItemSelector] Activating ${ne} shield for ${W.toUpperCase()} castle with ${J} HP`),rt.activateShield(N,J,0,R.itemId);const fe=qt.getCastle(i,N);fe?(fe.activateShield({id:R.itemId,name:ne,description:"Castle shield",icon:re,shieldHP:J,shieldActivationThreshold:0}),console.log(` [PreGameItemSelector] Shield activated for ${W.toUpperCase()} castle`)):console.error(` [PreGameItemSelector] Castle not found: ${N}`)},G=(W,R)=>{const N=`${i}-${W}`,J=rt.getShield(N);if(J&&J.source===R){console.log(` [PreGameItemSelector] Deactivating shield for ${W.toUpperCase()} castle`),rt.deactivateShield(N);const ne=qt.getCastle(i,N);ne&&ne.deactivateShield()}},te=()=>{const W=l;W?.itemId==="LAL_def_ironman_armor"||W?.itemId==="WAS_def_wizards_watchtower"?O("left",W):(G("left","LAL_def_ironman_armor"),G("left","WAS_def_wizards_watchtower"));const R=g;R?.itemId==="LAL_def_ironman_armor"||R?.itemId==="WAS_def_wizards_watchtower"?O("right",R):(G("right","LAL_def_ironman_armor"),G("right","WAS_def_wizards_watchtower")),h?.itemId==="MED_pwr_knight_defender"&&Z("left"),v?.itemId==="MED_pwr_knight_defender"&&Z("right")},Z=async W=>{console.log(` [PreGameItemSelector] Spawning knight for ${W} side`);const{KnightDefender:R}=await Rs(async()=>{const{KnightDefender:Te}=await Promise.resolve().then(()=>gA);return{KnightDefender:Te}},void 0),{pixiManager:N}=await Rs(async()=>{const{pixiManager:Te}=await Promise.resolve().then(()=>nA);return{pixiManager:Te}},void 0);if(!r){console.error(" [PreGameItemSelector] No battle found");return}const ne=(W==="left"?r.game.leftTeam:r.game.rightTeam).color,re=new R({id:`knight-${i}-${W}`,gameId:i,side:W,teamColor:ne}),fe=N.getContainer(i);fe?(fe.addChild(re.sprite),console.log(` [PreGameItemSelector] Added knight sprite to container for ${W}`)):console.error(` [PreGameItemSelector] No container found for ${i}`),re.startPatrol(),console.log(` [PreGameItemSelector] Knight spawned and patrolling for ${W}!`)},ie=async()=>{console.log(" [PreGameItemSelector] ACTIVATING ITEM EFFECTS!"),console.log(" [PreGameItemSelector] Battle ID:",i);try{console.log(" [PreGameItemSelector] Deactivating existing items..."),Ce.deactivateGame(i),l&&(console.log(` [PreGameItemSelector] Activating LEFT slot 1: ${l.itemId}`),await Ce.activateItem(i,"left",l),console.log(` [PreGameItemSelector] Activated ${l.itemId} on LEFT side`)),h&&(console.log(` [PreGameItemSelector] Activating LEFT slot 2: ${h.itemId}`),await Ce.activateItem(i,"left",h),console.log(` [PreGameItemSelector] Activated ${h.itemId} on LEFT side`)),f&&(console.log(` [PreGameItemSelector] Activating LEFT slot 3: ${f.itemId}`),await Ce.activateItem(i,"left",f),console.log(` [PreGameItemSelector] Activated ${f.itemId} on LEFT side`)),g&&(console.log(` [PreGameItemSelector] Activating RIGHT slot 1: ${g.itemId}`),await Ce.activateItem(i,"right",g),console.log(` [PreGameItemSelector] Activated ${g.itemId} on RIGHT side`)),v&&(console.log(` [PreGameItemSelector] Activating RIGHT slot 2: ${v.itemId}`),await Ce.activateItem(i,"right",v),console.log(` [PreGameItemSelector] Activated ${v.itemId} on RIGHT side`)),S&&(console.log(` [PreGameItemSelector] Activating RIGHT slot 3: ${S.itemId}`),await Ce.activateItem(i,"right",S),console.log(` [PreGameItemSelector] Activated ${S.itemId} on RIGHT side`)),console.log(" [PreGameItemSelector] ALL ITEM EFFECTS ACTIVATED!")}catch(W){throw console.error(" [PreGameItemSelector] Error activating item effects:",W),W}},he=(W,R,N,J)=>{const ne=W.currentTarget.getBoundingClientRect(),re={item:R,rolls:N,quality:J,x:ne.right+10,y:ne.top};console.log(" [PreGameItemSelector] Showing tooltip:",re),A(re)},V=()=>{A(null)},Q=(W,R)=>{if(W==="left"){if(R===1)return l;if(R===2)return h;if(R===3)return f}else{if(R===1)return g;if(R===2)return v;if(R===3)return S}return null},X=W=>Md.find(R=>R.id===W)??null,U=(W,R)=>{const N=R===1?"DEFENSE":R===2?"POWER":"WEAPON",J=R===1?"":R===2?"":"",ne=Q(W,R),re=ne?X(ne.itemId):null;return B.jsx("div",{style:{padding:"12px",marginBottom:"8px",background:"rgba(255, 215, 0, 0.1)",border:"2px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},onClick:()=>P({side:W,slot:R}),onMouseEnter:fe=>{fe.currentTarget.style.background="rgba(255, 215, 0, 0.2)",fe.currentTarget.style.borderColor="rgba(255, 215, 0, 0.5)",re&&ne&&he(fe,re,ne.rolls,ne.qualityTier)},onMouseLeave:fe=>{fe.currentTarget.style.background="rgba(255, 215, 0, 0.1)",fe.currentTarget.style.borderColor="rgba(255, 215, 0, 0.3)",V()},children:B.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[B.jsx("div",{style:{fontSize:"24px"},children:J}),B.jsxs("div",{style:{flex:1},children:[B.jsxs("div",{style:{color:"#ffd700",fontWeight:"bold",marginBottom:"4px"},children:["Slot ",R,": ",N]}),B.jsx("div",{style:{color:re?"#4ecdc4":"#888",fontSize:"14px"},children:re?re.name:"Empty"})]}),B.jsx("div",{style:{color:"#ffd700",fontSize:"18px"},children:""})]})},`${W}-${R}`)};return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"item-picker-overlay",onClick:n,children:B.jsx("div",{className:"item-picker-popup",onClick:W=>W.stopPropagation(),children:b?B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"picker-header",children:[B.jsx("h3",{children:" SELECT ITEM"}),B.jsxs("p",{children:[b.side.toUpperCase()," CAPPER - Slot ",b.slot]})]}),B.jsxs("div",{className:"picker-body",children:[B.jsx("button",{className:"clear-button",onClick:$,children:" Clear Slot"}),(()=>{const W=b.slot===1?"defense":b.slot===2?"power":"weapon",R=Md.filter(N=>N.slot===W);return R.length===0?B.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"rgba(255, 255, 255, 0.5)"},children:["No ",W," items available yet"]}):R.map(N=>B.jsx("button",{className:"item-button",onClick:()=>k(N.id),children:B.jsxs("div",{className:"item-button-content",children:[B.jsx("div",{className:"item-icon-large",children:""}),B.jsxs("div",{className:"item-details",children:[B.jsx("div",{className:"item-name",children:N.name}),B.jsx("div",{className:"item-team",children:N.teamName}),B.jsx("div",{className:"item-description",children:N.description})]})]})},N.id))})()]}),B.jsxs("div",{className:"picker-footer",children:[B.jsx("button",{className:"close-button",onClick:()=>P(null),children:"Back"}),B.jsx("button",{className:"save-button",onClick:D,children:" Save & Close"})]})]}):B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"picker-header",children:[B.jsx("h3",{children:" EQUIPPED ITEMS"}),B.jsx("p",{children:"Click a slot to change items"})]}),B.jsxs("div",{className:"picker-body",children:[B.jsxs("div",{style:{marginBottom:"20px"},children:[B.jsx("h4",{style:{color:"#ffd700",marginBottom:"12px"},children:"LEFT CAPPER"}),U("left",1),U("left",2),U("left",3)]}),B.jsxs("div",{children:[B.jsx("h4",{style:{color:"#ffd700",marginBottom:"12px"},children:"RIGHT CAPPER"}),U("right",1),U("right",2),U("right",3)]})]}),B.jsx("div",{className:"picker-footer",children:B.jsx("button",{className:"save-button",onClick:D,children:" Save & Close"})})]})})}),E&&B.jsx("div",{style:{position:"fixed",left:`${E.x}px`,top:`${E.y}px`,zIndex:10001,pointerEvents:"none"},children:B.jsx(X1,{item:E.item,rolls:E.rolls,quality:E.quality})})]})};function GA(i){switch(i){case"scheduled":return"SCHEDULED";case"q1_pending":case"q1_complete":return"1Q";case"q2_pending":case"q2_complete":return"2Q";case"halftime":return"2Q";case"q3_pending":case"q3_complete":return"3Q";case"q4_pending":case"q4_complete":return"4Q";case"final":case"complete":return"FINAL";default:return"SCHEDULED"}}function o_(i){return i==="scheduled"?"UPCOMING":i==="final"||i==="complete"?"FINAL":"LIVE"}function UA(){return[{id:"test-battle-1",game_id:"test-game-1",left_capper_id:"test-capper-1",right_capper_id:"test-capper-2",left_team:"LAL",right_team:"MEM",left_hp:100,right_hp:100,spread:-4.5,status:"scheduled",created_at:new Date().toISOString(),game_start_time:new Date(Date.now()+36e5).toISOString(),left_capper:{id:"test-capper-1",name:"Test Capper 1",displayName:"TEST CAPPER 1",colorTheme:"#552583",units:15},right_capper:{id:"test-capper-2",name:"Test Capper 2",displayName:"TEST CAPPER 2",colorTheme:"#5D76A9",units:9}},{id:"test-battle-2",game_id:"test-game-2",left_capper_id:"test-capper-3",right_capper_id:"test-capper-4",left_team:"BOS",right_team:"GSW",left_hp:100,right_hp:100,spread:-2.5,status:"scheduled",created_at:new Date().toISOString(),game_start_time:new Date(Date.now()+72e5).toISOString(),left_capper:{id:"test-capper-3",name:"Test Capper 3",displayName:"TEST CAPPER 3",colorTheme:"#007A33",units:21},right_capper:{id:"test-capper-4",name:"Test Capper 4",displayName:"TEST CAPPER 4",colorTheme:"#1D428A",units:6}}]}function VA(i){return{id:i.id,leftTeam:{id:i.left_team.toLowerCase(),name:i.game?.away_team?.name||i.left_team,abbreviation:i.left_team,color:parseInt((i.left_capper?.colorTheme||"#3b82f6").replace("#",""),16),colorHex:i.left_capper?.colorTheme||"#3b82f6"},rightTeam:{id:i.right_team.toLowerCase(),name:i.game?.home_team?.name||i.right_team,abbreviation:i.right_team,color:parseInt((i.right_capper?.colorTheme||"#ef4444").replace("#",""),16),colorHex:i.right_capper?.colorTheme||"#ef4444"},leftCapper:{id:i.left_capper_id,name:i.left_capper?.displayName||i.left_capper?.name||"Unknown",favoriteTeam:{id:i.left_team.toLowerCase(),name:i.game?.away_team?.name||i.left_team,abbreviation:i.left_team,color:parseInt((i.left_capper?.colorTheme||"#3b82f6").replace("#",""),16),colorHex:i.left_capper?.colorTheme||"#3b82f6"},health:i.left_hp||100,maxHealth:100,level:1,experience:0,leaderboardRank:1,teamRecords:i.left_capper?.units?[{teamId:i.left_team.toLowerCase(),units:i.left_capper.units,wins:0,losses:0,pushes:0}]:[],equippedItems:{slot1:null,slot2:null,slot3:null}},rightCapper:{id:i.right_capper_id,name:i.right_capper?.displayName||i.right_capper?.name||"Unknown",favoriteTeam:{id:i.right_team.toLowerCase(),name:i.game?.home_team?.name||i.right_team,abbreviation:i.right_team,color:parseInt((i.right_capper?.colorTheme||"#ef4444").replace("#",""),16),colorHex:i.right_capper?.colorTheme||"#ef4444"},health:i.right_hp||100,maxHealth:100,level:1,experience:0,leaderboardRank:2,teamRecords:i.right_capper?.units?[{teamId:i.right_team.toLowerCase(),units:i.right_capper.units,wins:0,losses:0,pushes:0}]:[],equippedItems:{slot1:null,slot2:null,slot3:null}},currentQuarter:0,spread:i.spread,gameDate:i.game?.game_date||"",gameTime:"",leftScore:0,rightScore:0,status:GA(i.status),_battleData:{status:i.status,gameStartTime:i.game_start_time,q1EndTime:i.q1_end_time,q2EndTime:i.q2_end_time,halftimeEndTime:i.halftime_end_time,q3EndTime:i.q3_end_time,q4EndTime:i.q4_end_time,winner:i.winner}}}function qA(){const[i,e]=ye.useState([]),[t,n]=ye.useState(!0),[r,s]=ye.useState(null),[l,c]=ye.useState(null),[h,d]=ye.useState(!1),[f,m]=ye.useState("ALL");ye.useEffect(()=>{const x=new URLSearchParams(window.location.search),S=x.get("debug")==="1",C=x.get("testMode")==="1";d(S),C&&(console.log(" [AppV2] Test mode enabled - using fake battles"),Rt.log("Test mode enabled"))},[]);const g=async()=>{try{n(!0),s(null);const S=new URLSearchParams(window.location.search).get("testMode")==="1";let C=[];if(S)C=UA();else{const P=await fetch("/api/battle-bets/active?limit=20");if(!P.ok)throw new Error(`Failed to fetch battles: ${P.statusText}`);C=(await P.json()).battles||[]}const b=C.map(P=>VA(P));e(b),n(!1)}catch(x){console.error("[AppV2] Error fetching battles:",x),s(x instanceof Error?x.message:"Unknown error"),n(!1)}};ye.useEffect(()=>{g()},[]),ye.useEffect(()=>{const x=setInterval(()=>{g()},3e4);return()=>clearInterval(x)},[]),ye.useEffect(()=>{const x=setInterval(()=>{e(S=>S.map(C=>{const b=xe.getState().getBattle(C.id);if(!b)return C;const P=b.status;let E=C._battleData?.status||"scheduled";return P==="1Q"?E="q1_pending":P==="2Q"?E="q2_pending":P==="3Q"?E="q3_pending":P==="4Q"?E="q4_pending":P==="FINAL"&&(E="final"),E!==C._battleData?.status?{...C,status:P,_battleData:{...C._battleData,status:E}}:C}))},500);return()=>clearInterval(x)},[]);const y=ye.useMemo(()=>f==="ALL"?i:i.filter(x=>{const C=x._battleData?.status||"scheduled";return o_(C)===f}),[i,f]),v=ye.useMemo(()=>{const x={ALL:i.length,LIVE:0,UPCOMING:0,FINAL:0};return i.forEach(S=>{const b=S._battleData?.status||"scheduled",P=o_(b);x[P]++}),x},[i]);return ye.useEffect(()=>{v.LIVE>0&&f==="UPCOMING"&&(m("LIVE"),console.log(" [AppV2] Auto-switched to LIVE tab - battle started!"))},[v.LIVE]),t&&i.length===0?B.jsx("div",{className:"app",children:B.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",fontSize:"24px"},children:"Loading battles..."})}):r?B.jsx("div",{className:"app",children:B.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",gap:"20px"},children:[B.jsx("div",{style:{fontSize:"24px",color:"#ef4444"},children:"Error loading battles"}),B.jsx("div",{style:{fontSize:"16px"},children:r}),B.jsx("button",{onClick:()=>g(),style:{padding:"10px 20px",background:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Retry"})]})}):B.jsxs("div",{className:"app",style:{background:"#0a0e1a",minHeight:"100vh",padding:"20px"},children:[B.jsxs("main",{style:{maxWidth:"1400px",margin:"0 auto"},children:[B.jsx("div",{style:{display:"flex",gap:"10px",marginBottom:"30px",borderBottom:"2px solid rgba(139, 92, 246, 0.2)",paddingBottom:"10px"},children:["ALL","LIVE","UPCOMING","FINAL"].map(x=>{const S=f===x,C=v[x],b=x==="LIVE"&&C>0;return B.jsxs("button",{onClick:()=>m(x),style:{padding:"12px 24px",background:S?"rgba(139, 92, 246, 0.3)":"rgba(15, 23, 42, 0.6)",border:S?"2px solid rgba(139, 92, 246, 0.8)":"2px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",color:"white",fontSize:"16px",fontWeight:S?"bold":"normal",cursor:"pointer",transition:"all 0.2s",position:"relative",display:"flex",alignItems:"center",gap:"8px"},children:[b&&B.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#ef4444",animation:"pulse 2s infinite",boxShadow:"0 0 8px #ef4444"}}),x,B.jsx("span",{style:{background:S?"rgba(139, 92, 246, 0.8)":"rgba(139, 92, 246, 0.4)",padding:"2px 8px",borderRadius:"12px",fontSize:"14px",fontWeight:"bold"},children:C})]},x)})}),y.length===0&&B.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"rgba(255, 255, 255, 0.6)",fontSize:"18px"},children:[B.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),B.jsxs("div",{children:["No ",f.toLowerCase()," battles"]})]}),B.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"30px"},children:y.map((x,S)=>B.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.9)",border:"2px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)"},children:[B.jsx("div",{style:{display:"flex",justifyContent:"center",background:"#020617"},children:B.jsx(BA,{game:x,gameStartTime:x._battleData?.gameStartTime,q1EndTime:x._battleData?.q1EndTime,q2EndTime:x._battleData?.q2EndTime,q3EndTime:x._battleData?.q3EndTime,q4EndTime:x._battleData?.q4EndTime})}),B.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0 20px",background:"#020617"},children:B.jsxs("div",{style:{display:"flex",alignItems:"center",width:"1300px",maxWidth:"100%"},children:[B.jsx(s_,{battleId:x.id,side:"left",onSlotClick:(C,b)=>{c({battleId:x.id,side:C,slot:b})}}),B.jsx("div",{style:{width:"1170px",height:"200px",background:"#0a0e1a",display:"flex",justifyContent:"center",alignItems:"center"},children:B.jsx(LA,{battleId:x.id,game:x,status:x._battleData?.status,gameStartTime:x._battleData?.gameStartTime,q1EndTime:x._battleData?.q1EndTime,q2EndTime:x._battleData?.q2EndTime,halftimeEndTime:x._battleData?.halftimeEndTime,q3EndTime:x._battleData?.q3EndTime,q4EndTime:x._battleData?.q4EndTime,winner:x._battleData?.winner,autoStart:!1})}),B.jsx(s_,{battleId:x.id,side:"right",onSlotClick:(C,b)=>{c({battleId:x.id,side:C,slot:b})}})]})})]},x.id))}),h&&B.jsxs(B.Fragment,{children:[B.jsx(WA,{}),B.jsx(Y1,{})]}),l&&B.jsx(jA,{battleId:l.battleId,initialSlot:{side:l.side,slot:l.slot},onItemsChanged:()=>{},onClose:()=>c(null)})]}),B.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})}var YA=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,XA=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,QA=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,KA=/(^[#\.][a-z]|[a-y][a-z])/i,ZA=Math.PI/180,JA=180/Math.PI,lc=Math.sin,cc=Math.cos,En=Math.abs,yr=Math.sqrt,ek=Math.atan2,wf=1e8,a_=function(e){return typeof e=="string"},Q1=function(e){return typeof e=="number"},tk=function(e){return typeof e>"u"},nk={},rk={},$c=1e5,K1=function(e){return Math.round((e+wf)%1*$c)/$c||(e<0?0:1)},De=function(e){return Math.round(e*$c)/$c||0},l_=function(e){return Math.round(e*1e10)/1e10||0},c_=function(e,t,n,r){var s=e[t],l=r===1?6:Cf(s,n,r);if((l||!r)&&l+n+2<s.length)return e.splice(t,0,s.slice(0,n+l+2)),s.splice(0,n+l),1},Z1=function(e,t,n){var r=e.length,s=~~(n*r);if(e[s]>t){for(;--s&&e[s]>t;);s<0&&(s=0)}else for(;e[++s]<t&&s<r;);return s<r?s:r-1},ik=function(e,t){var n=e.length;for(e.reverse();n--;)e[n].reversed||ak(e[n])},u_=function(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t},sk=function(e,t){var n=e.length,r=e[n-1]||[],s=r.length;n&&t[0]===r[s-2]&&t[1]===r[s-1]&&(t=r.concat(t.slice(2)),n--),e[n]=t};function yc(i){i=a_(i)&&KA.test(i)&&document.querySelector(i)||i;var e=i.getAttribute?i:0,t;return e&&(i=i.getAttribute("d"))?(e._gsPath||(e._gsPath={}),t=e._gsPath[i],t&&!t._dirty?t:e._gsPath[i]=Lc(i)):i?a_(i)?Lc(i):Q1(i[0])?[i]:i:console.warn("Expecting a <path> element or an SVG path data string")}function ok(i){for(var e=[],t=0;t<i.length;t++)e[t]=u_(i[t],i[t].slice(0));return u_(i,e)}function ak(i){var e=0,t;for(i.reverse();e<i.length;e+=2)t=i[e],i[e]=i[e+1],i[e+1]=t;i.reversed=!i.reversed}var lk=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),s=r.length,l;for(t=","+t+",";--s>-1;)l=r[s].nodeName.toLowerCase(),t.indexOf(","+l+",")<0&&n.setAttributeNS(null,l,r[s].nodeValue);return n},ck={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},uk=function(e,t){for(var n=t?t.split(","):[],r={},s=n.length;--s>-1;)r[n[s]]=+e.getAttribute(n[s])||0;return r};function hk(i,e){var t=i.tagName.toLowerCase(),n=.552284749831,r,s,l,c,h,d,f,m,g,y,v,x,S,C,b,P,E,A,M,k,$,D;return t==="path"||!i.getBBox?i:(d=lk(i,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),D=uk(i,ck[t]),t==="rect"?(c=D.rx,h=D.ry||c,s=D.x,l=D.y,y=D.width-c*2,v=D.height-h*2,c||h?(x=s+c*(1-n),S=s+c,C=S+y,b=C+c*n,P=C+c,E=l+h*(1-n),A=l+h,M=A+v,k=M+h*n,$=M+h,r="M"+P+","+A+" V"+M+" C"+[P,k,b,$,C,$,C-(C-S)/3,$,S+(C-S)/3,$,S,$,x,$,s,k,s,M,s,M-(M-A)/3,s,A+(M-A)/3,s,A,s,E,x,l,S,l,S+(C-S)/3,l,C-(C-S)/3,l,C,l,b,l,P,E,P,A].join(",")+"z"):r="M"+(s+y)+","+l+" v"+v+" h"+-y+" v"+-v+" h"+y+"z"):t==="circle"||t==="ellipse"?(t==="circle"?(c=h=D.r,m=c*n):(c=D.rx,h=D.ry,m=h*n),s=D.cx,l=D.cy,f=c*n,r="M"+(s+c)+","+l+" C"+[s+c,l+m,s+f,l+h,s,l+h,s-f,l+h,s-c,l+m,s-c,l,s-c,l-m,s-f,l-h,s,l-h,s+f,l-h,s+c,l-m,s+c,l].join(",")+"z"):t==="line"?r="M"+D.x1+","+D.y1+" L"+D.x2+","+D.y2:(t==="polyline"||t==="polygon")&&(g=(i.getAttribute("points")+"").match(XA)||[],s=g.shift(),l=g.shift(),r="M"+s+","+l+" L"+g.join(","),t==="polygon"&&(r+=","+s+","+l+"z")),d.setAttribute("d",tv(d._gsRawPath=Lc(r))),e&&i.parentNode&&(i.parentNode.insertBefore(d,i),i.parentNode.removeChild(i)),d)}function J1(i,e,t){var n=i[e],r=i[e+2],s=i[e+4],l;return n+=(r-n)*t,r+=(s-r)*t,n+=(r-n)*t,l=r+(s+(i[e+6]-s)*t-r)*t-n,n=i[e+1],r=i[e+3],s=i[e+5],n+=(r-n)*t,r+=(s-r)*t,n+=(r-n)*t,De(ek(r+(s+(i[e+7]-s)*t-r)*t-n,l)*JA)}function ev(i,e,t){t=tk(t)?1:l_(t)||0,e=l_(e)||0;var n=Math.max(0,~~(En(t-e)-1e-8)),r=ok(i);if(e>t&&(e=1-e,t=1-t,ik(r),r.totalLength=0),e<0||t<0){var s=Math.abs(~~Math.min(e,t))+1;e+=s,t+=s}r.totalLength||Di(r);var l=t>1,c=h_(r,e,nk,!0),h=h_(r,t,rk),d=h.segment,f=c.segment,m=h.segIndex,g=c.segIndex,y=h.i,v=c.i,x=g===m,S=y===v&&x,C,b,P,E,A,M,k,$;if(l||n){for(C=m<g||x&&y<v||S&&h.t<c.t,c_(r,g,v,c.t)&&(g++,C||(m++,S?(h.t=(h.t-c.t)/(1-c.t),y=0):x&&(y-=v))),Math.abs(1-(t-e))<1e-5?m=g-1:!h.t&&m?m--:c_(r,m,y,h.t)&&C&&g++,c.t===1&&(g=(g+1)%r.length),A=[],M=r.length,k=1+M*n,$=g,k+=(M-g+m)%M,E=0;E<k;E++)sk(A,r[$++%M]);r=A}else if(P=h.t===1?6:Cf(d,y,h.t),e!==t)for(b=Cf(f,v,S?c.t/h.t:c.t),x&&(P+=b),d.splice(y+P+2),(b||v)&&f.splice(0,v+b),E=r.length;E--;)(E<g||E>m)&&r.splice(E,1);else d.angle=J1(d,y+P,0),y+=P,c=d[y],h=d[y+1],d.length=d.totalLength=0,d.totalPoints=r.totalPoints=8,d.push(c,h,c,h,c,h,c,h);return r.totalLength=0,r}function dk(i,e,t){e=e||0,i.samples||(i.samples=[],i.lookup=[]);var n=~~i.resolution||12,r=1/n,s=i.length,l=i[e],c=i[e+1],h=e?e/6*n:0,d=i.samples,f=i.lookup,m=(e?i.minLength:wf)||wf,g=d[h+t*n-1],y=e?d[h-1]:0,v,x,S,C,b,P,E,A,M,k,$,D,O,G,te,Z,ie;for(d.length=f.length=0,x=e+2;x<s;x+=6){if(S=i[x+4]-l,C=i[x+2]-l,b=i[x]-l,A=i[x+5]-c,M=i[x+3]-c,k=i[x+1]-c,P=E=$=D=0,En(S)<.01&&En(A)<.01&&En(b)+En(k)<.01)i.length>8&&(i.splice(x,6),x-=6,s-=6);else for(v=1;v<=n;v++)G=r*v,O=1-G,P=E-(E=(G*G*S+3*O*(G*C+O*b))*G),$=D-(D=(G*G*A+3*O*(G*M+O*k))*G),Z=yr($*$+P*P),Z<m&&(m=Z),y+=Z,d[h++]=y;l+=S,c+=A}if(g)for(g-=y;h<d.length;h++)d[h]+=g;if(d.length&&m){if(i.totalLength=ie=d[d.length-1]||0,i.minLength=m,ie/m<9999)for(Z=te=0,v=0;v<ie;v+=m)f[Z++]=d[te]<v?++te:te}else i.totalLength=d[0]=0;return e?y-d[e/2-1]:y}function Di(i,e){var t,n,r;for(r=t=n=0;r<i.length;r++)i[r].resolution=~~e||12,n+=i[r].length,t+=dk(i[r]);return i.totalPoints=n,i.totalLength=t,i}function Cf(i,e,t){if(t<=0||t>=1)return 0;var n=i[e],r=i[e+1],s=i[e+2],l=i[e+3],c=i[e+4],h=i[e+5],d=i[e+6],f=i[e+7],m=n+(s-n)*t,g=s+(c-s)*t,y=r+(l-r)*t,v=l+(h-l)*t,x=m+(g-m)*t,S=y+(v-y)*t,C=c+(d-c)*t,b=h+(f-h)*t;return g+=(C-g)*t,v+=(b-v)*t,i.splice(e+2,4,De(m),De(y),De(x),De(S),De(x+(g-x)*t),De(S+(v-S)*t),De(g),De(v),De(C),De(b)),i.samples&&i.samples.splice(e/6*i.resolution|0,0,0,0,0,0,0,0),6}function h_(i,e,t,n){t=t||{},i.totalLength||Di(i),(e<0||e>1)&&(e=K1(e));var r=0,s=i[0],l,c,h,d,f,m,g;if(!e)g=m=r=0,s=i[0];else if(e===1)g=1,r=i.length-1,s=i[r],m=s.length-8;else{if(i.length>1){for(h=i.totalLength*e,f=m=0;(f+=i[m++].totalLength)<h;)r=m;s=i[r],d=f-s.totalLength,e=(h-d)/(f-d)||0}l=s.samples,c=s.resolution,h=s.totalLength*e,m=s.lookup.length?s.lookup[~~(h/s.minLength)]||0:Z1(l,h,e),d=m?l[m-1]:0,f=l[m],f<h&&(d=f,f=l[++m]),g=1/c*((h-d)/(f-d)+m%c),m=~~(m/c)*6,n&&g===1&&(m+6<s.length?(m+=6,g=0):r+1<i.length&&(m=g=0,s=i[++r]))}return t.t=g,t.i=m,t.path=i,t.segment=s,t.segIndex=r,t}function d_(i,e,t,n){var r=i[0],s=n||{},l,c,h,d,f,m,g,y,v;if((e<0||e>1)&&(e=K1(e)),r.lookup||Di(i),i.length>1){for(h=i.totalLength*e,f=m=0;(f+=i[m++].totalLength)<h;)r=i[m];d=f-r.totalLength,e=(h-d)/(f-d)||0}return l=r.samples,c=r.resolution,h=r.totalLength*e,m=r.lookup.length?r.lookup[e<1?~~(h/r.minLength):r.lookup.length-1]||0:Z1(l,h,e),d=m?l[m-1]:0,f=l[m],f<h&&(d=f,f=l[++m]),g=1/c*((h-d)/(f-d)+m%c)||0,v=1-g,m=~~(m/c)*6,y=r[m],s.x=De((g*g*(r[m+6]-y)+3*v*(g*(r[m+4]-y)+v*(r[m+2]-y)))*g+y),s.y=De((g*g*(r[m+7]-(y=r[m+1]))+3*v*(g*(r[m+5]-y)+v*(r[m+3]-y)))*g+y),t&&(s.angle=r.totalLength?J1(r,m,g>=1?1-1e-9:g||1e-9):r.angle||0),s}function na(i,e,t,n,r,s,l){for(var c=i.length,h,d,f,m,g;--c>-1;)for(h=i[c],d=h.length,f=0;f<d;f+=2)m=h[f],g=h[f+1],h[f]=m*e+g*n+s,h[f+1]=m*t+g*r+l;return i._dirty=1,i}function fk(i,e,t,n,r,s,l,c,h){if(!(i===c&&e===h)){t=En(t),n=En(n);var d=r%360*ZA,f=cc(d),m=lc(d),g=Math.PI,y=g*2,v=(i-c)/2,x=(e-h)/2,S=f*v+m*x,C=-m*v+f*x,b=S*S,P=C*C,E=b/(t*t)+P/(n*n);E>1&&(t=yr(E)*t,n=yr(E)*n);var A=t*t,M=n*n,k=(A*M-A*P-M*b)/(A*P+M*b);k<0&&(k=0);var $=(s===l?-1:1)*yr(k),D=$*(t*C/n),O=$*-(n*S/t),G=(i+c)/2,te=(e+h)/2,Z=G+(f*D-m*O),ie=te+(m*D+f*O),he=(S-D)/t,V=(C-O)/n,Q=(-S-D)/t,X=(-C-O)/n,U=he*he+V*V,W=(V<0?-1:1)*Math.acos(he/yr(U)),R=(he*X-V*Q<0?-1:1)*Math.acos((he*Q+V*X)/yr(U*(Q*Q+X*X)));isNaN(R)&&(R=g),!l&&R>0?R-=y:l&&R<0&&(R+=y),W%=y,R%=y;var N=Math.ceil(En(R)/(y/4)),J=[],ne=R/N,re=4/3*lc(ne/2)/(1+cc(ne/2)),fe=f*t,Te=m*t,Ee=m*-n,Ie=f*n,Me;for(Me=0;Me<N;Me++)r=W+Me*ne,S=cc(r),C=lc(r),he=cc(r+=ne),V=lc(r),J.push(S-re*C,C+re*S,he+re*V,V-re*he,he,V);for(Me=0;Me<J.length;Me+=2)S=J[Me],C=J[Me+1],J[Me]=S*fe+C*Ee+Z,J[Me+1]=S*Te+C*Ie+ie;return J[Me-2]=c,J[Me-1]=h,J}}function Lc(i){var e=(i+"").replace(QA,function(D){var O=+D;return O<1e-4&&O>-1e-4?0:O}).match(YA)||[],t=[],n=0,r=0,s=2/3,l=e.length,c=0,h="ERROR: malformed path: "+i,d,f,m,g,y,v,x,S,C,b,P,E,A,M,k,$=function(O,G,te,Z){b=(te-O)/3,P=(Z-G)/3,x.push(O+b,G+P,te-b,Z-P,te,Z)};if(!i||!isNaN(e[0])||isNaN(e[1]))return console.log(h),t;for(d=0;d<l;d++)if(A=y,isNaN(e[d])?(y=e[d].toUpperCase(),v=y!==e[d]):d--,m=+e[d+1],g=+e[d+2],v&&(m+=n,g+=r),d||(S=m,C=g),y==="M")x&&(x.length<8?t.length-=1:c+=x.length),n=S=m,r=C=g,x=[m,g],t.push(x),d+=2,y="L";else if(y==="C")x||(x=[0,0]),v||(n=r=0),x.push(m,g,n+e[d+3]*1,r+e[d+4]*1,n+=e[d+5]*1,r+=e[d+6]*1),d+=6;else if(y==="S")b=n,P=r,(A==="C"||A==="S")&&(b+=n-x[x.length-4],P+=r-x[x.length-3]),v||(n=r=0),x.push(b,P,m,g,n+=e[d+3]*1,r+=e[d+4]*1),d+=4;else if(y==="Q")b=n+(m-n)*s,P=r+(g-r)*s,v||(n=r=0),n+=e[d+3]*1,r+=e[d+4]*1,x.push(b,P,n+(m-n)*s,r+(g-r)*s,n,r),d+=4;else if(y==="T")b=n-x[x.length-4],P=r-x[x.length-3],x.push(n+b,r+P,m+(n+b*1.5-m)*s,g+(r+P*1.5-g)*s,n=m,r=g),d+=2;else if(y==="H")$(n,r,n=m,r),d+=1;else if(y==="V")$(n,r,n,r=m+(v?r-n:0)),d+=1;else if(y==="L"||y==="Z")y==="Z"&&(m=S,g=C,x.closed=!0),(y==="L"||En(n-m)>.5||En(r-g)>.5)&&($(n,r,m,g),y==="L"&&(d+=2)),n=m,r=g;else if(y==="A"){if(M=e[d+4],k=e[d+5],b=e[d+6],P=e[d+7],f=7,M.length>1&&(M.length<3?(P=b,b=k,f--):(P=k,b=M.substr(2),f-=2),k=M.charAt(1),M=M.charAt(0)),E=fk(n,r,+e[d+1],+e[d+2],+e[d+3],+M,+k,(v?n:0)+b*1,(v?r:0)+P*1),d+=f,E)for(f=0;f<E.length;f++)x.push(E[f]);n=x[x.length-2],r=x[x.length-1]}else console.log(h);return d=x.length,d<6?(t.pop(),d=0):x[0]===x[d-2]&&x[1]===x[d-1]&&(x.closed=!0),t.totalPoints=c+d,t}function pk(i,e){e===void 0&&(e=1);for(var t=i[0],n=0,r=[t,n],s=2;s<i.length;s+=2)r.push(t,n,i[s],n=(i[s]-t)*e/2,t=i[s],-n);return r}function bf(i,e){En(i[0]-i[2])<1e-4&&En(i[1]-i[3])<1e-4&&(i=i.slice(2));var t=i.length-2,n=+i[0],r=+i[1],s=+i[2],l=+i[3],c=[n,r,n,r],h=s-n,d=l-r,f=Math.abs(i[t]-n)<.001&&Math.abs(i[t+1]-r)<.001,m,g,y,v,x,S,C,b,P,E,A,M,k,$,D;for(f&&(i.push(s,l),s=n,l=r,n=i[t-2],r=i[t-1],i.unshift(n,r),t+=4),e=e||e===0?+e:1,y=2;y<t;y+=2)m=n,g=r,n=s,r=l,s=+i[y+2],l=+i[y+3],!(n===s&&r===l)&&(v=h,x=d,h=s-n,d=l-r,S=yr(v*v+x*x),C=yr(h*h+d*d),b=yr(Math.pow(h/C+v/S,2)+Math.pow(d/C+x/S,2)),P=(S+C)*e*.25/b,E=n-(n-m)*(S?P/S:0),A=n+(s-n)*(C?P/C:0),M=n-(E+((A-E)*(S*3/(S+C)+.5)/4||0)),k=r-(r-g)*(S?P/S:0),$=r+(l-r)*(C?P/C:0),D=r-(k+(($-k)*(S*3/(S+C)+.5)/4||0)),(n!==m||r!==g)&&c.push(De(E+M),De(k+D),De(n),De(r),De(A+M),De($+D)));return n!==s||r!==l||c.length<4?c.push(De(s),De(l),De(s),De(l)):c.length-=2,c.length===2?c.push(n,r,n,r,n,r):f&&(c.splice(0,6),c.length=c.length-6),c}function tv(i){Q1(i[0])&&(i=[i]);var e="",t=i.length,n,r,s,l;for(r=0;r<t;r++){for(l=i[r],e+="M"+De(l[0])+","+De(l[1])+" C",n=l.length,s=2;s<n;s++)e+=De(l[s++])+","+De(l[s++])+" "+De(l[s++])+","+De(l[s++])+" "+De(l[s++])+","+De(l[s])+" ";l.closed&&(e+="z")}return e}var _r,$i,op,qc,ra,_c,Bc,da,Hn="transform",Tf=Hn+"Origin",nv,rv=function(e){var t=e.ownerDocument||e;for(!(Hn in e.style)&&("msTransform"in e.style)&&(Hn="msTransform",Tf=Hn+"Origin");t.parentNode&&(t=t.parentNode););if($i=window,Bc=new Ea,t){_r=t,op=t.documentElement,qc=t.body,da=_r.createElementNS("http://www.w3.org/2000/svg","g"),da.style.transform="none";var n=t.createElement("div"),r=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(n),n.appendChild(r),n.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),nv=r.offsetParent!==n,s.removeChild(n))}return t},mk=function(e){for(var t,n;e&&e!==qc;)n=e._gsap,n&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t},iv=[],sv=[],gk=function(){return $i.pageYOffset||_r.scrollTop||op.scrollTop||qc.scrollTop||0},yk=function(){return $i.pageXOffset||_r.scrollLeft||op.scrollLeft||qc.scrollLeft||0},ap=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},_k=function i(e){if($i.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return i(e)},Rd=function i(e,t){if(e.parentNode&&(_r||rv(e))){var n=ap(e),r=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=n?t?"rect":"g":"div",l=t!==2?0:100,c=t===3?100:0,h="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",d=_r.createElementNS?_r.createElementNS(r.replace(/^https/,"http"),s):_r.createElement(s);return t&&(n?(_c||(_c=i(e)),d.setAttribute("width",.01),d.setAttribute("height",.01),d.setAttribute("transform","translate("+l+","+c+")"),_c.appendChild(d)):(ra||(ra=i(e),ra.style.cssText=h),d.style.cssText=h+"width:0.1px;height:0.1px;top:"+c+"px;left:"+l+"px",ra.appendChild(d))),d}throw"Need document and parent."},xk=function(e){for(var t=new Ea,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t},vk=function(e){var t=e.getCTM(),n;return t||(n=e.style[Hn],e.style[Hn]="none",e.appendChild(da),t=da.getCTM(),e.removeChild(da),n?e.style[Hn]=n:e.style.removeProperty(Hn.replace(/([A-Z])/g,"-$1").toLowerCase())),t||Bc.clone()},Sk=function(e,t){var n=ap(e),r=e===n,s=n?iv:sv,l=e.parentNode,c=l&&!n&&l.shadowRoot&&l.shadowRoot.appendChild?l.shadowRoot:l,h,d,f,m,g,y;if(e===$i)return e;if(s.length||s.push(Rd(e,1),Rd(e,2),Rd(e,3)),h=n?_c:ra,n)r?(f=vk(e),m=-f.e/f.a,g=-f.f/f.d,d=Bc):e.getBBox?(f=e.getBBox(),d=e.transform?e.transform.baseVal:{},d=d.numberOfItems?d.numberOfItems>1?xk(d):d.getItem(0).matrix:Bc,m=d.a*f.x+d.c*f.y,g=d.b*f.x+d.d*f.y):(d=new Ea,m=g=0),t&&e.tagName.toLowerCase()==="g"&&(m=g=0),(r?n:l).appendChild(h),h.setAttribute("transform","matrix("+d.a+","+d.b+","+d.c+","+d.d+","+(d.e+m)+","+(d.f+g)+")");else{if(m=g=0,nv)for(d=e.offsetParent,f=e;f&&(f=f.parentNode)&&f!==d&&f.parentNode;)($i.getComputedStyle(f)[Hn]+"").length>4&&(m=f.offsetLeft,g=f.offsetTop,f=0);if(y=$i.getComputedStyle(e),y.position!=="absolute"&&y.position!=="fixed")for(d=e.offsetParent;l&&l!==d;)m+=l.scrollLeft||0,g+=l.scrollTop||0,l=l.parentNode;f=h.style,f.top=e.offsetTop-g+"px",f.left=e.offsetLeft-m+"px",f[Hn]=y[Hn],f[Tf]=y[Tf],f.position=y.position==="fixed"?"fixed":"absolute",c.appendChild(h)}return h},Id=function(e,t,n,r,s,l,c){return e.a=t,e.b=n,e.c=r,e.d=s,e.e=l,e.f=c,e},Ea=(function(){function i(t,n,r,s,l,c){t===void 0&&(t=1),n===void 0&&(n=0),r===void 0&&(r=0),s===void 0&&(s=1),l===void 0&&(l=0),c===void 0&&(c=0),Id(this,t,n,r,s,l,c)}var e=i.prototype;return e.inverse=function(){var n=this.a,r=this.b,s=this.c,l=this.d,c=this.e,h=this.f,d=n*l-r*s||1e-10;return Id(this,l/d,-r/d,-s/d,n/d,(s*h-l*c)/d,-(n*h-r*c)/d)},e.multiply=function(n){var r=this.a,s=this.b,l=this.c,c=this.d,h=this.e,d=this.f,f=n.a,m=n.c,g=n.b,y=n.d,v=n.e,x=n.f;return Id(this,f*r+g*l,f*s+g*c,m*r+y*l,m*s+y*c,h+v*r+x*l,d+v*s+x*c)},e.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(n){var r=this.a,s=this.b,l=this.c,c=this.d,h=this.e,d=this.f;return r===n.a&&s===n.b&&l===n.c&&c===n.d&&h===n.e&&d===n.f},e.apply=function(n,r){r===void 0&&(r={});var s=n.x,l=n.y,c=this.a,h=this.b,d=this.c,f=this.d,m=this.e,g=this.f;return r.x=s*c+l*d+m||0,r.y=s*h+l*f+g||0,r},i})();function Ms(i,e,t,n){if(!i||!i.parentNode||(_r||rv(i)).documentElement===i)return new Ea;var r=mk(i),s=ap(i),l=s?iv:sv,c=Sk(i,t),h=l[0].getBoundingClientRect(),d=l[1].getBoundingClientRect(),f=l[2].getBoundingClientRect(),m=c.parentNode,g=!n&&_k(i),y=new Ea((d.left-h.left)/100,(d.top-h.top)/100,(f.left-h.left)/100,(f.top-h.top)/100,h.left+(g?0:yk()),h.top+(g?0:gk()));if(m.removeChild(c),r)for(h=r.length;h--;)d=r[h],d.scaleX=d.scaleY=0,d.renderTransform(1,d);return e?y.inverse():y}var wk="x,translateX,left,marginLeft,xPercent".split(","),Ck="y,translateY,top,marginTop,yPercent".split(","),bk=Math.PI/180,wn,ov,gs,Pf,Dd,f_,Tk=function(){return wn||typeof window<"u"&&(wn=window.gsap)&&wn.registerPlugin&&wn},qo=function(e,t,n,r){for(var s=t.length,l=r===2?0:r,c=0;c<s;c++)e[l]=parseFloat(t[c][n]),r===2&&(e[l+1]=0),l+=2;return e},Cs=function(e,t,n){return parseFloat(e._gsap.get(e,t,n||"px"))||0},av=function(e){var t=e[0],n=e[1],r;for(r=2;r<e.length;r+=2)t=e[r]+=t,n=e[r+1]+=n},p_=function(e,t,n,r,s,l,c,h,d){if(c.type==="cubic")t=[t];else{c.fromCurrent!==!1&&t.unshift(Cs(n,r,h),s?Cs(n,s,d):0),c.relative&&av(t);var f=s?bf:pk;t=[f(t,c.curviness)]}return t=l(lv(t,n,c)),Fc(e,n,r,t,"x",h),s&&Fc(e,n,s,t,"y",d),Di(t,c.resolution||(c.curviness===0?20:12))},Pk=function(e){return e},Ek=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,m_=function(e,t,n){var r=Ms(e),s=0,l=0,c;return(e.tagName+"").toLowerCase()==="svg"?(c=e.viewBox.baseVal,c.width||(c={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):c=t&&e.getBBox&&e.getBBox(),t&&t!=="auto"&&(s=t.push?t[0]*(c?c.width:e.offsetWidth||0):t.x,l=t.push?t[1]*(c?c.height:e.offsetHeight||0):t.y),n.apply(s||l?r.apply({x:s,y:l}):{x:r.e,y:r.f})},Ef=function(e,t,n,r){var s=Ms(e.parentNode,!0,!0),l=s.clone().multiply(Ms(t)),c=m_(e,n,s),h=m_(t,r,s),d=h.x,f=h.y,m;return l.e=l.f=0,r==="auto"&&t.getTotalLength&&t.tagName.toLowerCase()==="path"&&(m=t.getAttribute("d").match(Ek)||[],m=l.apply({x:+m[0],y:+m[1]}),d+=m.x,f+=m.y),m&&(m=l.apply(t.getBBox()),d-=m.x,f-=m.y),l.e=d-c.x,l.f=f-c.y,l},lv=function(e,t,n){var r=n.align,s=n.matrix,l=n.offsetX,c=n.offsetY,h=n.alignOrigin,d=e[0][0],f=e[0][1],m=Cs(t,"x"),g=Cs(t,"y"),y,v,x;return!e||!e.length?yc("M0,0L0,0"):(r&&(r==="self"||(y=Pf(r)[0]||t)===t?na(e,1,0,0,1,m-d,g-f):(h&&h[2]!==!1?wn.set(t,{transformOrigin:h[0]*100+"% "+h[1]*100+"%"}):h=[Cs(t,"xPercent")/-100,Cs(t,"yPercent")/-100],v=Ef(t,y,h,"auto"),x=v.apply({x:d,y:f}),na(e,v.a,v.b,v.c,v.d,m+v.e-(x.x-v.e),g+v.f-(x.y-v.f)))),s?na(e,s.a,s.b,s.c,s.d,s.e,s.f):(l||c)&&na(e,1,0,0,1,l||0,c||0),e)},Fc=function(e,t,n,r,s,l){var c=t._gsap,h=c.harness,d=h&&h.aliases&&h.aliases[n],f=d&&d.indexOf(",")<0?d:n,m=e._pt=new ov(e._pt,t,f,0,0,Pk,0,c.set(t,f,e));m.u=gs(c.get(t,f,l))||0,m.path=r,m.pp=s,e._props.push(f)},Ak=function(e,t){return function(n){return e||t!==1?ev(n,e,t):n}},cv={version:"3.13.0",name:"motionPath",register:function(e,t,n){wn=e,gs=wn.utils.getUnit,Pf=wn.utils.toArray,Dd=wn.core.getStyleSaver,f_=wn.core.reverting||function(){},ov=n},init:function(e,t,n){if(!wn)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof t=="object"&&!t.style)||!t.path)&&(t={path:t});var r=[],s=t,l=s.path,c=s.autoRotate,h=s.unitX,d=s.unitY,f=s.x,m=s.y,g=l[0],y=Ak(t.start,"end"in t?t.end:1),v,x;if(this.rawPaths=r,this.target=e,this.tween=n,this.styles=Dd&&Dd(e,"transform"),(this.rotate=c||c===0)&&(this.rOffset=parseFloat(c)||0,this.radians=!!t.useRadians,this.rProp=t.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=gs(e._gsap.get(e,this.rProp))||0),Array.isArray(l)&&!("closed"in l)&&typeof g!="number"){for(x in g)!f&&~wk.indexOf(x)?f=x:!m&&~Ck.indexOf(x)&&(m=x);f&&m?r.push(p_(this,qo(qo([],l,f,0),l,m,1),e,f,m,y,t,h||gs(l[0][f]),d||gs(l[0][m]))):f=m=0;for(x in g)x!==f&&x!==m&&r.push(p_(this,qo([],l,x,2),e,x,0,y,t,gs(l[0][x])))}else v=y(lv(yc(t.path),e,t)),Di(v,t.resolution),r.push(v),Fc(this,e,t.x||"x",v,"x",t.unitX||"px"),Fc(this,e,t.y||"y",v,"y",t.unitY||"px");n.vars.immediateRender&&this.render(n.progress(),this)},render:function(e,t){var n=t.rawPaths,r=n.length,s=t._pt;if(t.tween._time||!f_()){for(e>1?e=1:e<0&&(e=0);r--;)d_(n[r],e,!r&&t.rotate,n[r]);for(;s;)s.set(s.t,s.p,s.path[s.pp]+s.u,s.d,e),s=s._next;t.rotate&&t.rSet(t.target,t.rProp,n[0].angle*(t.radians?bk:1)+t.rOffset+t.ru,t,e)}else t.styles.revert()},getLength:function(e){return Di(yc(e)).totalLength},sliceRawPath:ev,getRawPath:yc,pointsToSegment:bf,stringToRawPath:Lc,rawPathToString:tv,transformRawPath:na,getGlobalMatrix:Ms,getPositionOnPath:d_,cacheRawPathMeasurements:Di,convertToPath:function(e,t){return Pf(e).map(function(n){return hk(n,t!==!1)})},convertCoordinates:function(e,t,n){var r=Ms(t,!0,!0).multiply(Ms(e));return n?r.apply(n):r},getAlignMatrix:Ef,getRelativePosition:function(e,t,n,r){var s=Ef(e,t,n,r);return{x:s.e,y:s.f}},arrayToRawPath:function(e,t){t=t||{};var n=qo(qo([],e,t.x||"x",0),e,t.y||"y",1);return t.relative&&av(n),[t.type==="cubic"?n:bf(n,t.curviness)]}};Tk()&&wn.registerPlugin(cv);ve.registerPlugin(cv);fw.createRoot(document.getElementById("root")).render(B.jsx(qA,{}));export{CC as $,ux as A,Vt as B,Qe as C,He as D,pe as E,L_ as F,Hc as G,k0 as H,Ls as I,VC as J,tb as K,ka as L,be as M,st as N,qe as O,Dt as P,xb as Q,Gd as R,If as S,Ql as T,Hd as U,R0 as V,id as W,I0 as X,TC as Y,Ds as Z,ft as _,Z_ as a,R_ as a0,hx as a1,we as a2,Le as a3,bb as a4,Yb as a5,zb as a6,f2 as a7,m2 as a8,v2 as a9,w2 as aa,C2 as ab,Px as ac,q0 as ad,U0 as ae,_y as af,tr as ag,TT as ah,je as ai,ce as aj,Vw as ak,_a as al,Ay as am,kx as an,Wn as b,Ob as c,ga as d,bt as e,V0 as f,Lb as g,hc as h,Rf as i,ax as j,W_ as k,jn as l,nx as m,xa as n,d2 as o,p2 as p,_2 as q,oC as r,S2 as s,Ae as t,Uw as u,T2 as v,Ge as w,An as x,A_ as y,zn as z};
